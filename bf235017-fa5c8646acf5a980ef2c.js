"use strict";(self.webpackChunk_react_babylonjs_docs=self.webpackChunk_react_babylonjs_docs||[]).push([[745],{91838:function(t,r,e){e.d(r,{AA:function(){return f},I9:function(){return _},IU:function(){return y},PT:function(){return l},Pq:function(){return u},uq:function(){return m}});var s=e(13364),i=e(9680),o=e(25123),n=e(17026),a=e(48478),h=e(5994);const c=t=>parseInt(t.toString().replace(/\W/g,""));class _{constructor(t=0,r=0){this.x=t,this.y=r}toString(){return`{X: ${this.x} Y: ${this.y}}`}getClassName(){return"Vector2"}getHashCode(){let t=c(this.x);return t=397*t^c(this.y),t}toArray(t,r=0){return t[r]=this.x,t[r+1]=this.y,this}fromArray(t,r=0){return _.FromArrayToRef(t,r,this),this}asArray(){return[this.x,this.y]}copyFrom(t){return this.x=t.x,this.y=t.y,this}copyFromFloats(t,r){return this.x=t,this.y=r,this}set(t,r){return this.copyFromFloats(t,r)}setAll(t){return this.copyFromFloats(t,t)}add(t){return new this.constructor(this.x+t.x,this.y+t.y)}addToRef(t,r){return r.x=this.x+t.x,r.y=this.y+t.y,r}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}addInPlaceFromFloats(t,r){return this.x+=t,this.y+=r,this}addVector3(t){return new this.constructor(this.x+t.x,this.y+t.y)}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y)}subtractToRef(t,r){return r.x=this.x-t.x,r.y=this.y-t.y,r}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this}multiply(t){return new this.constructor(this.x*t.x,this.y*t.y)}multiplyToRef(t,r){return r.x=this.x*t.x,r.y=this.y*t.y,r}multiplyByFloats(t,r){return new this.constructor(this.x*t,this.y*r)}divide(t){return new this.constructor(this.x/t.x,this.y/t.y)}divideToRef(t,r){return r.x=this.x/t.x,r.y=this.y/t.y,r}divideInPlace(t){return this.x=this.x/t.x,this.y=this.y/t.y,this}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t.x,t.y)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t.x,t.y)}minimizeInPlaceFromFloats(t,r){return this.x=Math.min(t,this.x),this.y=Math.min(r,this.y),this}maximizeInPlaceFromFloats(t,r){return this.x=Math.max(t,this.x),this.y=Math.max(r,this.y),this}subtractFromFloats(t,r){return new this.constructor(this.x-t,this.y-r)}subtractFromFloatsToRef(t,r,e){return e.copyFromFloats(this.x-t,this.y-r)}negate(){return new this.constructor(-this.x,-this.y)}negateInPlace(){return this.x*=-1,this.y*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y)}scaleInPlace(t){return this.x*=t,this.y*=t,this}scale(t){return new this.constructor(this.x*t,this.y*t)}scaleToRef(t,r){return r.x=this.x*t,r.y=this.y*t,r}scaleAndAddToRef(t,r){return r.x+=this.x*t,r.y+=this.y*t,r}equals(t){return t&&this.x===t.x&&this.y===t.y}equalsWithEpsilon(t,r=s.bH){return t&&(0,h.Mj)(this.x,t.x,r)&&(0,h.Mj)(this.y,t.y,r)}equalsToFloats(t,r){return this.x===t&&this.y===r}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))}floorToRef(t){return t.x=Math.floor(this.x),t.y=Math.floor(this.y),t}fract(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}fractToRef(t){return t.x=this.x-Math.floor(this.x),t.y=this.y-Math.floor(this.y),t}rotateToRef(t,r){const e=Math.cos(t),s=Math.sin(t),i=e*this.x-s*this.y,o=s*this.x+e*this.y;return r.x=i,r.y=o,r}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new this.constructor;return this.normalizeToRef(t),t}normalizeToRef(t){const r=this.length();return 0===r?t.copyFrom(this):this.scaleToRef(1/r,t)}clone(){return new this.constructor(this.x,this.y)}dot(t){return this.x*t.x+this.y*t.y}static Zero(){return new _(0,0)}static One(){return new _(1,1)}static Random(t=0,r=1){return new _((0,h.VD)(t,r),(0,h.VD)(t,r))}static RandomToRef(t=0,r=1,e){return e.copyFromFloats((0,h.VD)(t,r),(0,h.VD)(t,r))}static get ZeroReadOnly(){return _._ZeroReadOnly}static FromArray(t,r=0){return new _(t[r],t[r+1])}static FromArrayToRef(t,r,e){return e.x=t[r],e.y=t[r+1],e}static FromFloatsToRef(t,r,e){return e.copyFromFloats(t,r),e}static CatmullRom(t,r,e,s,i){const o=i*i,n=i*o,a=.5*(2*r.x+(-t.x+e.x)*i+(2*t.x-5*r.x+4*e.x-s.x)*o+(-t.x+3*r.x-3*e.x+s.x)*n),h=.5*(2*r.y+(-t.y+e.y)*i+(2*t.y-5*r.y+4*e.y-s.y)*o+(-t.y+3*r.y-3*e.y+s.y)*n);return new t.constructor(a,h)}static ClampToRef(t,r,e,s){return s.x=(0,h.OQ)(t.x,r.x,e.x),s.y=(0,h.OQ)(t.y,r.y,e.y),s}static Clamp(t,r,e){const s=(0,h.OQ)(t.x,r.x,e.x),i=(0,h.OQ)(t.y,r.y,e.y);return new t.constructor(s,i)}static Hermite(t,r,e,s,i){const o=i*i,n=i*o,a=2*n-3*o+1,h=-2*n+3*o,c=n-2*o+i,_=n-o,u=t.x*a+e.x*h+r.x*c+s.x*_,y=t.y*a+e.y*h+r.y*c+s.y*_;return new t.constructor(u,y)}static Hermite1stDerivative(t,r,e,s,i){const o=new t.constructor;return this.Hermite1stDerivativeToRef(t,r,e,s,i,o),o}static Hermite1stDerivativeToRef(t,r,e,s,i,o){const n=i*i;return o.x=6*(n-i)*t.x+(3*n-4*i+1)*r.x+6*(-n+i)*e.x+(3*n-2*i)*s.x,o.y=6*(n-i)*t.y+(3*n-4*i+1)*r.y+6*(-n+i)*e.y+(3*n-2*i)*s.y,o}static Lerp(t,r,e){const s=t.x+(r.x-t.x)*e,i=t.y+(r.y-t.y)*e;return new t.constructor(s,i)}static Dot(t,r){return t.x*r.x+t.y*r.y}static Normalize(t){const r=new t.constructor;return _.NormalizeToRef(t,r),r}static NormalizeToRef(t,r){return t.normalizeToRef(r),r}static Minimize(t,r){const e=t.x<r.x?t.x:r.x,s=t.y<r.y?t.y:r.y;return new t.constructor(e,s)}static Maximize(t,r){const e=t.x>r.x?t.x:r.x,s=t.y>r.y?t.y:r.y;return new t.constructor(e,s)}static Transform(t,r){const e=new t.constructor;return _.TransformToRef(t,r,e),e}static TransformToRef(t,r,e){const s=r.m,i=t.x*s[0]+t.y*s[4]+s[12],o=t.x*s[1]+t.y*s[5]+s[13];return e.x=i,e.y=o,e}static PointInTriangle(t,r,e,s){const i=.5*(-e.y*s.x+r.y*(-e.x+s.x)+r.x*(e.y-s.y)+e.x*s.y),o=i<0?-1:1,n=(r.y*s.x-r.x*s.y+(s.y-r.y)*t.x+(r.x-s.x)*t.y)*o,a=(r.x*e.y-r.y*e.x+(r.y-e.y)*t.x+(e.x-r.x)*t.y)*o;return n>0&&a>0&&n+a<2*i*o}static Distance(t,r){return Math.sqrt(_.DistanceSquared(t,r))}static DistanceSquared(t,r){const e=t.x-r.x,s=t.y-r.y;return e*e+s*s}static Center(t,r){const e=new t.constructor;return _.CenterToRef(t,r,e)}static CenterToRef(t,r,e){return e.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2)}static DistanceOfPointFromSegment(t,r,e){const s=_.DistanceSquared(r,e);if(0===s)return _.Distance(t,r);const i=e.subtract(r),o=Math.max(0,Math.min(1,_.Dot(t.subtract(r),i)/s)),n=r.add(i.multiplyByFloats(o,o));return _.Distance(t,n)}}_._ZeroReadOnly=_.Zero(),Object.defineProperties(_.prototype,{dimension:{value:[2]},rank:{value:1}});class u{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}constructor(t=0,r=0,e=0){this._isDirty=!0,this._x=t,this._y=r,this._z=e}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z}}`}getClassName(){return"Vector3"}getHashCode(){let t=c(this._x);return t=397*t^c(this._y),t=397*t^c(this._z),t}asArray(){return[this._x,this._y,this._z]}toArray(t,r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,this}fromArray(t,r=0){return u.FromArrayToRef(t,r,this),this}toQuaternion(){return l.RotationYawPitchRoll(this._y,this._x,this._z)}addInPlace(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._isDirty=!0,this}addInPlaceFromFloats(t,r,e){return this._x+=t,this._y+=r,this._z+=e,this._isDirty=!0,this}add(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z)}addToRef(t,r){return r.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._isDirty=!0,this}subtract(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z)}subtractToRef(t,r){return this.subtractFromFloatsToRef(t._x,t._y,t._z,r)}subtractFromFloats(t,r,e){return new this.constructor(this._x-t,this._y-r,this._z-e)}subtractFromFloatsToRef(t,r,e,s){return s.copyFromFloats(this._x-t,this._y-r,this._z-e)}negate(){return new this.constructor(-this._x,-this._y,-this._z)}negateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}negateToRef(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._isDirty=!0,this}scale(t){return new this.constructor(this._x*t,this._y*t,this._z*t)}scaleToRef(t,r){return r.copyFromFloats(this._x*t,this._y*t,this._z*t)}getNormalToRef(t){const r=this.length();let e=Math.acos(this.y/r);const s=Math.atan2(this.z,this.x);e>Math.PI/2?e-=Math.PI/2:e+=Math.PI/2;const i=r*Math.sin(e)*Math.cos(s),o=r*Math.cos(e),n=r*Math.sin(e)*Math.sin(s);return t.set(i,o,n),t}applyRotationQuaternionToRef(t,r){const e=this._x,s=this._y,i=this._z,o=t._x,n=t._y,a=t._z,h=t._w,c=2*(n*i-a*s),_=2*(a*e-o*i),u=2*(o*s-n*e);return r._x=e+h*c+n*u-a*_,r._y=s+h*_+a*c-o*u,r._z=i+h*u+o*_-n*c,r._isDirty=!0,r}applyRotationQuaternionInPlace(t){return this.applyRotationQuaternionToRef(t,this)}applyRotationQuaternion(t){return this.applyRotationQuaternionToRef(t,new this.constructor)}scaleAndAddToRef(t,r){return r.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)}projectOnPlane(t,r){const e=new this.constructor;return this.projectOnPlaneToRef(t,r,e),e}projectOnPlaneToRef(t,r,e){const s=t.normal,i=t.d,o=x.Vector3[0];this.subtractToRef(r,o),o.normalize();const n=u.Dot(o,s);if(Math.abs(n)<1e-10)e.setAll(1/0);else{const t=-(u.Dot(r,s)+i)/n,a=o.scaleInPlace(t);r.addToRef(a,e)}return e}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}equalsWithEpsilon(t,r=s.bH){return t&&(0,h.Mj)(this._x,t._x,r)&&(0,h.Mj)(this._y,t._y,r)&&(0,h.Mj)(this._z,t._z,r)}equalsToFloats(t,r,e){return this._x===t&&this._y===r&&this._z===e}multiplyInPlace(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this._isDirty=!0,this}multiply(t){return this.multiplyByFloats(t._x,t._y,t._z)}multiplyToRef(t,r){return r.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)}multiplyByFloats(t,r,e){return new this.constructor(this._x*t,this._y*r,this._z*e)}divide(t){return new this.constructor(this._x/t._x,this._y/t._y,this._z/t._z)}divideToRef(t,r){return r.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)}divideInPlace(t){return this._x=this._x/t._x,this._y=this._y/t._y,this._z=this._z/t._z,this._isDirty=!0,this}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}minimizeInPlaceFromFloats(t,r,e){return t<this._x&&(this.x=t),r<this._y&&(this.y=r),e<this._z&&(this.z=e),this}maximizeInPlaceFromFloats(t,r,e){return t>this._x&&(this.x=t),r>this._y&&(this.y=r),e>this._z&&(this.z=e),this}isNonUniformWithinEpsilon(t){const r=Math.abs(this._x),e=Math.abs(this._y);if(!(0,h.Mj)(r,e,t))return!0;const s=Math.abs(this._z);return!(0,h.Mj)(r,s,t)||!(0,h.Mj)(e,s,t)}get isNonUniform(){const t=Math.abs(this._x);if(t!==Math.abs(this._y))return!0;return t!==Math.abs(this._z)}floorToRef(t){return t._x=Math.floor(this._x),t._y=Math.floor(this._y),t._z=Math.floor(this._z),t._isDirty=!0,t}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fractToRef(t){return t._x=this.x-Math.floor(this._x),t._y=this.y-Math.floor(this._y),t._z=this.z-Math.floor(this._z),t._isDirty=!0,t}fract(){return new this.constructor(this.x-Math.floor(this._x),this.y-Math.floor(this._y),this.z-Math.floor(this._z))}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z}get hasAZeroComponent(){return this._x*this._y*this._z==0}normalize(){return this.normalizeFromLength(this.length())}reorderInPlace(t){if("xyz"===(t=t.toLowerCase()))return this;const r=x.Vector3[0].copyFrom(this);return this.x=r[t[0]],this.y=r[t[1]],this.z=r[t[2]],this}rotateByQuaternionToRef(t,r){return t.toRotationMatrix(x.Matrix[0]),u.TransformCoordinatesToRef(this,x.Matrix[0],r),r}rotateByQuaternionAroundPointToRef(t,r,e){return this.subtractToRef(r,x.Vector3[0]),x.Vector3[0].rotateByQuaternionToRef(t,x.Vector3[0]),r.addToRef(x.Vector3[0],e),e}cross(t){const r=new this.constructor;return u.CrossToRef(this,t,r)}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new this.constructor(0,0,0);return this.normalizeToRef(t),t}normalizeToRef(t){const r=this.length();return 0===r||1===r?t.copyFrom(this):this.scaleToRef(1/r,t)}clone(){return new this.constructor(this._x,this._y,this._z)}copyFrom(t){return this.copyFromFloats(t._x,t._y,t._z)}copyFromFloats(t,r,e){return this._x=t,this._y=r,this._z=e,this._isDirty=!0,this}set(t,r,e){return this.copyFromFloats(t,r,e)}setAll(t){return this._x=this._y=this._z=t,this._isDirty=!0,this}static GetClipFactor(t,r,e,s){const i=u.Dot(t,e);return(i-s)/(i-u.Dot(r,e))}static GetAngleBetweenVectors(t,r,e){const s=t.normalizeToRef(x.Vector3[1]),i=r.normalizeToRef(x.Vector3[2]);let o=u.Dot(s,i);o=(0,h.OQ)(o,-1,1);const n=Math.acos(o),a=x.Vector3[3];return u.CrossToRef(s,i,a),u.Dot(a,e)>0?isNaN(n)?0:n:isNaN(n)?-Math.PI:-Math.acos(o)}static GetAngleBetweenVectorsOnPlane(t,r,e){x.Vector3[0].copyFrom(t);const s=x.Vector3[0];x.Vector3[1].copyFrom(r);const i=x.Vector3[1];x.Vector3[2].copyFrom(e);const o=x.Vector3[2],n=x.Vector3[3],a=x.Vector3[4];s.normalize(),i.normalize(),o.normalize(),u.CrossToRef(o,s,n),u.CrossToRef(n,o,a);const c=Math.atan2(u.Dot(i,n),u.Dot(i,a));return(0,h.ed)(c)}static PitchYawRollToMoveBetweenPointsToRef(t,r,e){const s=f.Vector3[0];return r.subtractToRef(t,s),e._y=Math.atan2(s.x,s.z)||0,e._x=Math.atan2(Math.sqrt(s.x**2+s.z**2),s.y)||0,e._z=0,e._isDirty=!0,e}static PitchYawRollToMoveBetweenPoints(t,r){const e=u.Zero();return u.PitchYawRollToMoveBetweenPointsToRef(t,r,e)}static SlerpToRef(t,r,e,i){e=(0,h.OQ)(e,0,1);const o=x.Vector3[0],n=x.Vector3[1];o.copyFrom(t);const a=o.length();o.normalizeFromLength(a),n.copyFrom(r);const c=n.length();n.normalizeFromLength(c);const _=u.Dot(o,n);let y,l;if(_<1-s.bH){const t=Math.acos(_),r=1/Math.sin(t);y=Math.sin((1-e)*t)*r,l=Math.sin(e*t)*r}else y=1-e,l=e;return o.scaleInPlace(y),n.scaleInPlace(l),i.copyFrom(o).addInPlace(n),i.scaleInPlace((0,h.cP)(a,c,e)),i}static SmoothToRef(t,r,e,s,i){return u.SlerpToRef(t,r,0===s?1:e/s,i),i}static FromArray(t,r=0){return new u(t[r],t[r+1],t[r+2])}static FromFloatArray(t,r){return u.FromArray(t,r)}static FromArrayToRef(t,r,e){return e._x=t[r],e._y=t[r+1],e._z=t[r+2],e._isDirty=!0,e}static FromFloatArrayToRef(t,r,e){return u.FromArrayToRef(t,r,e)}static FromFloatsToRef(t,r,e,s){return s.copyFromFloats(t,r,e),s}static Zero(){return new u(0,0,0)}static One(){return new u(1,1,1)}static Up(){return new u(0,1,0)}static get UpReadOnly(){return u._UpReadOnly}static get DownReadOnly(){return u._DownReadOnly}static get RightReadOnly(){return u._RightReadOnly}static get LeftReadOnly(){return u._LeftReadOnly}static get LeftHandedForwardReadOnly(){return u._LeftHandedForwardReadOnly}static get RightHandedForwardReadOnly(){return u._RightHandedForwardReadOnly}static get LeftHandedBackwardReadOnly(){return u._LeftHandedBackwardReadOnly}static get RightHandedBackwardReadOnly(){return u._RightHandedBackwardReadOnly}static get ZeroReadOnly(){return u._ZeroReadOnly}static get OneReadOnly(){return u._OneReadOnly}static Down(){return new u(0,-1,0)}static Forward(t=!1){return new u(0,0,t?-1:1)}static Backward(t=!1){return new u(0,0,t?1:-1)}static Right(){return new u(1,0,0)}static Left(){return new u(-1,0,0)}static Random(t=0,r=1){return new u((0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r))}static RandomToRef(t=0,r=1,e){return e.copyFromFloats((0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r))}static TransformCoordinates(t,r){const e=u.Zero();return u.TransformCoordinatesToRef(t,r,e),e}static TransformCoordinatesToRef(t,r,e){return u.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,r,e),e}static TransformCoordinatesFromFloatsToRef(t,r,e,s,i){const o=s.m,n=t*o[0]+r*o[4]+e*o[8]+o[12],a=t*o[1]+r*o[5]+e*o[9]+o[13],h=t*o[2]+r*o[6]+e*o[10]+o[14],c=1/(t*o[3]+r*o[7]+e*o[11]+o[15]);return i._x=n*c,i._y=a*c,i._z=h*c,i._isDirty=!0,i}static TransformNormal(t,r){const e=u.Zero();return u.TransformNormalToRef(t,r,e),e}static TransformNormalToRef(t,r,e){return this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,r,e),e}static TransformNormalFromFloatsToRef(t,r,e,s,i){const o=s.m;return i._x=t*o[0]+r*o[4]+e*o[8],i._y=t*o[1]+r*o[5]+e*o[9],i._z=t*o[2]+r*o[6]+e*o[10],i._isDirty=!0,i}static CatmullRom(t,r,e,s,i){const o=i*i,n=i*o,a=.5*(2*r._x+(-t._x+e._x)*i+(2*t._x-5*r._x+4*e._x-s._x)*o+(-t._x+3*r._x-3*e._x+s._x)*n),h=.5*(2*r._y+(-t._y+e._y)*i+(2*t._y-5*r._y+4*e._y-s._y)*o+(-t._y+3*r._y-3*e._y+s._y)*n),c=.5*(2*r._z+(-t._z+e._z)*i+(2*t._z-5*r._z+4*e._z-s._z)*o+(-t._z+3*r._z-3*e._z+s._z)*n);return new t.constructor(a,h,c)}static Clamp(t,r,e){const s=new t.constructor;return u.ClampToRef(t,r,e,s),s}static ClampToRef(t,r,e,s){let i=t._x;i=i>e._x?e._x:i,i=i<r._x?r._x:i;let o=t._y;o=o>e._y?e._y:o,o=o<r._y?r._y:o;let n=t._z;return n=n>e._z?e._z:n,n=n<r._z?r._z:n,s.copyFromFloats(i,o,n),s}static CheckExtends(t,r,e){r.minimizeInPlace(t),e.maximizeInPlace(t)}static Hermite(t,r,e,s,i){const o=i*i,n=i*o,a=2*n-3*o+1,h=-2*n+3*o,c=n-2*o+i,_=n-o,u=t._x*a+e._x*h+r._x*c+s._x*_,y=t._y*a+e._y*h+r._y*c+s._y*_,l=t._z*a+e._z*h+r._z*c+s._z*_;return new t.constructor(u,y,l)}static Hermite1stDerivative(t,r,e,s,i){const o=new t.constructor;return this.Hermite1stDerivativeToRef(t,r,e,s,i,o),o}static Hermite1stDerivativeToRef(t,r,e,s,i,o){const n=i*i;return o._x=6*(n-i)*t._x+(3*n-4*i+1)*r._x+6*(-n+i)*e._x+(3*n-2*i)*s._x,o._y=6*(n-i)*t._y+(3*n-4*i+1)*r._y+6*(-n+i)*e._y+(3*n-2*i)*s._y,o._z=6*(n-i)*t._z+(3*n-4*i+1)*r._z+6*(-n+i)*e._z+(3*n-2*i)*s._z,o._isDirty=!0,o}static Lerp(t,r,e){const s=new t.constructor(0,0,0);return u.LerpToRef(t,r,e,s),s}static LerpToRef(t,r,e,s){return s._x=t._x+(r._x-t._x)*e,s._y=t._y+(r._y-t._y)*e,s._z=t._z+(r._z-t._z)*e,s._isDirty=!0,s}static Dot(t,r){return t._x*r._x+t._y*r._y+t._z*r._z}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z}static Cross(t,r){const e=new t.constructor;return u.CrossToRef(t,r,e),e}static CrossToRef(t,r,e){const s=t._y*r._z-t._z*r._y,i=t._z*r._x-t._x*r._z,o=t._x*r._y-t._y*r._x;return e.copyFromFloats(s,i,o),e}static Normalize(t){const r=u.Zero();return u.NormalizeToRef(t,r),r}static NormalizeToRef(t,r){return t.normalizeToRef(r),r}static Project(t,r,e,s){const i=new t.constructor;return u.ProjectToRef(t,r,e,s,i),i}static ProjectToRef(t,r,e,s,i){const o=s.width,n=s.height,a=s.x,h=s.y,c=x.Matrix[1];m.FromValuesToRef(o/2,0,0,0,0,-n/2,0,0,0,0,.5,0,a+o/2,n/2+h,.5,1,c);const _=x.Matrix[0];return r.multiplyToRef(e,_),_.multiplyToRef(c,_),u.TransformCoordinatesToRef(t,_,i),i}static Reflect(t,r){return this.ReflectToRef(t,r,new u)}static ReflectToRef(t,r,e){const s=f.Vector3[0];return s.copyFrom(r).scaleInPlace(2*u.Dot(t,r)),e.copyFrom(t).subtractInPlace(s)}static _UnprojectFromInvertedMatrixToRef(t,r,e){u.TransformCoordinatesToRef(t,r,e);const s=r.m,i=t._x*s[3]+t._y*s[7]+t._z*s[11]+s[15];return(0,h.Mj)(i,1)&&e.scaleInPlace(1/i),e}static UnprojectFromTransform(t,r,e,s,i){return this.Unproject(t,r,e,s,i,m.IdentityReadOnly)}static Unproject(t,r,e,s,i,o){const n=new t.constructor;return u.UnprojectToRef(t,r,e,s,i,o,n),n}static UnprojectToRef(t,r,e,s,i,o,n){return u.UnprojectFloatsToRef(t._x,t._y,t._z,r,e,s,i,o,n),n}static UnprojectFloatsToRef(t,r,e,s,i,o,n,h,c){const _=x.Matrix[0];o.multiplyToRef(n,_),_.multiplyToRef(h,_),_.invert();const y=x.Vector3[0];return y.x=t/s*2-1,y.y=-(r/i*2-1),a.q.LastCreatedEngine?.isNDCHalfZRange?y.z=e:y.z=2*e-1,u._UnprojectFromInvertedMatrixToRef(y,_,c),c}static Minimize(t,r){const e=new t.constructor;return e.copyFrom(t),e.minimizeInPlace(r),e}static Maximize(t,r){const e=new t.constructor;return e.copyFrom(t),e.maximizeInPlace(r),e}static Distance(t,r){return Math.sqrt(u.DistanceSquared(t,r))}static DistanceSquared(t,r){const e=t._x-r._x,s=t._y-r._y,i=t._z-r._z;return e*e+s*s+i*i}static ProjectOnTriangleToRef(t,r,e,i,o){const n=x.Vector3[0],a=x.Vector3[1],c=x.Vector3[2],_=x.Vector3[3],y=x.Vector3[4];e.subtractToRef(r,n),i.subtractToRef(r,a),i.subtractToRef(e,c);const l=n.length(),m=a.length(),f=c.length();if(l<s.bH||m<s.bH||f<s.bH)return o.copyFrom(r),u.Distance(t,r);t.subtractToRef(r,y),u.CrossToRef(n,a,_);const R=_.length();if(R<s.bH)return o.copyFrom(r),u.Distance(t,r);_.normalizeFromLength(R);let d=y.length();if(d<s.bH)return o.copyFrom(r),0;y.normalizeFromLength(d);const z=u.Dot(_,y),T=x.Vector3[5],w=x.Vector3[6];T.copyFrom(_).scaleInPlace(-d*z),w.copyFrom(t).addInPlace(T);const F=x.Vector3[4],p=x.Vector3[5],M=x.Vector3[7],I=x.Vector3[8];F.copyFrom(n).scaleInPlace(1/l),I.copyFrom(a).scaleInPlace(1/m),F.addInPlace(I).scaleInPlace(-1),p.copyFrom(n).scaleInPlace(-1/l),I.copyFrom(c).scaleInPlace(1/f),p.addInPlace(I).scaleInPlace(-1),M.copyFrom(c).scaleInPlace(-1/f),I.copyFrom(a).scaleInPlace(-1/m),M.addInPlace(I).scaleInPlace(-1);const D=x.Vector3[9];let g;D.copyFrom(w).subtractInPlace(r),u.CrossToRef(F,D,I),g=u.Dot(I,_);const P=g;D.copyFrom(w).subtractInPlace(e),u.CrossToRef(p,D,I),g=u.Dot(I,_);const A=g;D.copyFrom(w).subtractInPlace(i),u.CrossToRef(M,D,I),g=u.Dot(I,_);const V=g,C=x.Vector3[10];let O,k;P>0&&A<0?(C.copyFrom(n),O=r,k=e):A>0&&V<0?(C.copyFrom(c),O=e,k=i):(C.copyFrom(a).scaleInPlace(-1),O=i,k=r);const H=x.Vector3[9],L=x.Vector3[4];O.subtractToRef(w,I),k.subtractToRef(w,H),u.CrossToRef(I,H,L);if(!(u.Dot(L,_)<0))return o.copyFrom(w),Math.abs(d*z);const b=x.Vector3[5];u.CrossToRef(C,L,b),b.normalize();const v=x.Vector3[9];v.copyFrom(O).subtractInPlace(w);const U=v.length();if(U<s.bH)return o.copyFrom(O),u.Distance(t,O);v.normalizeFromLength(U);const q=u.Dot(b,v),S=x.Vector3[7];S.copyFrom(w).addInPlace(b.scaleInPlace(U*q)),I.copyFrom(S).subtractInPlace(O),d=C.length(),C.normalizeFromLength(d);let B=u.Dot(I,C)/Math.max(d,s.bH);return B=(0,h.OQ)(B,0,1),S.copyFrom(O).addInPlace(C.scaleInPlace(B*d)),o.copyFrom(S),u.Distance(t,S)}static Center(t,r){return u.CenterToRef(t,r,u.Zero())}static CenterToRef(t,r,e){return e.copyFromFloats((t._x+r._x)/2,(t._y+r._y)/2,(t._z+r._z)/2)}static RotationFromAxis(t,r,e){const s=new t.constructor;return u.RotationFromAxisToRef(t,r,e,s),s}static RotationFromAxisToRef(t,r,e,s){const i=x.Quaternion[0];return l.RotationQuaternionFromAxisToRef(t,r,e,i),i.toEulerAnglesToRef(s),s}}u._UpReadOnly=u.Up(),u._DownReadOnly=u.Down(),u._LeftHandedForwardReadOnly=u.Forward(!1),u._RightHandedForwardReadOnly=u.Forward(!0),u._LeftHandedBackwardReadOnly=u.Backward(!1),u._RightHandedBackwardReadOnly=u.Backward(!0),u._RightReadOnly=u.Right(),u._LeftReadOnly=u.Left(),u._ZeroReadOnly=u.Zero(),u._OneReadOnly=u.One(),Object.defineProperties(u.prototype,{dimension:{value:[3]},rank:{value:1}});class y{constructor(t=0,r=0,e=0,s=0){this.x=t,this.y=r,this.z=e,this.w=s}toString(){return`{X: ${this.x} Y: ${this.y} Z: ${this.z} W: ${this.w}}`}getClassName(){return"Vector4"}getHashCode(){let t=c(this.x);return t=397*t^c(this.y),t=397*t^c(this.z),t=397*t^c(this.w),t}asArray(){return[this.x,this.y,this.z,this.w]}toArray(t,r){return void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,this}fromArray(t,r=0){return y.FromArrayToRef(t,r,this),this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addInPlaceFromFloats(t,r,e,s){return this.x+=t,this.y+=r,this.z+=e,this.w+=s,this}add(t){return new this.constructor(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addToRef(t,r){return r.x=this.x+t.x,r.y=this.y+t.y,r.z=this.z+t.z,r.w=this.w+t.w,r}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}subtractToRef(t,r){return r.x=this.x-t.x,r.y=this.y-t.y,r.z=this.z-t.z,r.w=this.w-t.w,r}subtractFromFloats(t,r,e,s){return new this.constructor(this.x-t,this.y-r,this.z-e,this.w-s)}subtractFromFloatsToRef(t,r,e,s,i){return i.x=this.x-t,i.y=this.y-r,i.z=this.z-e,i.w=this.w-s,i}negate(){return new this.constructor(-this.x,-this.y,-this.z,-this.w)}negateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new this.constructor(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,r){return r.x=this.x*t,r.y=this.y*t,r.z=this.z*t,r.w=this.w*t,r}scaleAndAddToRef(t,r){return r.x+=this.x*t,r.y+=this.y*t,r.z+=this.z*t,r.w+=this.w*t,r}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}equalsWithEpsilon(t,r=s.bH){return t&&(0,h.Mj)(this.x,t.x,r)&&(0,h.Mj)(this.y,t.y,r)&&(0,h.Mj)(this.z,t.z,r)&&(0,h.Mj)(this.w,t.w,r)}equalsToFloats(t,r,e,s){return this.x===t&&this.y===r&&this.z===e&&this.w===s}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new this.constructor(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}multiplyToRef(t,r){return r.x=this.x*t.x,r.y=this.y*t.y,r.z=this.z*t.z,r.w=this.w*t.w,r}multiplyByFloats(t,r,e,s){return new this.constructor(this.x*t,this.y*r,this.z*e,this.w*s)}divide(t){return new this.constructor(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}divideToRef(t,r){return r.x=this.x/t.x,r.y=this.y/t.y,r.z=this.z/t.z,r.w=this.w/t.w,r}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}minimizeInPlaceFromFloats(t,r,e,s){return this.x=Math.min(t,this.x),this.y=Math.min(r,this.y),this.z=Math.min(e,this.z),this.w=Math.min(s,this.w),this}maximizeInPlaceFromFloats(t,r,e,s){return this.x=Math.max(t,this.x),this.y=Math.max(r,this.y),this.z=Math.max(e,this.z),this.w=Math.max(s,this.w),this}floorToRef(t){return t.x=Math.floor(this.x),t.y=Math.floor(this.y),t.z=Math.floor(this.z),t.w=Math.floor(this.w),t}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fractToRef(t){return t.x=this.x-Math.floor(this.x),t.y=this.y-Math.floor(this.y),t.z=this.z-Math.floor(this.z),t.w=this.w-Math.floor(this.w),t}fract(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new this.constructor;return this.normalizeToRef(t),t}normalizeToRef(t){const r=this.length();return 0===r||1===r?t.copyFrom(this):this.scaleToRef(1/r,t)}toVector3(){return new u(this.x,this.y,this.z)}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,r,e,s){return this.x=t,this.y=r,this.z=e,this.w=s,this}set(t,r,e,s){return this.copyFromFloats(t,r,e,s)}setAll(t){return this.x=this.y=this.z=this.w=t,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}static FromArray(t,r){return r||(r=0),new y(t[r],t[r+1],t[r+2],t[r+3])}static FromArrayToRef(t,r,e){return e.x=t[r],e.y=t[r+1],e.z=t[r+2],e.w=t[r+3],e}static FromFloatArrayToRef(t,r,e){return y.FromArrayToRef(t,r,e),e}static FromFloatsToRef(t,r,e,s,i){return i.x=t,i.y=r,i.z=e,i.w=s,i}static Zero(){return new y(0,0,0,0)}static One(){return new y(1,1,1,1)}static Random(t=0,r=1){return new y((0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r))}static RandomToRef(t=0,r=1,e){return e.copyFromFloats((0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r))}static Clamp(t,r,e){const s=new t.constructor;return y.ClampToRef(t,r,e,s),s}static ClampToRef(t,r,e,s){return s.copyFromFloats((0,h.OQ)(t.x,r.x,e.x),(0,h.OQ)(t.y,r.y,e.y),(0,h.OQ)(t.z,r.z,e.z),(0,h.OQ)(t.w,r.w,e.w))}static CheckExtends(t,r,e){r.minimizeInPlace(t),e.maximizeInPlace(t)}static get ZeroReadOnly(){return y._ZeroReadOnly}static Normalize(t){const r=y.Zero();return y.NormalizeToRef(t,r),r}static NormalizeToRef(t,r){return t.normalizeToRef(r),r}static Minimize(t,r){const e=new t.constructor;return e.copyFrom(t),e.minimizeInPlace(r),e}static Maximize(t,r){const e=new t.constructor;return e.copyFrom(t),e.maximizeInPlace(r),e}static Distance(t,r){return Math.sqrt(y.DistanceSquared(t,r))}static DistanceSquared(t,r){const e=t.x-r.x,s=t.y-r.y,i=t.z-r.z,o=t.w-r.w;return e*e+s*s+i*i+o*o}static Center(t,r){return y.CenterToRef(t,r,y.Zero())}static CenterToRef(t,r,e){return e.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2,(t.z+r.z)/2,(t.w+r.w)/2)}static TransformCoordinates(t,r){const e=y.Zero();return y.TransformCoordinatesToRef(t,r,e),e}static TransformCoordinatesToRef(t,r,e){return y.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,r,e),e}static TransformCoordinatesFromFloatsToRef(t,r,e,s,i){const o=s.m,n=t*o[0]+r*o[4]+e*o[8]+o[12],a=t*o[1]+r*o[5]+e*o[9]+o[13],h=t*o[2]+r*o[6]+e*o[10]+o[14],c=t*o[3]+r*o[7]+e*o[11]+o[15];return i.x=n,i.y=a,i.z=h,i.w=c,i}static TransformNormal(t,r){const e=new t.constructor;return y.TransformNormalToRef(t,r,e),e}static TransformNormalToRef(t,r,e){const s=r.m,i=t.x*s[0]+t.y*s[4]+t.z*s[8],o=t.x*s[1]+t.y*s[5]+t.z*s[9],n=t.x*s[2]+t.y*s[6]+t.z*s[10];return e.x=i,e.y=o,e.z=n,e.w=t.w,e}static TransformNormalFromFloatsToRef(t,r,e,s,i,o){const n=i.m;return o.x=t*n[0]+r*n[4]+e*n[8],o.y=t*n[1]+r*n[5]+e*n[9],o.z=t*n[2]+r*n[6]+e*n[10],o.w=s,o}static FromVector3(t,r=0){return new y(t._x,t._y,t._z,r)}static Dot(t,r){return t.dot(r)}}y._ZeroReadOnly=y.Zero(),Object.defineProperties(y.prototype,{dimension:{value:[4]},rank:{value:1}});class l{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}get w(){return this._w}set w(t){this._w=t,this._isDirty=!0}constructor(t=0,r=0,e=0,s=1){this._isDirty=!0,this._x=t,this._y=r,this._z=e,this._w=s}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z} W: ${this._w}}`}getClassName(){return"Quaternion"}getHashCode(){let t=c(this._x);return t=397*t^c(this._y),t=397*t^c(this._z),t=397*t^c(this._w),t}asArray(){return[this._x,this._y,this._z,this._w]}toArray(t,r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,this}fromArray(t,r=0){return l.FromArrayToRef(t,r,this)}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}equalsWithEpsilon(t,r=s.bH){return t&&(0,h.Mj)(this._x,t._x,r)&&(0,h.Mj)(this._y,t._y,r)&&(0,h.Mj)(this._z,t._z,r)&&(0,h.Mj)(this._w,t._w,r)}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copyFrom(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this._isDirty=!0,this}copyFromFloats(t,r,e,s){return this._x=t,this._y=r,this._z=e,this._w=s,this._isDirty=!0,this}set(t,r,e,s){return this.copyFromFloats(t,r,e,s)}setAll(t){return this.copyFromFloats(t,t,t,t)}add(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)}addInPlace(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this._isDirty=!0,this}addToRef(t,r){return r._x=this._x+t._x,r._y=this._y+t._y,r._z=this._z+t._z,r._w=this._w+t._w,r._isDirty=!0,r}addInPlaceFromFloats(t,r,e,s){return this._x+=t,this._y+=r,this._z+=e,this._w+=s,this._isDirty=!0,this}subtractToRef(t,r){return r._x=this._x-t._x,r._y=this._y-t._y,r._z=this._z-t._z,r._w=this._w-t._w,r._isDirty=!0,r}subtractFromFloats(t,r,e,s){return this.subtractFromFloatsToRef(t,r,e,s,new this.constructor)}subtractFromFloatsToRef(t,r,e,s,i){return i._x=this._x-t,i._y=this._y-r,i._z=this._z-e,i._w=this._w-s,i._isDirty=!0,i}subtract(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this._isDirty=!0,this}scale(t){return new this.constructor(this._x*t,this._y*t,this._z*t,this._w*t)}scaleToRef(t,r){return r._x=this._x*t,r._y=this._y*t,r._z=this._z*t,r._w=this._w*t,r._isDirty=!0,r}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this._isDirty=!0,this}scaleAndAddToRef(t,r){return r._x+=this._x*t,r._y+=this._y*t,r._z+=this._z*t,r._w+=this._w*t,r._isDirty=!0,r}multiply(t){const r=new this.constructor(0,0,0,1);return this.multiplyToRef(t,r),r}multiplyToRef(t,r){const e=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,s=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,i=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,o=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return r.copyFromFloats(e,s,i,o),r}multiplyInPlace(t){return this.multiplyToRef(t,this)}multiplyByFloats(t,r,e,s){return this._x*=t,this._y*=r,this._z*=e,this._w*=s,this._isDirty=!0,this}divide(t){throw new ReferenceError("Can not divide a quaternion")}divideToRef(t,r){throw new ReferenceError("Can not divide a quaternion")}divideInPlace(t){throw new ReferenceError("Can not divide a quaternion")}minimizeInPlace(){throw new ReferenceError("Can not minimize a quaternion")}minimizeInPlaceFromFloats(){throw new ReferenceError("Can not minimize a quaternion")}maximizeInPlace(){throw new ReferenceError("Can not maximize a quaternion")}maximizeInPlaceFromFloats(){throw new ReferenceError("Can not maximize a quaternion")}negate(){return this.negateToRef(new this.constructor)}negateInPlace(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this._w=-this._w,this._isDirty=!0,this}negateToRef(t){return t._x=-this._x,t._y=-this._y,t._z=-this._z,t._w=-this._w,t._isDirty=!0,t}equalsToFloats(t,r,e,s){return this._x===t&&this._y===r&&this._z===e&&this._w===s}floorToRef(t){throw new ReferenceError("Can not floor a quaternion")}floor(){throw new ReferenceError("Can not floor a quaternion")}fractToRef(t){throw new ReferenceError("Can not fract a quaternion")}fract(){throw new ReferenceError("Can not fract a quaternion")}conjugateToRef(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),t}conjugateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}conjugate(){return new this.constructor(-this._x,-this._y,-this._z,this._w)}invert(){const t=this.conjugate(),r=this.lengthSquared();return 0==r||1==r||t.scaleInPlace(1/r),t}invertInPlace(){this.conjugateInPlace();const t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this.lengthSquared())}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new this.constructor(0,0,0,1);return this.normalizeToRef(t),t}normalizeToRef(t){const r=this.length();return 0===r||1===r?t.copyFromFloats(this._x,this._y,this._z,this._w):this.scaleToRef(1/r,t)}toEulerAngles(){const t=u.Zero();return this.toEulerAnglesToRef(t),t}toEulerAnglesToRef(t){const r=this._z,e=this._x,s=this._y,i=this._w,o=s*r-e*i,n=.4999999;if(o<-n)t._y=2*Math.atan2(s,i),t._x=Math.PI/2,t._z=0,t._isDirty=!0;else if(o>n)t._y=2*Math.atan2(s,i),t._x=-Math.PI/2,t._z=0,t._isDirty=!0;else{const n=i*i,a=r*r,h=e*e,c=s*s;t._z=Math.atan2(2*(e*s+r*i),-a-h+c+n),t._x=Math.asin(-2*o),t._y=Math.atan2(2*(r*e+s*i),a-h-c+n),t._isDirty=!0}return t}toRotationMatrix(t){return m.FromQuaternionToRef(this,t),t}fromRotationMatrix(t){return l.FromRotationMatrixToRef(t,this),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}static FromRotationMatrix(t){const r=new l;return l.FromRotationMatrixToRef(t,r),r}static FromRotationMatrixToRef(t,r){const e=t.m,s=e[0],i=e[4],o=e[8],n=e[1],a=e[5],h=e[9],c=e[2],_=e[6],u=e[10],y=s+a+u;let l;return y>0?(l=.5/Math.sqrt(y+1),r._w=.25/l,r._x=(_-h)*l,r._y=(o-c)*l,r._z=(n-i)*l,r._isDirty=!0):s>a&&s>u?(l=2*Math.sqrt(1+s-a-u),r._w=(_-h)/l,r._x=.25*l,r._y=(i+n)/l,r._z=(o+c)/l,r._isDirty=!0):a>u?(l=2*Math.sqrt(1+a-s-u),r._w=(o-c)/l,r._x=(i+n)/l,r._y=.25*l,r._z=(h+_)/l,r._isDirty=!0):(l=2*Math.sqrt(1+u-s-a),r._w=(n-i)/l,r._x=(o+c)/l,r._y=(h+_)/l,r._z=.25*l,r._isDirty=!0),r}static Dot(t,r){return t._x*r._x+t._y*r._y+t._z*r._z+t._w*r._w}static AreClose(t,r,e=.1){const s=l.Dot(t,r);return 1-s*s<=e}static SmoothToRef(t,r,e,s,i){let o=0===s?1:e/s;return o=(0,h.OQ)(o,0,1),l.SlerpToRef(t,r,o,i),i}static Zero(){return new l(0,0,0,0)}static Inverse(t){return new t.constructor(-t._x,-t._y,-t._z,t._w)}static InverseToRef(t,r){return r.set(-t._x,-t._y,-t._z,t._w),r}static Identity(){return new l(0,0,0,1)}static IsIdentity(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}static RotationAxis(t,r){return l.RotationAxisToRef(t,r,new l)}static RotationAxisToRef(t,r,e){const s=Math.sin(r/2);return t.normalize(),e._w=Math.cos(r/2),e._x=t._x*s,e._y=t._y*s,e._z=t._z*s,e._isDirty=!0,e}static FromArray(t,r){return r||(r=0),new l(t[r],t[r+1],t[r+2],t[r+3])}static FromArrayToRef(t,r,e){return e._x=t[r],e._y=t[r+1],e._z=t[r+2],e._w=t[r+3],e._isDirty=!0,e}static FromFloatsToRef(t,r,e,s,i){return i.copyFromFloats(t,r,e,s),i}static FromEulerAngles(t,r,e){const s=new l;return l.RotationYawPitchRollToRef(r,t,e,s),s}static FromEulerAnglesToRef(t,r,e,s){return l.RotationYawPitchRollToRef(r,t,e,s),s}static FromEulerVector(t){const r=new l;return l.RotationYawPitchRollToRef(t._y,t._x,t._z,r),r}static FromEulerVectorToRef(t,r){return l.RotationYawPitchRollToRef(t._y,t._x,t._z,r),r}static FromUnitVectorsToRef(t,r,e,i=s.bH){const o=u.Dot(t,r)+1;return o<i?Math.abs(t.x)>Math.abs(t.z)?e.set(-t.y,t.x,0,0):e.set(0,-t.z,t.y,0):(u.CrossToRef(t,r,f.Vector3[0]),e.set(f.Vector3[0].x,f.Vector3[0].y,f.Vector3[0].z,o)),e.normalize()}static RotationYawPitchRoll(t,r,e){const s=new l;return l.RotationYawPitchRollToRef(t,r,e,s),s}static RotationYawPitchRollToRef(t,r,e,s){const i=.5*e,o=.5*r,n=.5*t,a=Math.sin(i),h=Math.cos(i),c=Math.sin(o),_=Math.cos(o),u=Math.sin(n),y=Math.cos(n);return s._x=y*c*h+u*_*a,s._y=u*_*h-y*c*a,s._z=y*_*a-u*c*h,s._w=y*_*h+u*c*a,s._isDirty=!0,s}static RotationAlphaBetaGamma(t,r,e){const s=new l;return l.RotationAlphaBetaGammaToRef(t,r,e,s),s}static RotationAlphaBetaGammaToRef(t,r,e,s){const i=.5*(e+t),o=.5*(e-t),n=.5*r;return s._x=Math.cos(o)*Math.sin(n),s._y=Math.sin(o)*Math.sin(n),s._z=Math.sin(i)*Math.cos(n),s._w=Math.cos(i)*Math.cos(n),s._isDirty=!0,s}static RotationQuaternionFromAxis(t,r,e){const s=new l(0,0,0,0);return l.RotationQuaternionFromAxisToRef(t,r,e,s),s}static RotationQuaternionFromAxisToRef(t,r,e,s){const i=x.Matrix[0];return m.FromXYZAxesToRef(t.normalize(),r.normalize(),e.normalize(),i),l.FromRotationMatrixToRef(i,s),s}static FromLookDirectionLH(t,r){const e=new l;return l.FromLookDirectionLHToRef(t,r,e),e}static FromLookDirectionLHToRef(t,r,e){const s=x.Matrix[0];return m.LookDirectionLHToRef(t,r,s),l.FromRotationMatrixToRef(s,e),e}static FromLookDirectionRH(t,r){const e=new l;return l.FromLookDirectionRHToRef(t,r,e),e}static FromLookDirectionRHToRef(t,r,e){const s=x.Matrix[0];return m.LookDirectionRHToRef(t,r,s),l.FromRotationMatrixToRef(s,e)}static Slerp(t,r,e){const s=l.Identity();return l.SlerpToRef(t,r,e,s),s}static SlerpToRef(t,r,e,s){let i,o,n=t._x*r._x+t._y*r._y+t._z*r._z+t._w*r._w,a=!1;if(n<0&&(a=!0,n=-n),n>.999999)o=1-e,i=a?-e:e;else{const t=Math.acos(n),r=1/Math.sin(t);o=Math.sin((1-e)*t)*r,i=a?-Math.sin(e*t)*r:Math.sin(e*t)*r}return s._x=o*t._x+i*r._x,s._y=o*t._y+i*r._y,s._z=o*t._z+i*r._z,s._w=o*t._w+i*r._w,s._isDirty=!0,s}static Hermite(t,r,e,s,i){const o=i*i,n=i*o,a=2*n-3*o+1,h=-2*n+3*o,c=n-2*o+i,_=n-o,u=t._x*a+e._x*h+r._x*c+s._x*_,y=t._y*a+e._y*h+r._y*c+s._y*_,l=t._z*a+e._z*h+r._z*c+s._z*_,m=t._w*a+e._w*h+r._w*c+s._w*_;return new t.constructor(u,y,l,m)}static Hermite1stDerivative(t,r,e,s,i){const o=new t.constructor;return this.Hermite1stDerivativeToRef(t,r,e,s,i,o),o}static Hermite1stDerivativeToRef(t,r,e,s,i,o){const n=i*i;return o._x=6*(n-i)*t._x+(3*n-4*i+1)*r._x+6*(-n+i)*e._x+(3*n-2*i)*s._x,o._y=6*(n-i)*t._y+(3*n-4*i+1)*r._y+6*(-n+i)*e._y+(3*n-2*i)*s._y,o._z=6*(n-i)*t._z+(3*n-4*i+1)*r._z+6*(-n+i)*e._z+(3*n-2*i)*s._z,o._w=6*(n-i)*t._w+(3*n-4*i+1)*r._w+6*(-n+i)*e._w+(3*n-2*i)*s._w,o._isDirty=!0,o}static Normalize(t){const r=l.Zero();return l.NormalizeToRef(t,r),r}static NormalizeToRef(t,r){return t.normalizeToRef(r),r}static Clamp(t,r,e){const s=new t.constructor;return l.ClampToRef(t,r,e,s),s}static ClampToRef(t,r,e,s){return s.copyFromFloats((0,h.OQ)(t.x,r.x,e.x),(0,h.OQ)(t.y,r.y,e.y),(0,h.OQ)(t.z,r.z,e.z),(0,h.OQ)(t.w,r.w,e.w))}static Random(t=0,r=1){return new l((0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r))}static RandomToRef(t=0,r=1,e){return e.copyFromFloats((0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r),(0,h.VD)(t,r))}static Minimize(){throw new ReferenceError("Quaternion.Minimize does not make sense")}static Maximize(){throw new ReferenceError("Quaternion.Maximize does not make sense")}static Distance(t,r){return Math.sqrt(l.DistanceSquared(t,r))}static DistanceSquared(t,r){const e=t.x-r.x,s=t.y-r.y,i=t.z-r.z,o=t.w-r.w;return e*e+s*s+i*i+o*o}static Center(t,r){return l.CenterToRef(t,r,l.Zero())}static CenterToRef(t,r,e){return e.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2,(t.z+r.z)/2,(t.w+r.w)/2)}}Object.defineProperties(l.prototype,{dimension:{value:[4]},rank:{value:1}});class m{static get Use64Bits(){return n.I.MatrixUse64Bits}get m(){return this._m}markAsUpdated(){this.updateFlag=m._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}_updateIdentityStatus(t,r=!1,e=!1,s=!0){this._isIdentity=t,this._isIdentity3x2=t||e,this._isIdentityDirty=!this._isIdentity&&r,this._isIdentity3x2Dirty=!this._isIdentity3x2&&s}constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,n.I.MatrixTrackPrecisionChange&&n.I.MatrixTrackedMatrices.push(this),this._m=new n.I.MatrixCurrentType(16),this.markAsUpdated()}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const t=this._m,r=t[0],e=t[1],s=t[2],i=t[3],o=t[4],n=t[5],a=t[6],h=t[7],c=t[8],_=t[9],u=t[10],y=t[11],l=t[12],m=t[13],x=t[14],f=t[15],R=u*f-x*y,d=_*f-m*y,z=_*x-m*u,T=c*f-l*y,w=c*x-u*l,F=c*m-l*_;return r*+(n*R-a*d+h*z)+e*-(o*R-a*T+h*w)+s*+(o*d-n*T+h*F)+i*-(o*z-n*w+a*F)}toString(){return`{${this.m[0]}, ${this.m[1]}, ${this.m[2]}, ${this.m[3]}\n${this.m[4]}, ${this.m[5]}, ${this.m[6]}, ${this.m[7]}\n${this.m[8]}, ${this.m[9]}, ${this.m[10]}, ${this.m[11]}\n${this.m[12]}, ${this.m[13]}, ${this.m[14]}, ${this.m[15]}}`}toArray(t=null,r=0){if(!t)return this._m;const e=this._m;for(let s=0;s<16;s++)t[r+s]=e[s];return this}asArray(){return this._m}fromArray(t,r=0){return m.FromArrayToRef(t,r,this)}copyFromFloats(...t){return m.FromArrayToRef(t,0,this)}set(...t){const r=this._m;for(let e=0;e<16;e++)r[e]=t[e];return this.markAsUpdated(),this}setAll(t){const r=this._m;for(let e=0;e<16;e++)r[e]=t;return this.markAsUpdated(),this}invert(){return this.invertToRef(this),this}reset(){return m.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){const r=new this.constructor;return this.addToRef(t,r),r}addToRef(t,r){const e=this._m,s=r._m,i=t.m;for(let o=0;o<16;o++)s[o]=e[o]+i[o];return r.markAsUpdated(),r}addToSelf(t){const r=this._m,e=t.m;for(let s=0;s<16;s++)r[s]+=e[s];return this.markAsUpdated(),this}addInPlace(t){const r=this._m,e=t.m;for(let s=0;s<16;s++)r[s]+=e[s];return this.markAsUpdated(),this}addInPlaceFromFloats(...t){const r=this._m;for(let e=0;e<16;e++)r[e]+=t[e];return this.markAsUpdated(),this}subtract(t){const r=this._m,e=t.m;for(let s=0;s<16;s++)r[s]-=e[s];return this.markAsUpdated(),this}subtractToRef(t,r){const e=this._m,s=t.m,i=r._m;for(let o=0;o<16;o++)i[o]=e[o]-s[o];return r.markAsUpdated(),r}subtractInPlace(t){const r=this._m,e=t.m;for(let s=0;s<16;s++)r[s]-=e[s];return this.markAsUpdated(),this}subtractFromFloats(...t){return this.subtractFromFloatsToRef(...t,new this.constructor)}subtractFromFloatsToRef(...t){const r=t.pop(),e=this._m,s=r._m,i=t;for(let o=0;o<16;o++)s[o]=e[o]-i[o];return r.markAsUpdated(),r}invertToRef(t){if(!0===this._isIdentity)return m.IdentityToRef(t),t;const r=this._m,e=r[0],s=r[1],i=r[2],o=r[3],n=r[4],a=r[5],h=r[6],c=r[7],_=r[8],u=r[9],y=r[10],l=r[11],x=r[12],f=r[13],R=r[14],d=r[15],z=y*d-R*l,T=u*d-f*l,w=u*R-f*y,F=_*d-x*l,p=_*R-y*x,M=_*f-x*u,I=+(a*z-h*T+c*w),D=-(n*z-h*F+c*p),g=+(n*T-a*F+c*M),P=-(n*w-a*p+h*M),A=e*I+s*D+i*g+o*P;if(0===A)return t.copyFrom(this),t;const V=1/A,C=h*d-R*c,O=a*d-f*c,k=a*R-f*h,H=n*d-x*c,L=n*R-x*h,b=n*f-x*a,v=h*l-y*c,U=a*l-u*c,q=a*y-u*h,S=n*l-_*c,B=n*y-_*h,j=n*u-_*a,Q=-(s*z-i*T+o*w),N=+(e*z-i*F+o*p),Z=-(e*T-s*F+o*M),Y=+(e*w-s*p+i*M),E=+(s*C-i*O+o*k),$=-(e*C-i*H+o*L),G=+(e*O-s*H+o*b),W=-(e*k-s*L+i*b),X=-(s*v-i*U+o*q),J=+(e*v-i*S+o*B),K=-(e*U-s*S+o*j),tt=+(e*q-s*B+i*j);return m.FromValuesToRef(I*V,Q*V,E*V,X*V,D*V,N*V,$*V,J*V,g*V,Z*V,G*V,K*V,P*V,Y*V,W*V,tt*V,t),t}addAtIndex(t,r){return this._m[t]+=r,this.markAsUpdated(),this}multiplyAtIndex(t,r){return this._m[t]*=r,this.markAsUpdated(),this}setTranslationFromFloats(t,r,e){return this._m[12]=t,this._m[13]=r,this._m[14]=e,this.markAsUpdated(),this}addTranslationFromFloats(t,r,e){return this._m[12]+=t,this._m[13]+=r,this._m[14]+=e,this.markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}getTranslation(){return new u(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],t}removeRotationAndScaling(){const t=this.m;return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}copyFrom(t){t.copyToArray(this._m);const r=t;return this.updateFlag=r.updateFlag,this._updateIdentityStatus(r._isIdentity,r._isIdentityDirty,r._isIdentity3x2,r._isIdentity3x2Dirty),this}copyToArray(t,r=0){const e=this._m;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],t[r+9]=e[9],t[r+10]=e[10],t[r+11]=e[11],t[r+12]=e[12],t[r+13]=e[13],t[r+14]=e[14],t[r+15]=e[15],this}multiply(t){const r=new this.constructor;return this.multiplyToRef(t,r),r}multiplyInPlace(t){const r=this._m,e=t.m;for(let s=0;s<16;s++)r[s]*=e[s];return this.markAsUpdated(),this}multiplyByFloats(...t){const r=this._m;for(let e=0;e<16;e++)r[e]=t[e];return this.markAsUpdated(),this}multiplyByFloatsToRef(...t){const r=t.pop(),e=this._m,s=r._m,i=t;for(let o=0;o<16;o++)s[o]=e[o]*i[o];return r.markAsUpdated(),r}multiplyToRef(t,r){return this._isIdentity?(r.copyFrom(t),r):t._isIdentity?(r.copyFrom(this),r):(this.multiplyToArray(t,r._m,0),r.markAsUpdated(),r)}multiplyToArray(t,r,e){const s=this._m,i=t.m,o=s[0],n=s[1],a=s[2],h=s[3],c=s[4],_=s[5],u=s[6],y=s[7],l=s[8],m=s[9],x=s[10],f=s[11],R=s[12],d=s[13],z=s[14],T=s[15],w=i[0],F=i[1],p=i[2],M=i[3],I=i[4],D=i[5],g=i[6],P=i[7],A=i[8],V=i[9],C=i[10],O=i[11],k=i[12],H=i[13],L=i[14],b=i[15];return r[e]=o*w+n*I+a*A+h*k,r[e+1]=o*F+n*D+a*V+h*H,r[e+2]=o*p+n*g+a*C+h*L,r[e+3]=o*M+n*P+a*O+h*b,r[e+4]=c*w+_*I+u*A+y*k,r[e+5]=c*F+_*D+u*V+y*H,r[e+6]=c*p+_*g+u*C+y*L,r[e+7]=c*M+_*P+u*O+y*b,r[e+8]=l*w+m*I+x*A+f*k,r[e+9]=l*F+m*D+x*V+f*H,r[e+10]=l*p+m*g+x*C+f*L,r[e+11]=l*M+m*P+x*O+f*b,r[e+12]=R*w+d*I+z*A+T*k,r[e+13]=R*F+d*D+z*V+T*H,r[e+14]=R*p+d*g+z*C+T*L,r[e+15]=R*M+d*P+z*O+T*b,this}divide(t){return this.divideToRef(t,new this.constructor)}divideToRef(t,r){const e=this._m,s=t.m,i=r._m;for(let o=0;o<16;o++)i[o]=e[o]/s[o];return r.markAsUpdated(),r}divideInPlace(t){const r=this._m,e=t.m;for(let s=0;s<16;s++)r[s]/=e[s];return this.markAsUpdated(),this}minimizeInPlace(t){const r=this._m,e=t.m;for(let s=0;s<16;s++)r[s]=Math.min(r[s],e[s]);return this.markAsUpdated(),this}minimizeInPlaceFromFloats(...t){const r=this._m;for(let e=0;e<16;e++)r[e]=Math.min(r[e],t[e]);return this.markAsUpdated(),this}maximizeInPlace(t){const r=this._m,e=t.m;for(let s=0;s<16;s++)r[s]=Math.min(r[s],e[s]);return this.markAsUpdated(),this}maximizeInPlaceFromFloats(...t){const r=this._m;for(let e=0;e<16;e++)r[e]=Math.min(r[e],t[e]);return this.markAsUpdated(),this}negate(){return this.negateToRef(new this.constructor)}negateInPlace(){const t=this._m;for(let r=0;r<16;r++)t[r]=-t[r];return this.markAsUpdated(),this}negateToRef(t){const r=this._m,e=t._m;for(let s=0;s<16;s++)e[s]=-r[s];return t.markAsUpdated(),t}equals(t){const r=t;if(!r)return!1;if((this._isIdentity||r._isIdentity)&&!this._isIdentityDirty&&!r._isIdentityDirty)return this._isIdentity&&r._isIdentity;const e=this.m,s=r.m;return e[0]===s[0]&&e[1]===s[1]&&e[2]===s[2]&&e[3]===s[3]&&e[4]===s[4]&&e[5]===s[5]&&e[6]===s[6]&&e[7]===s[7]&&e[8]===s[8]&&e[9]===s[9]&&e[10]===s[10]&&e[11]===s[11]&&e[12]===s[12]&&e[13]===s[13]&&e[14]===s[14]&&e[15]===s[15]}equalsWithEpsilon(t,r=0){const e=this._m,s=t.m;for(let i=0;i<16;i++)if(!(0,h.Mj)(e[i],s[i],r))return!1;return!0}equalsToFloats(...t){const r=this._m;for(let e=0;e<16;e++)if(r[e]!=t[e])return!1;return!0}floor(){return this.floorToRef(new this.constructor)}floorToRef(t){const r=this._m,e=t._m;for(let s=0;s<16;s++)e[s]=Math.floor(r[s]);return t.markAsUpdated(),t}fract(){return this.fractToRef(new this.constructor)}fractToRef(t){const r=this._m,e=t._m;for(let s=0;s<16;s++)e[s]=r[s]-Math.floor(r[s]);return t.markAsUpdated(),t}clone(){const t=new this.constructor;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=c(this._m[0]);for(let r=1;r<16;r++)t=397*t^c(this._m[r]);return t}decomposeToTransformNode(t){return t.rotationQuaternion=t.rotationQuaternion||new l,this.decompose(t.scaling,t.rotationQuaternion,t.position)}decompose(t,r,e,s,i=!0){if(this._isIdentity)return e&&e.setAll(0),t&&t.setAll(1),r&&r.copyFromFloats(0,0,0,1),!0;const o=this._m;if(e&&e.copyFromFloats(o[12],o[13],o[14]),(t=t||x.Vector3[0]).x=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]),t.y=Math.sqrt(o[4]*o[4]+o[5]*o[5]+o[6]*o[6]),t.z=Math.sqrt(o[8]*o[8]+o[9]*o[9]+o[10]*o[10]),s){const r=(i?s.absoluteScaling.x:s.scaling.x)<0?-1:1,e=(i?s.absoluteScaling.y:s.scaling.y)<0?-1:1,o=(i?s.absoluteScaling.z:s.scaling.z)<0?-1:1;t.x*=r,t.y*=e,t.z*=o}else this.determinant()<=0&&(t.y*=-1);if(0===t._x||0===t._y||0===t._z)return r&&r.copyFromFloats(0,0,0,1),!1;if(r){const e=1/t._x,s=1/t._y,i=1/t._z;m.FromValuesToRef(o[0]*e,o[1]*e,o[2]*e,0,o[4]*s,o[5]*s,o[6]*s,0,o[8]*i,o[9]*i,o[10]*i,0,0,0,0,1,x.Matrix[0]),l.FromRotationMatrixToRef(x.Matrix[0],r)}return!0}getRow(t){if(t<0||t>3)return null;const r=4*t;return new y(this._m[r+0],this._m[r+1],this._m[r+2],this._m[r+3])}getRowToRef(t,r){if(t>=0&&t<=3){const e=4*t;r.x=this._m[e+0],r.y=this._m[e+1],r.z=this._m[e+2],r.w=this._m[e+3]}return r}setRow(t,r){return this.setRowFromFloats(t,r.x,r.y,r.z,r.w)}transpose(){const t=new this.constructor;return m.TransposeToRef(this,t),t}transposeToRef(t){return m.TransposeToRef(this,t),t}setRowFromFloats(t,r,e,s,i){if(t<0||t>3)return this;const o=4*t;return this._m[o+0]=r,this._m[o+1]=e,this._m[o+2]=s,this._m[o+3]=i,this.markAsUpdated(),this}scale(t){const r=new this.constructor;return this.scaleToRef(t,r),r}scaleToRef(t,r){for(let e=0;e<16;e++)r._m[e]=this._m[e]*t;return r.markAsUpdated(),r}scaleAndAddToRef(t,r){for(let e=0;e<16;e++)r._m[e]+=this._m[e]*t;return r.markAsUpdated(),r}scaleInPlace(t){const r=this._m;for(let e=0;e<16;e++)r[e]*=t;return this.markAsUpdated(),this}toNormalMatrix(t){const r=x.Matrix[0];this.invertToRef(r),r.transposeToRef(t);const e=t._m;return m.FromValuesToRef(e[0],e[1],e[2],0,e[4],e[5],e[6],0,e[8],e[9],e[10],0,0,0,0,1,t),t}getRotationMatrix(){const t=new this.constructor;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){const r=x.Vector3[0];if(!this.decompose(r))return m.IdentityToRef(t),t;const e=this._m,s=1/r._x,i=1/r._y,o=1/r._z;return m.FromValuesToRef(e[0]*s,e[1]*s,e[2]*s,0,e[4]*i,e[5]*i,e[6]*i,0,e[8]*o,e[9]*o,e[10]*o,0,0,0,0,1,t),t}toggleModelMatrixHandInPlace(){const t=this._m;return t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated(),this}toggleProjectionMatrixHandInPlace(){const t=this._m;return t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated(),this}static FromArray(t,r=0){const e=new m;return m.FromArrayToRef(t,r,e),e}static FromArrayToRef(t,r,e){for(let s=0;s<16;s++)e._m[s]=t[s+r];return e.markAsUpdated(),e}static FromFloat32ArrayToRefScaled(t,r,e,s){for(let i=0;i<16;i++)s._m[i]=t[i+r]*e;return s.markAsUpdated(),s}static get IdentityReadOnly(){return m._IdentityReadOnly}static FromValuesToRef(t,r,e,s,i,o,n,a,h,c,_,u,y,l,m,x,f){const R=f._m;R[0]=t,R[1]=r,R[2]=e,R[3]=s,R[4]=i,R[5]=o,R[6]=n,R[7]=a,R[8]=h,R[9]=c,R[10]=_,R[11]=u,R[12]=y,R[13]=l,R[14]=m,R[15]=x,f.markAsUpdated()}static FromValues(t,r,e,s,i,o,n,a,h,c,_,u,y,l,x,f){const R=new m,d=R._m;return d[0]=t,d[1]=r,d[2]=e,d[3]=s,d[4]=i,d[5]=o,d[6]=n,d[7]=a,d[8]=h,d[9]=c,d[10]=_,d[11]=u,d[12]=y,d[13]=l,d[14]=x,d[15]=f,R.markAsUpdated(),R}static Compose(t,r,e){const s=new m;return m.ComposeToRef(t,r,e,s),s}static ComposeToRef(t,r,e,s){const i=s._m,o=r._x,n=r._y,a=r._z,h=r._w,c=o+o,_=n+n,u=a+a,y=o*c,l=o*_,m=o*u,x=n*_,f=n*u,R=a*u,d=h*c,z=h*_,T=h*u,w=t._x,F=t._y,p=t._z;return i[0]=(1-(x+R))*w,i[1]=(l+T)*w,i[2]=(m-z)*w,i[3]=0,i[4]=(l-T)*F,i[5]=(1-(y+R))*F,i[6]=(f+d)*F,i[7]=0,i[8]=(m+z)*p,i[9]=(f-d)*p,i[10]=(1-(y+x))*p,i[11]=0,i[12]=e._x,i[13]=e._y,i[14]=e._z,i[15]=1,s.markAsUpdated(),s}static Identity(){const t=m.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0),t}static Zero(){const t=m.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){const r=new m;return m.RotationXToRef(t,r),r}static Invert(t){const r=new t.constructor;return t.invertToRef(r),r}static RotationXToRef(t,r){const e=Math.sin(t),s=Math.cos(t);return m.FromValuesToRef(1,0,0,0,0,s,e,0,0,-e,s,0,0,0,0,1,r),r._updateIdentityStatus(1===s&&0===e),r}static RotationY(t){const r=new m;return m.RotationYToRef(t,r),r}static RotationYToRef(t,r){const e=Math.sin(t),s=Math.cos(t);return m.FromValuesToRef(s,0,-e,0,0,1,0,0,e,0,s,0,0,0,0,1,r),r._updateIdentityStatus(1===s&&0===e),r}static RotationZ(t){const r=new m;return m.RotationZToRef(t,r),r}static RotationZToRef(t,r){const e=Math.sin(t),s=Math.cos(t);return m.FromValuesToRef(s,e,0,0,-e,s,0,0,0,0,1,0,0,0,0,1,r),r._updateIdentityStatus(1===s&&0===e),r}static RotationAxis(t,r){const e=new m;return m.RotationAxisToRef(t,r,e),e}static RotationAxisToRef(t,r,e){const s=Math.sin(-r),i=Math.cos(-r),o=1-i;t.normalize();const n=e._m;return n[0]=t._x*t._x*o+i,n[1]=t._x*t._y*o-t._z*s,n[2]=t._x*t._z*o+t._y*s,n[3]=0,n[4]=t._y*t._x*o+t._z*s,n[5]=t._y*t._y*o+i,n[6]=t._y*t._z*o-t._x*s,n[7]=0,n[8]=t._z*t._x*o-t._y*s,n[9]=t._z*t._y*o+t._x*s,n[10]=t._z*t._z*o+i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,e.markAsUpdated(),e}static RotationAlignToRef(t,r,e,i=!1){const o=u.Dot(r,t),n=e._m;if(o<-1+s.bH)n[0]=-1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i?1:-1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=i?-1:1,n[11]=0;else{const e=u.Cross(r,t),s=1/(1+o);n[0]=e._x*e._x*s+o,n[1]=e._y*e._x*s-e._z,n[2]=e._z*e._x*s+e._y,n[3]=0,n[4]=e._x*e._y*s+e._z,n[5]=e._y*e._y*s+o,n[6]=e._z*e._y*s-e._x,n[7]=0,n[8]=e._x*e._z*s-e._y,n[9]=e._y*e._z*s+e._x,n[10]=e._z*e._z*s+o,n[11]=0}return n[12]=0,n[13]=0,n[14]=0,n[15]=1,e.markAsUpdated(),e}static RotationYawPitchRoll(t,r,e){const s=new m;return m.RotationYawPitchRollToRef(t,r,e,s),s}static RotationYawPitchRollToRef(t,r,e,s){return l.RotationYawPitchRollToRef(t,r,e,x.Quaternion[0]),x.Quaternion[0].toRotationMatrix(s),s}static Scaling(t,r,e){const s=new m;return m.ScalingToRef(t,r,e,s),s}static ScalingToRef(t,r,e,s){return m.FromValuesToRef(t,0,0,0,0,r,0,0,0,0,e,0,0,0,0,1,s),s._updateIdentityStatus(1===t&&1===r&&1===e),s}static Translation(t,r,e){const s=new m;return m.TranslationToRef(t,r,e,s),s}static TranslationToRef(t,r,e,s){return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,r,e,1,s),s._updateIdentityStatus(0===t&&0===r&&0===e),s}static Lerp(t,r,e){const s=new t.constructor;return m.LerpToRef(t,r,e,s),s}static LerpToRef(t,r,e,s){const i=s._m,o=t.m,n=r.m;for(let a=0;a<16;a++)i[a]=o[a]*(1-e)+n[a]*e;return s.markAsUpdated(),s}static DecomposeLerp(t,r,e){const s=new t.constructor;return m.DecomposeLerpToRef(t,r,e,s),s}static DecomposeLerpToRef(t,r,e,s){const i=x.Vector3[0],o=x.Quaternion[0],n=x.Vector3[1];t.decompose(i,o,n);const a=x.Vector3[2],h=x.Quaternion[1],c=x.Vector3[3];r.decompose(a,h,c);const _=x.Vector3[4];u.LerpToRef(i,a,e,_);const y=x.Quaternion[2];l.SlerpToRef(o,h,e,y);const f=x.Vector3[5];return u.LerpToRef(n,c,e,f),m.ComposeToRef(_,y,f,s),s}static LookAtLH(t,r,e){const s=new m;return m.LookAtLHToRef(t,r,e,s),s}static LookAtLHToRef(t,r,e,s){const i=x.Vector3[0],o=x.Vector3[1],n=x.Vector3[2];r.subtractToRef(t,n),n.normalize(),u.CrossToRef(e,n,i);const a=i.lengthSquared();0===a?i.x=1:i.normalizeFromLength(Math.sqrt(a)),u.CrossToRef(n,i,o),o.normalize();const h=-u.Dot(i,t),c=-u.Dot(o,t),_=-u.Dot(n,t);return m.FromValuesToRef(i._x,o._x,n._x,0,i._y,o._y,n._y,0,i._z,o._z,n._z,0,h,c,_,1,s),s}static LookAtRH(t,r,e){const s=new m;return m.LookAtRHToRef(t,r,e,s),s}static LookAtRHToRef(t,r,e,s){const i=x.Vector3[0],o=x.Vector3[1],n=x.Vector3[2];t.subtractToRef(r,n),n.normalize(),u.CrossToRef(e,n,i);const a=i.lengthSquared();0===a?i.x=1:i.normalizeFromLength(Math.sqrt(a)),u.CrossToRef(n,i,o),o.normalize();const h=-u.Dot(i,t),c=-u.Dot(o,t),_=-u.Dot(n,t);return m.FromValuesToRef(i._x,o._x,n._x,0,i._y,o._y,n._y,0,i._z,o._z,n._z,0,h,c,_,1,s),s}static LookDirectionLH(t,r){const e=new m;return m.LookDirectionLHToRef(t,r,e),e}static LookDirectionLHToRef(t,r,e){const s=x.Vector3[0];s.copyFrom(t),s.scaleInPlace(-1);const i=x.Vector3[1];return u.CrossToRef(r,s,i),m.FromValuesToRef(i._x,i._y,i._z,0,r._x,r._y,r._z,0,s._x,s._y,s._z,0,0,0,0,1,e),e}static LookDirectionRH(t,r){const e=new m;return m.LookDirectionRHToRef(t,r,e),e}static LookDirectionRHToRef(t,r,e){const s=x.Vector3[2];return u.CrossToRef(r,t,s),m.FromValuesToRef(s._x,s._y,s._z,0,r._x,r._y,r._z,0,t._x,t._y,t._z,0,0,0,0,1,e),e}static OrthoLH(t,r,e,s,i){const o=new m;return m.OrthoLHToRef(t,r,e,s,o,i),o}static OrthoLHToRef(t,r,e,s,i,o){const n=2/t,a=2/r,h=2/(s-e),c=-(s+e)/(s-e);return m.FromValuesToRef(n,0,0,0,0,a,0,0,0,0,h,0,0,0,c,1,i),o&&i.multiplyToRef(R,i),i._updateIdentityStatus(1===n&&1===a&&1===h&&0===c),i}static OrthoOffCenterLH(t,r,e,s,i,o,n){const a=new m;return m.OrthoOffCenterLHToRef(t,r,e,s,i,o,a,n),a}static OrthoOffCenterLHToRef(t,r,e,s,i,o,n,a){const h=2/(r-t),c=2/(s-e),_=2/(o-i),u=-(o+i)/(o-i),y=(t+r)/(t-r),l=(s+e)/(e-s);return m.FromValuesToRef(h,0,0,0,0,c,0,0,0,0,_,0,y,l,u,1,n),a&&n.multiplyToRef(R,n),n.markAsUpdated(),n}static ObliqueOffCenterLHToRef(t,r,e,s,i,o,n,a,h,c,_){const u=-n*Math.cos(a),y=-n*Math.sin(a);return m.TranslationToRef(0,0,-h,x.Matrix[1]),m.FromValuesToRef(1,0,0,0,0,1,0,0,u,y,1,0,0,0,0,1,x.Matrix[0]),x.Matrix[1].multiplyToRef(x.Matrix[0],x.Matrix[0]),m.TranslationToRef(0,0,h,x.Matrix[1]),x.Matrix[0].multiplyToRef(x.Matrix[1],x.Matrix[0]),m.OrthoOffCenterLHToRef(t,r,e,s,i,o,c,_),x.Matrix[0].multiplyToRef(c,c),c}static OrthoOffCenterRH(t,r,e,s,i,o,n){const a=new m;return m.OrthoOffCenterRHToRef(t,r,e,s,i,o,a,n),a}static OrthoOffCenterRHToRef(t,r,e,s,i,o,n,a){return m.OrthoOffCenterLHToRef(t,r,e,s,i,o,n,a),n._m[10]*=-1,n}static ObliqueOffCenterRHToRef(t,r,e,s,i,o,n,a,h,c,_){const u=n*Math.cos(a),y=n*Math.sin(a);return m.TranslationToRef(0,0,h,x.Matrix[1]),m.FromValuesToRef(1,0,0,0,0,1,0,0,u,y,1,0,0,0,0,1,x.Matrix[0]),x.Matrix[1].multiplyToRef(x.Matrix[0],x.Matrix[0]),m.TranslationToRef(0,0,-h,x.Matrix[1]),x.Matrix[0].multiplyToRef(x.Matrix[1],x.Matrix[0]),m.OrthoOffCenterRHToRef(t,r,e,s,i,o,c,_),x.Matrix[0].multiplyToRef(c,c),c}static PerspectiveLH(t,r,e,s,i,o=0){const n=new m,a=2*e/t,h=2*e/r,c=(s+e)/(s-e),_=-2*s*e/(s-e),u=Math.tan(o);return m.FromValuesToRef(a,0,0,0,0,h,0,u,0,0,c,1,0,0,_,0,n),i&&n.multiplyToRef(R,n),n._updateIdentityStatus(!1),n}static PerspectiveFovLH(t,r,e,s,i,o=0,n=!1){const a=new m;return m.PerspectiveFovLHToRef(t,r,e,s,a,!0,i,o,n),a}static PerspectiveFovLHToRef(t,r,e,s,i,o=!0,n,a=0,h=!1){const c=e,_=s,u=1/Math.tan(.5*t),y=o?u/r:u,l=o?u:u*r,x=h&&0===c?-1:0!==_?(_+c)/(_-c):1,f=h&&0===c?2*_:0!==_?-2*_*c/(_-c):-2*c,d=Math.tan(a);return m.FromValuesToRef(y,0,0,0,0,l,0,d,0,0,x,1,0,0,f,0,i),n&&i.multiplyToRef(R,i),i._updateIdentityStatus(!1),i}static PerspectiveFovReverseLHToRef(t,r,e,s,i,o=!0,n,a=0){const h=1/Math.tan(.5*t),c=o?h/r:h,_=o?h:h*r,u=Math.tan(a);return m.FromValuesToRef(c,0,0,0,0,_,0,u,0,0,-e,1,0,0,1,0,i),n&&i.multiplyToRef(R,i),i._updateIdentityStatus(!1),i}static PerspectiveFovRH(t,r,e,s,i,o=0,n=!1){const a=new m;return m.PerspectiveFovRHToRef(t,r,e,s,a,!0,i,o,n),a}static PerspectiveFovRHToRef(t,r,e,s,i,o=!0,n,a=0,h=!1){const c=e,_=s,u=1/Math.tan(.5*t),y=o?u/r:u,l=o?u:u*r,x=h&&0===c?1:0!==_?-(_+c)/(_-c):-1,f=h&&0===c?2*_:0!==_?-2*_*c/(_-c):-2*c,d=Math.tan(a);return m.FromValuesToRef(y,0,0,0,0,l,0,d,0,0,x,-1,0,0,f,0,i),n&&i.multiplyToRef(R,i),i._updateIdentityStatus(!1),i}static PerspectiveFovReverseRHToRef(t,r,e,s,i,o=!0,n,a=0){const h=1/Math.tan(.5*t),c=o?h/r:h,_=o?h:h*r,u=Math.tan(a);return m.FromValuesToRef(c,0,0,0,0,_,0,u,0,0,-e,-1,0,0,-1,0,i),n&&i.multiplyToRef(R,i),i._updateIdentityStatus(!1),i}static GetFinalMatrix(t,r,e,s,i,o){const n=t.width,a=t.height,h=t.x,c=t.y,_=m.FromValues(n/2,0,0,0,0,-a/2,0,0,0,0,o-i,0,h+n/2,a/2+c,i,1),u=new r.constructor;return r.multiplyToRef(e,u),u.multiplyToRef(s,u),u.multiplyToRef(_,u)}static GetAsMatrix2x2(t){const r=t.m,e=[r[0],r[1],r[4],r[5]];return n.I.MatrixUse64Bits?e:new Float32Array(e)}static GetAsMatrix3x3(t){const r=t.m,e=[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]];return n.I.MatrixUse64Bits?e:new Float32Array(e)}static Transpose(t){const r=new t.constructor;return m.TransposeToRef(t,r),r}static TransposeToRef(t,r){const e=t.m,s=e[0],i=e[4],o=e[8],n=e[12],a=e[1],h=e[5],c=e[9],_=e[13],u=e[2],y=e[6],l=e[10],m=e[14],x=e[3],f=e[7],R=e[11],d=e[15],z=r._m;return z[0]=s,z[1]=i,z[2]=o,z[3]=n,z[4]=a,z[5]=h,z[6]=c,z[7]=_,z[8]=u,z[9]=y,z[10]=l,z[11]=m,z[12]=x,z[13]=f,z[14]=R,z[15]=d,r.markAsUpdated(),r._updateIdentityStatus(t._isIdentity,t._isIdentityDirty),r}static Reflection(t){const r=new m;return m.ReflectionToRef(t,r),r}static ReflectionToRef(t,r){t.normalize();const e=t.normal.x,s=t.normal.y,i=t.normal.z,o=-2*e,n=-2*s,a=-2*i;return m.FromValuesToRef(o*e+1,n*e,a*e,0,o*s,n*s+1,a*s,0,o*i,n*i,a*i+1,0,o*t.d,n*t.d,a*t.d,1,r),r}static FromXYZAxesToRef(t,r,e,s){return m.FromValuesToRef(t._x,t._y,t._z,0,r._x,r._y,r._z,0,e._x,e._y,e._z,0,0,0,0,1,s),s}static FromQuaternionToRef(t,r){const e=t._x*t._x,s=t._y*t._y,i=t._z*t._z,o=t._x*t._y,n=t._z*t._w,a=t._z*t._x,h=t._y*t._w,c=t._y*t._z,_=t._x*t._w;return r._m[0]=1-2*(s+i),r._m[1]=2*(o+n),r._m[2]=2*(a-h),r._m[3]=0,r._m[4]=2*(o-n),r._m[5]=1-2*(i+e),r._m[6]=2*(c+_),r._m[7]=0,r._m[8]=2*(a+h),r._m[9]=2*(c-_),r._m[10]=1-2*(s+e),r._m[11]=0,r._m[12]=0,r._m[13]=0,r._m[14]=0,r._m[15]=1,r.markAsUpdated(),r}}m._UpdateFlagSeed=0,m._IdentityReadOnly=m.Identity(),Object.defineProperties(m.prototype,{dimension:{value:[4,4]},rank:{value:2}});class x{}x.Vector3=i.D.BuildTuple(11,u.Zero),x.Matrix=i.D.BuildTuple(2,m.Identity),x.Quaternion=i.D.BuildTuple(3,l.Zero);class f{}f.Vector2=i.D.BuildTuple(3,_.Zero),f.Vector3=i.D.BuildTuple(13,u.Zero),f.Vector4=i.D.BuildTuple(3,y.Zero),f.Quaternion=i.D.BuildTuple(2,l.Zero),f.Matrix=i.D.BuildTuple(8,m.Identity),(0,o.Y)("BABYLON.Vector2",_),(0,o.Y)("BABYLON.Vector3",u),(0,o.Y)("BABYLON.Vector4",y),(0,o.Y)("BABYLON.Matrix",m);const R=m.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)}}]);
//# sourceMappingURL=bf235017-fa5c8646acf5a980ef2c.js.map