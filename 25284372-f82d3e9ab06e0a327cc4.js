"use strict";(self.webpackChunk_react_babylonjs_docs=self.webpackChunk_react_babylonjs_docs||[]).push([[383],{93947:function(t,e,n){n.d(e,{FM:function(){return c},Lt:function(){return f},P:function(){return _},_f:function(){return v},jp:function(){return R},y3:function(){return m}});var r=n(9249),i=n(87371),o=n(59096),a=n(17165),u=n(89729),s=n(24237),y=n(43646),h=n(92440),l=function(t){return parseInt(t.toString().replace(/\W/g,""))},c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,r.Z)(this,t),this.x=e,this.y=n}return(0,i.Z)(t,[{key:"toString",value:function(){return"{X: ".concat(this.x," Y: ").concat(this.y,"}")}},{key:"getClassName",value:function(){return"Vector2"}},{key:"getHashCode",value:function(){var t=l(this.x);return t=397*t^l(this.y)}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"asArray",value:function(){var t=new Array;return this.toArray(t,0),t}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"copyFromFloats",value:function(t,e){return this.x=t,this.y=e,this}},{key:"set",value:function(t,e){return this.copyFromFloats(t,e)}},{key:"add",value:function(t){return new this.constructor(this.x+t.x,this.y+t.y)}},{key:"addToRef",value:function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e}},{key:"addInPlace",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"addVector3",value:function(t){return new this.constructor(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new this.constructor(this.x-t.x,this.y-t.y)}},{key:"subtractToRef",value:function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e}},{key:"subtractInPlace",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiplyInPlace",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiply",value:function(t){return new this.constructor(this.x*t.x,this.y*t.y)}},{key:"multiplyToRef",value:function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e}},{key:"multiplyByFloats",value:function(t,e){return new this.constructor(this.x*t,this.y*e)}},{key:"divide",value:function(t){return new this.constructor(this.x/t.x,this.y/t.y)}},{key:"divideToRef",value:function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"negate",value:function(){return new this.constructor(-this.x,-this.y)}},{key:"negateInPlace",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this.x,-1*this.y)}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this}},{key:"scale",value:function(t){var e=new this.constructor(0,0);return this.scaleToRef(t,e),e}},{key:"scaleToRef",value:function(t,e){return e.x=this.x*t,e.y=this.y*t,e}},{key:"scaleAndAddToRef",value:function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e}},{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&o.R.WithinEpsilon(this.x,t.x,e)&&o.R.WithinEpsilon(this.y,t.y,e)}},{key:"floor",value:function(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))}},{key:"fract",value:function(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}},{key:"rotateToRef",value:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=n*this.x-r*this.y,o=r*this.x+n*this.y;return e.x=i,e.y=o,e}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){return t.NormalizeToRef(this,this),this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}}],[{key:"Zero",value:function(){return new t(0,0)}},{key:"One",value:function(){return new t(1,1)}},{key:"Random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new t(o.R.RandomRange(e,n),o.R.RandomRange(e,n))}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e[n],e[n+1])}},{key:"FromArrayToRef",value:function(t,e,n){return n.x=t[e],n.y=t[e+1],n}},{key:"CatmullRom",value:function(t,e,n,r,i){var o=i*i,a=i*o,u=.5*(2*e.x+(-t.x+n.x)*i+(2*t.x-5*e.x+4*n.x-r.x)*o+(-t.x+3*e.x-3*n.x+r.x)*a),s=.5*(2*e.y+(-t.y+n.y)*i+(2*t.y-5*e.y+4*n.y-r.y)*o+(-t.y+3*e.y-3*n.y+r.y)*a);return new t.constructor(u,s)}},{key:"Clamp",value:function(t,e,n){var r=t.x;r=(r=r>n.x?n.x:r)<e.x?e.x:r;var i=t.y;return i=(i=i>n.y?n.y:i)<e.y?e.y:i,new t.constructor(r,i)}},{key:"Hermite",value:function(t,e,n,r,i){var o=i*i,a=i*o,u=2*a-3*o+1,s=-2*a+3*o,y=a-2*o+i,h=a-o,l=t.x*u+n.x*s+e.x*y+r.x*h,c=t.y*u+n.y*s+e.y*y+r.y*h;return new t.constructor(l,c)}},{key:"Hermite1stDerivative",value:function(t,e,n,r,i){var o=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,n,r,i,o),o}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,r,i,o){var a=i*i;return o.x=6*(a-i)*t.x+(3*a-4*i+1)*e.x+6*(-a+i)*n.x+(3*a-2*i)*r.x,o.y=6*(a-i)*t.y+(3*a-4*i+1)*e.y+6*(-a+i)*n.y+(3*a-2*i)*r.y,o}},{key:"Lerp",value:function(t,e,n){var r=t.x+(e.x-t.x)*n,i=t.y+(e.y-t.y)*n;return new t.constructor(r,i)}},{key:"Dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"Normalize",value:function(t){var e=new t.constructor;return this.NormalizeToRef(t,e),e}},{key:"NormalizeToRef",value:function(t,e){var n=t.length();return 0===n||(e.x=t.x/n,e.y=t.y/n),e}},{key:"Minimize",value:function(t,e){var n=t.x<e.x?t.x:e.x,r=t.y<e.y?t.y:e.y;return new t.constructor(n,r)}},{key:"Maximize",value:function(t,e){var n=t.x>e.x?t.x:e.x,r=t.y>e.y?t.y:e.y;return new t.constructor(n,r)}},{key:"Transform",value:function(e,n){var r=new e.constructor;return t.TransformToRef(e,n,r),r}},{key:"TransformToRef",value:function(t,e,n){var r=e.m,i=t.x*r[0]+t.y*r[4]+r[12],o=t.x*r[1]+t.y*r[5]+r[13];return n.x=i,n.y=o,n}},{key:"PointInTriangle",value:function(t,e,n,r){var i=.5*(-n.y*r.x+e.y*(-n.x+r.x)+e.x*(n.y-r.y)+n.x*r.y),o=i<0?-1:1,a=(e.y*r.x-e.x*r.y+(r.y-e.y)*t.x+(e.x-r.x)*t.y)*o,u=(e.x*n.y-e.y*n.x+(e.y-n.y)*t.x+(n.x-e.x)*t.y)*o;return a>0&&u>0&&a+u<2*i*o}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}},{key:"Center",value:function(e,n){var r=new e.constructor;return t.CenterToRef(e,n,r)}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2)}},{key:"DistanceOfPointFromSegment",value:function(e,n,r){var i=t.DistanceSquared(n,r);if(0===i)return t.Distance(e,n);var o=r.subtract(n),a=Math.max(0,Math.min(1,t.Dot(e.subtract(n),o)/i)),u=n.add(o.multiplyByFloats(a,a));return t.Distance(e,u)}}]),t}();c._ZeroReadOnly=c.Zero();var _=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,r.Z)(this,t),this._isDirty=!0,this._x=e,this._y=n,this._z=i}return(0,i.Z)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0}},{key:"toString",value:function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z,"}")}},{key:"getClassName",value:function(){return"Vector3"}},{key:"getHashCode",value:function(){var t=l(this._x);return t=397*(t=397*t^l(this._y))^l(this._z)}},{key:"asArray",value:function(){var t=[];return this.toArray(t,0),t}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"toQuaternion",value:function(){return v.RotationYawPitchRoll(this._y,this._x,this._z)}},{key:"addInPlace",value:function(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)}},{key:"addInPlaceFromFloats",value:function(t,e,n){return this._x+=t,this._y+=e,this._z+=n,this._isDirty=!0,this}},{key:"add",value:function(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z)}},{key:"addToRef",value:function(t,e){return e.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)}},{key:"subtractInPlace",value:function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._isDirty=!0,this}},{key:"subtract",value:function(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z)}},{key:"subtractToRef",value:function(t,e){return this.subtractFromFloatsToRef(t._x,t._y,t._z,e)}},{key:"subtractFromFloats",value:function(t,e,n){return new this.constructor(this._x-t,this._y-e,this._z-n)}},{key:"subtractFromFloatsToRef",value:function(t,e,n,r){return r.copyFromFloats(this._x-t,this._y-e,this._z-n)}},{key:"negate",value:function(){return new this.constructor(-this._x,-this._y,-this._z)}},{key:"negateInPlace",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)}},{key:"scaleInPlace",value:function(t){return this._x*=t,this._y*=t,this._z*=t,this._isDirty=!0,this}},{key:"scale",value:function(t){return new this.constructor(this._x*t,this._y*t,this._z*t)}},{key:"scaleToRef",value:function(t,e){return e.copyFromFloats(this._x*t,this._y*t,this._z*t)}},{key:"getNormalToRef",value:function(t){var e=this.length(),n=Math.acos(this.y/e),r=Math.atan2(this.z,this.x);n>Math.PI/2?n-=Math.PI/2:n+=Math.PI/2;var i=e*Math.sin(n)*Math.cos(r),o=e*Math.cos(n),a=e*Math.sin(n)*Math.sin(r);return t.set(i,o,a),t}},{key:"applyRotationQuaternionToRef",value:function(t,e){var n=t._w*this._x+t._y*this._z-t._z*this._y,r=t._w*this._y+t._z*this._x-t._x*this._z,i=t._w*this._z+t._x*this._y-t._y*this._x,o=-t._x*this._x-t._y*this._y-t._z*this._z;return e._x=n*t._w+o*-t._x+r*-t._z-i*-t._y,e._y=r*t._w+o*-t._y+i*-t._x-n*-t._z,e._z=i*t._w+o*-t._z+n*-t._y-r*-t._x,e._isDirty=!0,e}},{key:"applyRotationQuaternionInPlace",value:function(t){return this.applyRotationQuaternionToRef(t,this)}},{key:"applyRotationQuaternion",value:function(t){return this.applyRotationQuaternionToRef(t,new this.constructor)}},{key:"scaleAndAddToRef",value:function(t,e){return e.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)}},{key:"projectOnPlane",value:function(t,e){var n=new this.constructor;return this.projectOnPlaneToRef(t,e,n),n}},{key:"projectOnPlaneToRef",value:function(e,n,r){var i=e.normal,o=e.d,a=x.Vector3[0];this.subtractToRef(n,a),a.normalize();var u=t.Dot(a,i);if(Math.abs(u)<Math.pow(10,-10))r.setAll(1/0);else{var s=-(t.Dot(n,i)+o)/u,y=a.scaleInPlace(s);n.addToRef(y,r)}return r}},{key:"equals",value:function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&o.R.WithinEpsilon(this._x,t._x,e)&&o.R.WithinEpsilon(this._y,t._y,e)&&o.R.WithinEpsilon(this._z,t._z,e)}},{key:"equalsToFloats",value:function(t,e,n){return this._x===t&&this._y===e&&this._z===n}},{key:"multiplyInPlace",value:function(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this._isDirty=!0,this}},{key:"multiply",value:function(t){return this.multiplyByFloats(t._x,t._y,t._z)}},{key:"multiplyToRef",value:function(t,e){return e.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)}},{key:"multiplyByFloats",value:function(t,e,n){return new this.constructor(this._x*t,this._y*e,this._z*n)}},{key:"divide",value:function(t){return new this.constructor(this._x/t._x,this._y/t._y,this._z/t._z)}},{key:"divideToRef",value:function(t,e){return e.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"minimizeInPlace",value:function(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}},{key:"maximizeInPlace",value:function(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}},{key:"minimizeInPlaceFromFloats",value:function(t,e,n){return t<this._x&&(this.x=t),e<this._y&&(this.y=e),n<this._z&&(this.z=n),this}},{key:"maximizeInPlaceFromFloats",value:function(t,e,n){return t>this._x&&(this.x=t),e>this._y&&(this.y=e),n>this._z&&(this.z=n),this}},{key:"isNonUniformWithinEpsilon",value:function(t){var e=Math.abs(this._x),n=Math.abs(this._y);if(!o.R.WithinEpsilon(e,n,t))return!0;var r=Math.abs(this._z);return!o.R.WithinEpsilon(e,r,t)||!o.R.WithinEpsilon(n,r,t)}},{key:"isNonUniform",get:function(){var t=Math.abs(this._x);return t!==Math.abs(this._y)||t!==Math.abs(this._z)}},{key:"floor",value:function(){return new this.constructor(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))}},{key:"fract",value:function(){return new this.constructor(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}},{key:"lengthSquared",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z}},{key:"hasAZeroComponent",get:function(){return this._x*this._y*this._z==0}},{key:"normalize",value:function(){return this.normalizeFromLength(this.length())}},{key:"reorderInPlace",value:function(t){var e=this;return"xyz"===(t=t.toLowerCase())||(x.Vector3[0].copyFrom(this),["x","y","z"].forEach((function(n,r){e[n]=x.Vector3[0][t[r]]}))),this}},{key:"rotateByQuaternionToRef",value:function(e,n){return e.toRotationMatrix(x.Matrix[0]),t.TransformCoordinatesToRef(this,x.Matrix[0],n),n}},{key:"rotateByQuaternionAroundPointToRef",value:function(t,e,n){return this.subtractToRef(e,x.Vector3[0]),x.Vector3[0].rotateByQuaternionToRef(t,x.Vector3[0]),e.addToRef(x.Vector3[0],n),n}},{key:"cross",value:function(e){var n=new this.constructor;return t.CrossToRef(this,e,n)}},{key:"normalizeFromLength",value:function(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}},{key:"normalizeToNew",value:function(){var t=new this.constructor(0,0,0);return this.normalizeToRef(t),t}},{key:"normalizeToRef",value:function(t){var e=this.length();return 0===e||1===e?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/e,t)}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z)}},{key:"copyFrom",value:function(t){return this.copyFromFloats(t._x,t._y,t._z)}},{key:"copyFromFloats",value:function(t,e,n){return this._x=t,this._y=e,this._z=n,this._isDirty=!0,this}},{key:"set",value:function(t,e,n){return this.copyFromFloats(t,e,n)}},{key:"setAll",value:function(t){return this._x=this._y=this._z=t,this._isDirty=!0,this}}],[{key:"GetClipFactor",value:function(e,n,r,i){var o=t.Dot(e,r)-i;return o/(o-(t.Dot(n,r)-i))}},{key:"GetAngleBetweenVectors",value:function(e,n,r){var i=e.normalizeToRef(x.Vector3[1]),a=n.normalizeToRef(x.Vector3[2]),u=t.Dot(i,a);u=o.R.Clamp(u,-1,1);var s=Math.acos(u),y=x.Vector3[3];return t.CrossToRef(i,a,y),t.Dot(y,r)>0?isNaN(s)?0:s:isNaN(s)?-Math.PI:-Math.acos(u)}},{key:"GetAngleBetweenVectorsOnPlane",value:function(e,n,r){x.Vector3[0].copyFrom(e);var i=x.Vector3[0];x.Vector3[1].copyFrom(n);var a=x.Vector3[1];x.Vector3[2].copyFrom(r);var u=x.Vector3[2],s=x.Vector3[3],y=x.Vector3[4];i.normalize(),a.normalize(),u.normalize(),t.CrossToRef(u,i,s),t.CrossToRef(s,u,y);var h=Math.atan2(t.Dot(a,s),t.Dot(a,y));return o.R.NormalizeRadians(h)}},{key:"PitchYawRollToMoveBetweenPointsToRef",value:function(t,e,n){var r=R.Vector3[0];return e.subtractToRef(t,r),n._y=Math.atan2(r.x,r.z)||0,n._x=Math.atan2(Math.sqrt(Math.pow(r.x,2)+Math.pow(r.z,2)),r.y)||0,n._z=0,n._isDirty=!0,n}},{key:"PitchYawRollToMoveBetweenPoints",value:function(e,n){var r=t.Zero();return t.PitchYawRollToMoveBetweenPointsToRef(e,n,r)}},{key:"SlerpToRef",value:function(e,n,r,i){r=o.R.Clamp(r,0,1);var u=x.Vector3[0],s=x.Vector3[1];u.copyFrom(e);var y=u.length();u.normalizeFromLength(y),s.copyFrom(n);var h=s.length();s.normalizeFromLength(h);var l,c,_=t.Dot(u,s);if(_<1-a.kn){var f=Math.acos(_),v=1/Math.sin(f);l=Math.sin((1-r)*f)*v,c=Math.sin(r*f)*v}else l=1-r,c=r;return u.scaleInPlace(l),s.scaleInPlace(c),i.copyFrom(u).addInPlace(s),i.scaleInPlace(o.R.Lerp(y,h,r)),i}},{key:"SmoothToRef",value:function(e,n,r,i,o){return t.SlerpToRef(e,n,0===i?1:r/i,o),o}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e[n],e[n+1],e[n+2])}},{key:"FromFloatArray",value:function(e,n){return t.FromArray(e,n)}},{key:"FromArrayToRef",value:function(t,e,n){return n._x=t[e],n._y=t[e+1],n._z=t[e+2],n._isDirty=!0,n}},{key:"FromFloatArrayToRef",value:function(e,n,r){return t.FromArrayToRef(e,n,r)}},{key:"FromFloatsToRef",value:function(t,e,n,r){return r.copyFromFloats(t,e,n),r}},{key:"Zero",value:function(){return new t(0,0,0)}},{key:"One",value:function(){return new t(1,1,1)}},{key:"Up",value:function(){return new t(0,1,0)}},{key:"UpReadOnly",get:function(){return t._UpReadOnly}},{key:"DownReadOnly",get:function(){return t._DownReadOnly}},{key:"RightReadOnly",get:function(){return t._RightReadOnly}},{key:"LeftReadOnly",get:function(){return t._LeftReadOnly}},{key:"LeftHandedForwardReadOnly",get:function(){return t._LeftHandedForwardReadOnly}},{key:"RightHandedForwardReadOnly",get:function(){return t._RightHandedForwardReadOnly}},{key:"LeftHandedBackwardReadOnly",get:function(){return t._LeftHandedBackwardReadOnly}},{key:"RightHandedBackwardReadOnly",get:function(){return t._RightHandedBackwardReadOnly}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"Down",value:function(){return new t(0,-1,0)}},{key:"Forward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new t(0,0,e?-1:1)}},{key:"Backward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new t(0,0,e?1:-1)}},{key:"Right",value:function(){return new t(1,0,0)}},{key:"Left",value:function(){return new t(-1,0,0)}},{key:"Random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new t(o.R.RandomRange(e,n),o.R.RandomRange(e,n),o.R.RandomRange(e,n))}},{key:"TransformCoordinates",value:function(e,n){var r=t.Zero();return t.TransformCoordinatesToRef(e,n,r),r}},{key:"TransformCoordinatesToRef",value:function(e,n,r){return t.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,n,r),r}},{key:"TransformCoordinatesFromFloatsToRef",value:function(t,e,n,r,i){var o=r.m,a=t*o[0]+e*o[4]+n*o[8]+o[12],u=t*o[1]+e*o[5]+n*o[9]+o[13],s=t*o[2]+e*o[6]+n*o[10]+o[14],y=1/(t*o[3]+e*o[7]+n*o[11]+o[15]);return i._x=a*y,i._y=u*y,i._z=s*y,i._isDirty=!0,i}},{key:"TransformNormal",value:function(e,n){var r=t.Zero();return t.TransformNormalToRef(e,n,r),r}},{key:"TransformNormalToRef",value:function(t,e,n){return this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,e,n),n}},{key:"TransformNormalFromFloatsToRef",value:function(t,e,n,r,i){var o=r.m;return i._x=t*o[0]+e*o[4]+n*o[8],i._y=t*o[1]+e*o[5]+n*o[9],i._z=t*o[2]+e*o[6]+n*o[10],i._isDirty=!0,i}},{key:"CatmullRom",value:function(t,e,n,r,i){var o=i*i,a=i*o,u=.5*(2*e._x+(-t._x+n._x)*i+(2*t._x-5*e._x+4*n._x-r._x)*o+(-t._x+3*e._x-3*n._x+r._x)*a),s=.5*(2*e._y+(-t._y+n._y)*i+(2*t._y-5*e._y+4*n._y-r._y)*o+(-t._y+3*e._y-3*n._y+r._y)*a),y=.5*(2*e._z+(-t._z+n._z)*i+(2*t._z-5*e._z+4*n._z-r._z)*o+(-t._z+3*e._z-3*n._z+r._z)*a);return new t.constructor(u,s,y)}},{key:"Clamp",value:function(e,n,r){var i=new e.constructor;return t.ClampToRef(e,n,r,i),i}},{key:"ClampToRef",value:function(t,e,n,r){var i=t._x;i=(i=i>n._x?n._x:i)<e._x?e._x:i;var o=t._y;o=(o=o>n._y?n._y:o)<e._y?e._y:o;var a=t._z;return a=(a=a>n._z?n._z:a)<e._z?e._z:a,r.copyFromFloats(i,o,a),r}},{key:"CheckExtends",value:function(t,e,n){e.minimizeInPlace(t),n.maximizeInPlace(t)}},{key:"Hermite",value:function(t,e,n,r,i){var o=i*i,a=i*o,u=2*a-3*o+1,s=-2*a+3*o,y=a-2*o+i,h=a-o,l=t._x*u+n._x*s+e._x*y+r._x*h,c=t._y*u+n._y*s+e._y*y+r._y*h,_=t._z*u+n._z*s+e._z*y+r._z*h;return new t.constructor(l,c,_)}},{key:"Hermite1stDerivative",value:function(t,e,n,r,i){var o=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,n,r,i,o),o}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,r,i,o){var a=i*i;return o._x=6*(a-i)*t._x+(3*a-4*i+1)*e._x+6*(-a+i)*n._x+(3*a-2*i)*r._x,o._y=6*(a-i)*t._y+(3*a-4*i+1)*e._y+6*(-a+i)*n._y+(3*a-2*i)*r._y,o._z=6*(a-i)*t._z+(3*a-4*i+1)*e._z+6*(-a+i)*n._z+(3*a-2*i)*r._z,o._isDirty=!0,o}},{key:"Lerp",value:function(e,n,r){var i=new e.constructor(0,0,0);return t.LerpToRef(e,n,r,i),i}},{key:"LerpToRef",value:function(t,e,n,r){return r._x=t._x+(e._x-t._x)*n,r._y=t._y+(e._y-t._y)*n,r._z=t._z+(e._z-t._z)*n,r._isDirty=!0,r}},{key:"Dot",value:function(t,e){return t._x*e._x+t._y*e._y+t._z*e._z}},{key:"Cross",value:function(e,n){var r=new e.constructor;return t.CrossToRef(e,n,r),r}},{key:"CrossToRef",value:function(t,e,n){var r=t._y*e._z-t._z*e._y,i=t._z*e._x-t._x*e._z,o=t._x*e._y-t._y*e._x;return n.copyFromFloats(r,i,o),n}},{key:"Normalize",value:function(e){var n=t.Zero();return t.NormalizeToRef(e,n),n}},{key:"NormalizeToRef",value:function(t,e){return t.normalizeToRef(e),e}},{key:"Project",value:function(e,n,r,i){var o=new e.constructor;return t.ProjectToRef(e,n,r,i,o),o}},{key:"ProjectToRef",value:function(e,n,r,i,o){var a=i.width,u=i.height,s=i.x,y=i.y,h=x.Matrix[1];m.FromValuesToRef(a/2,0,0,0,0,-u/2,0,0,0,0,.5,0,s+a/2,u/2+y,.5,1,h);var l=x.Matrix[0];return n.multiplyToRef(r,l),l.multiplyToRef(h,l),t.TransformCoordinatesToRef(e,l,o),o}},{key:"Reflect",value:function(e,n){return this.ReflectToRef(e,n,new t)}},{key:"ReflectToRef",value:function(e,n,r){var i=R.Vector3[0];return i.copyFrom(n).scaleInPlace(2*t.Dot(e,n)),r.copyFrom(e).subtractInPlace(i)}},{key:"_UnprojectFromInvertedMatrixToRef",value:function(e,n,r){t.TransformCoordinatesToRef(e,n,r);var i=n.m,a=e._x*i[3]+e._y*i[7]+e._z*i[11]+i[15];return o.R.WithinEpsilon(a,1)&&r.scaleInPlace(1/a),r}},{key:"UnprojectFromTransform",value:function(t,e,n,r,i){return this.Unproject(t,e,n,r,i,m.IdentityReadOnly)}},{key:"Unproject",value:function(e,n,r,i,o,a){var u=new e.constructor;return t.UnprojectToRef(e,n,r,i,o,a,u),u}},{key:"UnprojectToRef",value:function(e,n,r,i,o,a,u){return t.UnprojectFloatsToRef(e._x,e._y,e._z,n,r,i,o,a,u),u}},{key:"UnprojectFloatsToRef",value:function(e,n,r,i,o,a,u,s,y){var l,c=x.Matrix[0];a.multiplyToRef(u,c),c.multiplyToRef(s,c),c.invert();var _=x.Vector3[0];return _.x=e/i*2-1,_.y=-(n/o*2-1),(null===(l=h.l.LastCreatedEngine)||void 0===l?void 0:l.isNDCHalfZRange)?_.z=r:_.z=2*r-1,t._UnprojectFromInvertedMatrixToRef(_,c,y),y}},{key:"Minimize",value:function(t,e){var n=new t.constructor;return n.copyFrom(t),n.minimizeInPlace(e),n}},{key:"Maximize",value:function(t,e){var n=new t.constructor;return n.copyFrom(t),n.maximizeInPlace(e),n}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t._x-e._x,r=t._y-e._y,i=t._z-e._z;return n*n+r*r+i*i}},{key:"ProjectOnTriangleToRef",value:function(e,n,r,i,u){var s=x.Vector3[0],y=x.Vector3[1],h=x.Vector3[2],l=x.Vector3[3],c=x.Vector3[4];r.subtractToRef(n,s),i.subtractToRef(n,y),i.subtractToRef(r,h);var _=s.length(),f=y.length(),v=h.length();if(_<a.kn||f<a.kn||v<a.kn)return u.copyFrom(n),t.Distance(e,n);e.subtractToRef(n,c),t.CrossToRef(s,y,l);var m=l.length();if(m<a.kn)return u.copyFrom(n),t.Distance(e,n);l.normalizeFromLength(m);var R=c.length();if(R<a.kn)return u.copyFrom(n),0;c.normalizeFromLength(R);var k=t.Dot(l,c),d=x.Vector3[5],z=x.Vector3[6];d.copyFrom(l).scaleInPlace(-R*k),z.copyFrom(e).addInPlace(d);var T=x.Vector3[4],w=x.Vector3[5],p=x.Vector3[7],F=x.Vector3[8];T.copyFrom(s).scaleInPlace(1/_),F.copyFrom(y).scaleInPlace(1/f),T.addInPlace(F).scaleInPlace(-1),w.copyFrom(s).scaleInPlace(-1/_),F.copyFrom(h).scaleInPlace(1/v),w.addInPlace(F).scaleInPlace(-1),p.copyFrom(h).scaleInPlace(-1/v),F.copyFrom(y).scaleInPlace(-1/f),p.addInPlace(F).scaleInPlace(-1);var g=x.Vector3[9];g.copyFrom(z).subtractInPlace(n),t.CrossToRef(T,g,F);var M=t.Dot(F,l);g.copyFrom(z).subtractInPlace(r),t.CrossToRef(w,g,F);var I=t.Dot(F,l);g.copyFrom(z).subtractInPlace(i),t.CrossToRef(p,g,F);var D,P,A=t.Dot(F,l),V=x.Vector3[10];M>0&&I<0?(V.copyFrom(s),D=n,P=r):I>0&&A<0?(V.copyFrom(h),D=r,P=i):(V.copyFrom(y).scaleInPlace(-1),D=i,P=n);var C=x.Vector3[9],L=x.Vector3[4];if(D.subtractToRef(z,F),P.subtractToRef(z,C),t.CrossToRef(F,C,L),!(t.Dot(L,l)<0))return u.copyFrom(z),Math.abs(R*k);var H=x.Vector3[5];t.CrossToRef(V,L,H),H.normalize();var O=x.Vector3[9];O.copyFrom(D).subtractInPlace(z);var Z=O.length();if(Z<a.kn)return u.copyFrom(D),t.Distance(e,D);O.normalizeFromLength(Z);var S=t.Dot(H,O),B=x.Vector3[7];B.copyFrom(z).addInPlace(H.scaleInPlace(Z*S)),F.copyFrom(B).subtractInPlace(D),R=V.length(),V.normalizeFromLength(R);var b=t.Dot(F,V)/Math.max(R,a.kn);return b=o.R.Clamp(b,0,1),B.copyFrom(D).addInPlace(V.scaleInPlace(b*R)),u.copyFrom(B),t.Distance(e,B)}},{key:"Center",value:function(e,n){return t.CenterToRef(e,n,t.Zero())}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t._x+e._x)/2,(t._y+e._y)/2,(t._z+e._z)/2)}},{key:"RotationFromAxis",value:function(e,n,r){var i=new e.constructor;return t.RotationFromAxisToRef(e,n,r,i),i}},{key:"RotationFromAxisToRef",value:function(t,e,n,r){var i=x.Quaternion[0];return v.RotationQuaternionFromAxisToRef(t,e,n,i),i.toEulerAnglesToRef(r),r}}]),t}();_._UpReadOnly=_.Up(),_._DownReadOnly=_.Down(),_._LeftHandedForwardReadOnly=_.Forward(!1),_._RightHandedForwardReadOnly=_.Forward(!0),_._LeftHandedBackwardReadOnly=_.Backward(!1),_._RightHandedBackwardReadOnly=_.Backward(!0),_._RightReadOnly=_.Right(),_._LeftReadOnly=_.Left(),_._ZeroReadOnly=_.Zero();var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,t),this.x=e,this.y=n,this.z=i,this.w=o}return(0,i.Z)(t,[{key:"toString",value:function(){return"{X: ".concat(this.x," Y: ").concat(this.y," Z: ").concat(this.z," W: ").concat(this.w,"}")}},{key:"getClassName",value:function(){return"Vector4"}},{key:"getHashCode",value:function(){var t=l(this.x);return t=397*(t=397*(t=397*t^l(this.y))^l(this.z))^l(this.w)}},{key:"asArray",value:function(){var t=new Array;return this.toArray(t,0),t}},{key:"toArray",value:function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"addInPlace",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}},{key:"add",value:function(t){return new this.constructor(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}},{key:"addToRef",value:function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,e}},{key:"subtractInPlace",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}},{key:"subtract",value:function(t){return new this.constructor(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}},{key:"subtractToRef",value:function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,e}},{key:"subtractFromFloats",value:function(t,e,n,r){return new this.constructor(this.x-t,this.y-e,this.z-n,this.w-r)}},{key:"subtractFromFloatsToRef",value:function(t,e,n,r,i){return i.x=this.x-t,i.y=this.y-e,i.z=this.z-n,i.w=this.w-r,i}},{key:"negate",value:function(){return new this.constructor(-this.x,-this.y,-this.z,-this.w)}},{key:"negateInPlace",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"scale",value:function(t){return new this.constructor(this.x*t,this.y*t,this.z*t,this.w*t)}},{key:"scaleToRef",value:function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,e}},{key:"scaleAndAddToRef",value:function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,e}},{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&o.R.WithinEpsilon(this.x,t.x,e)&&o.R.WithinEpsilon(this.y,t.y,e)&&o.R.WithinEpsilon(this.z,t.z,e)&&o.R.WithinEpsilon(this.w,t.w,e)}},{key:"equalsToFloats",value:function(t,e,n,r){return this.x===t&&this.y===e&&this.z===n&&this.w===r}},{key:"multiplyInPlace",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiply",value:function(t){return new this.constructor(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}},{key:"multiplyToRef",value:function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,e}},{key:"multiplyByFloats",value:function(t,e,n,r){return new this.constructor(this.x*t,this.y*e,this.z*n,this.w*r)}},{key:"divide",value:function(t){return new this.constructor(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}},{key:"divideToRef",value:function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,e}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"minimizeInPlace",value:function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}},{key:"maximizeInPlace",value:function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}},{key:"floor",value:function(){return new this.constructor(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}},{key:"fract",value:function(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"normalize",value:function(){var t=this.length();return 0===t?this:this.scaleInPlace(1/t)}},{key:"toVector3",value:function(){return new _(this.x,this.y,this.z)}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}},{key:"copyFromFloats",value:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}},{key:"set",value:function(t,e,n,r){return this.copyFromFloats(t,e,n,r)}},{key:"setAll",value:function(t){return this.x=this.y=this.z=this.w=t,this}}],[{key:"FromArray",value:function(e,n){return n||(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])}},{key:"FromArrayToRef",value:function(t,e,n){return n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3],n}},{key:"FromFloatArrayToRef",value:function(e,n,r){return t.FromArrayToRef(e,n,r),r}},{key:"FromFloatsToRef",value:function(t,e,n,r,i){return i.x=t,i.y=e,i.z=n,i.w=r,i}},{key:"Zero",value:function(){return new t(0,0,0,0)}},{key:"One",value:function(){return new t(1,1,1,1)}},{key:"Random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new t(o.R.RandomRange(e,n),o.R.RandomRange(e,n),o.R.RandomRange(e,n),o.R.RandomRange(e,n))}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"Normalize",value:function(e){var n=t.Zero();return t.NormalizeToRef(e,n),n}},{key:"NormalizeToRef",value:function(t,e){return e.copyFrom(t),e.normalize(),e}},{key:"Minimize",value:function(t,e){var n=new t.constructor;return n.copyFrom(t),n.minimizeInPlace(e),n}},{key:"Maximize",value:function(t,e){var n=new t.constructor;return n.copyFrom(t),n.maximizeInPlace(e),n}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t.x-e.x,r=t.y-e.y,i=t.z-e.z,o=t.w-e.w;return n*n+r*r+i*i+o*o}},{key:"Center",value:function(e,n){return t.CenterToRef(e,n,t.Zero())}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2,(t.w+e.w)/2)}},{key:"TransformCoordinates",value:function(e,n){var r=t.Zero();return t.TransformCoordinatesToRef(e,n,r),r}},{key:"TransformCoordinatesToRef",value:function(e,n,r){return t.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,n,r),r}},{key:"TransformCoordinatesFromFloatsToRef",value:function(t,e,n,r,i){var o=r.m,a=t*o[0]+e*o[4]+n*o[8]+o[12],u=t*o[1]+e*o[5]+n*o[9]+o[13],s=t*o[2]+e*o[6]+n*o[10]+o[14],y=t*o[3]+e*o[7]+n*o[11]+o[15];return i.x=a,i.y=u,i.z=s,i.w=y,i}},{key:"TransformNormal",value:function(e,n){var r=new e.constructor;return t.TransformNormalToRef(e,n,r),r}},{key:"TransformNormalToRef",value:function(t,e,n){var r=e.m,i=t.x*r[0]+t.y*r[4]+t.z*r[8],o=t.x*r[1]+t.y*r[5]+t.z*r[9],a=t.x*r[2]+t.y*r[6]+t.z*r[10];return n.x=i,n.y=o,n.z=a,n.w=t.w,n}},{key:"TransformNormalFromFloatsToRef",value:function(t,e,n,r,i,o){var a=i.m;return o.x=t*a[0]+e*a[4]+n*a[8],o.y=t*a[1]+e*a[5]+n*a[9],o.z=t*a[2]+e*a[6]+n*a[10],o.w=r,o}},{key:"FromVector3",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e._x,e._y,e._z,n)}}]),t}();f._ZeroReadOnly=f.Zero();var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,r.Z)(this,t),this._isDirty=!0,this._x=e,this._y=n,this._z=i,this._w=o}return(0,i.Z)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._isDirty=!0}},{key:"toString",value:function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z," W: ").concat(this._w,"}")}},{key:"getClassName",value:function(){return"Quaternion"}},{key:"getHashCode",value:function(){var t=l(this._x);return t=397*(t=397*(t=397*t^l(this._y))^l(this._z))^l(this._w)}},{key:"asArray",value:function(){return[this._x,this._y,this._z,this._w]}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,this}},{key:"equals",value:function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&o.R.WithinEpsilon(this._x,t._x,e)&&o.R.WithinEpsilon(this._y,t._y,e)&&o.R.WithinEpsilon(this._z,t._z,e)&&o.R.WithinEpsilon(this._w,t._w,e)}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copyFrom",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this._isDirty=!0,this}},{key:"copyFromFloats",value:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._isDirty=!0,this}},{key:"set",value:function(t,e,n,r){return this.copyFromFloats(t,e,n,r)}},{key:"add",value:function(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)}},{key:"addInPlace",value:function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this._isDirty=!0,this}},{key:"subtract",value:function(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)}},{key:"subtractInPlace",value:function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this._isDirty=!0,this}},{key:"scale",value:function(t){return new this.constructor(this._x*t,this._y*t,this._z*t,this._w*t)}},{key:"scaleToRef",value:function(t,e){return e._x=this._x*t,e._y=this._y*t,e._z=this._z*t,e._w=this._w*t,e._isDirty=!0,e}},{key:"scaleInPlace",value:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this._isDirty=!0,this}},{key:"scaleAndAddToRef",value:function(t,e){return e._x+=this._x*t,e._y+=this._y*t,e._z+=this._z*t,e._w+=this._w*t,e._isDirty=!0,e}},{key:"multiply",value:function(t){var e=new this.constructor(0,0,0,1);return this.multiplyToRef(t,e),e}},{key:"multiplyToRef",value:function(t,e){var n=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,r=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,i=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,o=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return e.copyFromFloats(n,r,i,o),e}},{key:"multiplyInPlace",value:function(t){return this.multiplyToRef(t,this),this}},{key:"conjugateToRef",value:function(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),t}},{key:"conjugateInPlace",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}},{key:"conjugate",value:function(){return new this.constructor(-this._x,-this._y,-this._z,this._w)}},{key:"invert",value:function(){var t=this.conjugate(),e=this.lengthSquared();return 0==e||1==e||t.scaleInPlace(1/e),t}},{key:"invertInPlace",value:function(){this.conjugateInPlace();var t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}},{key:"lengthSquared",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"normalize",value:function(){var t=this.length();if(0===t)return this;var e=1/t;return this.scaleInPlace(e),this}},{key:"normalizeToNew",value:function(){var t=this.length();if(0===t)return this.clone();var e=1/t;return this.scale(e)}},{key:"toEulerAngles",value:function(){var t=_.Zero();return this.toEulerAnglesToRef(t),t}},{key:"toEulerAnglesToRef",value:function(t){var e=this._z,n=this._x,r=this._y,i=this._w,o=r*e-n*i,a=.4999999;if(o<-a)t._y=2*Math.atan2(r,i),t._x=Math.PI/2,t._z=0,t._isDirty=!0;else if(o>a)t._y=2*Math.atan2(r,i),t._x=-Math.PI/2,t._z=0,t._isDirty=!0;else{var u=i*i,s=e*e,y=n*n,h=r*r;t._z=Math.atan2(2*(n*r+e*i),-s-y+h+u),t._x=Math.asin(-2*o),t._y=Math.atan2(2*(e*n+r*i),s-y-h+u),t._isDirty=!0}return t}},{key:"toRotationMatrix",value:function(t){return m.FromQuaternionToRef(this,t),t}},{key:"fromRotationMatrix",value:function(e){return t.FromRotationMatrixToRef(e,this),this}}],[{key:"FromRotationMatrix",value:function(e){var n=new t;return t.FromRotationMatrixToRef(e,n),n}},{key:"FromRotationMatrixToRef",value:function(t,e){var n,r=t.m,i=r[0],o=r[4],a=r[8],u=r[1],s=r[5],y=r[9],h=r[2],l=r[6],c=r[10],_=i+s+c;return _>0?(n=.5/Math.sqrt(_+1),e._w=.25/n,e._x=(l-y)*n,e._y=(a-h)*n,e._z=(u-o)*n,e._isDirty=!0):i>s&&i>c?(n=2*Math.sqrt(1+i-s-c),e._w=(l-y)/n,e._x=.25*n,e._y=(o+u)/n,e._z=(a+h)/n,e._isDirty=!0):s>c?(n=2*Math.sqrt(1+s-i-c),e._w=(a-h)/n,e._x=(o+u)/n,e._y=.25*n,e._z=(y+l)/n,e._isDirty=!0):(n=2*Math.sqrt(1+c-i-s),e._w=(u-o)/n,e._x=(a+h)/n,e._y=(y+l)/n,e._z=.25*n,e._isDirty=!0),e}},{key:"Dot",value:function(t,e){return t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w}},{key:"AreClose",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=t.Dot(e,n);return 1-i*i<=r}},{key:"SmoothToRef",value:function(e,n,r,i,a){var u=0===i?1:r/i;return u=o.R.Clamp(u,0,1),t.SlerpToRef(e,n,u,a),a}},{key:"Zero",value:function(){return new t(0,0,0,0)}},{key:"Inverse",value:function(t){return new t.constructor(-t._x,-t._y,-t._z,t._w)}},{key:"InverseToRef",value:function(t,e){return e.set(-t._x,-t._y,-t._z,t._w),e}},{key:"Identity",value:function(){return new t(0,0,0,1)}},{key:"IsIdentity",value:function(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}},{key:"RotationAxis",value:function(e,n){return t.RotationAxisToRef(e,n,new t)}},{key:"RotationAxisToRef",value:function(t,e,n){var r=Math.sin(e/2);return t.normalize(),n._w=Math.cos(e/2),n._x=t._x*r,n._y=t._y*r,n._z=t._z*r,n._isDirty=!0,n}},{key:"FromArray",value:function(e,n){return n||(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])}},{key:"FromArrayToRef",value:function(t,e,n){return n._x=t[e],n._y=t[e+1],n._z=t[e+2],n._w=t[e+3],n._isDirty=!0,n}},{key:"FromEulerAngles",value:function(e,n,r){var i=new t;return t.RotationYawPitchRollToRef(n,e,r,i),i}},{key:"FromEulerAnglesToRef",value:function(e,n,r,i){return t.RotationYawPitchRollToRef(n,e,r,i),i}},{key:"FromEulerVector",value:function(e){var n=new t;return t.RotationYawPitchRollToRef(e._y,e._x,e._z,n),n}},{key:"FromEulerVectorToRef",value:function(e,n){return t.RotationYawPitchRollToRef(e._y,e._x,e._z,n),n}},{key:"FromUnitVectorsToRef",value:function(t,e,n){var r=_.Dot(t,e)+1;return r<a.kn?Math.abs(t.x)>Math.abs(t.z)?n.set(-t.y,t.x,0,0):n.set(0,-t.z,t.y,0):(_.CrossToRef(t,e,R.Vector3[0]),n.set(R.Vector3[0].x,R.Vector3[0].y,R.Vector3[0].z,r)),n.normalize()}},{key:"RotationYawPitchRoll",value:function(e,n,r){var i=new t;return t.RotationYawPitchRollToRef(e,n,r,i),i}},{key:"RotationYawPitchRollToRef",value:function(t,e,n,r){var i=.5*n,o=.5*e,a=.5*t,u=Math.sin(i),s=Math.cos(i),y=Math.sin(o),h=Math.cos(o),l=Math.sin(a),c=Math.cos(a);return r._x=c*y*s+l*h*u,r._y=l*h*s-c*y*u,r._z=c*h*u-l*y*s,r._w=c*h*s+l*y*u,r._isDirty=!0,r}},{key:"RotationAlphaBetaGamma",value:function(e,n,r){var i=new t;return t.RotationAlphaBetaGammaToRef(e,n,r,i),i}},{key:"RotationAlphaBetaGammaToRef",value:function(t,e,n,r){var i=.5*(n+t),o=.5*(n-t),a=.5*e;return r._x=Math.cos(o)*Math.sin(a),r._y=Math.sin(o)*Math.sin(a),r._z=Math.sin(i)*Math.cos(a),r._w=Math.cos(i)*Math.cos(a),r._isDirty=!0,r}},{key:"RotationQuaternionFromAxis",value:function(e,n,r){var i=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(e,n,r,i),i}},{key:"RotationQuaternionFromAxisToRef",value:function(e,n,r,i){var o=x.Matrix[0];return m.FromXYZAxesToRef(e.normalize(),n.normalize(),r.normalize(),o),t.FromRotationMatrixToRef(o,i),i}},{key:"FromLookDirectionLH",value:function(e,n){var r=new t;return t.FromLookDirectionLHToRef(e,n,r),r}},{key:"FromLookDirectionLHToRef",value:function(e,n,r){var i=x.Matrix[0];return m.LookDirectionLHToRef(e,n,i),t.FromRotationMatrixToRef(i,r),r}},{key:"FromLookDirectionRH",value:function(e,n){var r=new t;return t.FromLookDirectionRHToRef(e,n,r),r}},{key:"FromLookDirectionRHToRef",value:function(e,n,r){var i=x.Matrix[0];return m.LookDirectionRHToRef(e,n,i),t.FromRotationMatrixToRef(i,r)}},{key:"Slerp",value:function(e,n,r){var i=t.Identity();return t.SlerpToRef(e,n,r,i),i}},{key:"SlerpToRef",value:function(t,e,n,r){var i,o,a=t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w,u=!1;if(a<0&&(u=!0,a=-a),a>.999999)o=1-n,i=u?-n:n;else{var s=Math.acos(a),y=1/Math.sin(s);o=Math.sin((1-n)*s)*y,i=u?-Math.sin(n*s)*y:Math.sin(n*s)*y}return r._x=o*t._x+i*e._x,r._y=o*t._y+i*e._y,r._z=o*t._z+i*e._z,r._w=o*t._w+i*e._w,r._isDirty=!0,r}},{key:"Hermite",value:function(t,e,n,r,i){var o=i*i,a=i*o,u=2*a-3*o+1,s=-2*a+3*o,y=a-2*o+i,h=a-o,l=t._x*u+n._x*s+e._x*y+r._x*h,c=t._y*u+n._y*s+e._y*y+r._y*h,_=t._z*u+n._z*s+e._z*y+r._z*h,f=t._w*u+n._w*s+e._w*y+r._w*h;return new t.constructor(l,c,_,f)}},{key:"Hermite1stDerivative",value:function(t,e,n,r,i){var o=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,n,r,i,o),o}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,r,i,o){var a=i*i;return o._x=6*(a-i)*t._x+(3*a-4*i+1)*e._x+6*(-a+i)*n._x+(3*a-2*i)*r._x,o._y=6*(a-i)*t._y+(3*a-4*i+1)*e._y+6*(-a+i)*n._y+(3*a-2*i)*r._y,o._z=6*(a-i)*t._z+(3*a-4*i+1)*e._z+6*(-a+i)*n._z+(3*a-2*i)*r._z,o._w=6*(a-i)*t._w+(3*a-4*i+1)*e._w+6*(-a+i)*n._w+(3*a-2*i)*r._w,o._isDirty=!0,o}}]),t}(),m=function(){function t(){(0,r.Z)(this,t),this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,y.Z.MatrixTrackPrecisionChange&&y.Z.MatrixTrackedMatrices.push(this),this._m=new y.Z.MatrixCurrentType(16),this.markAsUpdated()}return(0,i.Z)(t,[{key:"m",get:function(){return this._m}},{key:"markAsUpdated",value:function(){this.updateFlag=t._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}},{key:"_updateIdentityStatus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._isIdentity=t,this._isIdentity3x2=t||n,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&r}},{key:"isIdentity",value:function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}},{key:"isIdentityAs3x2",value:function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}},{key:"determinant",value:function(){if(!0===this._isIdentity)return 1;var t=this._m,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],y=t[8],h=t[9],l=t[10],c=t[11],_=t[12],f=t[13],v=t[14],m=t[15],x=l*m-v*c,R=h*m-f*c,k=h*v-f*l,d=y*m-_*c,z=y*v-l*_,T=y*f-_*h;return e*+(a*x-u*R+s*k)+n*-(o*x-u*d+s*z)+r*+(o*R-a*d+s*T)+i*-(o*k-a*z+u*T)}},{key:"toArray",value:function(){return this._m}},{key:"asArray",value:function(){return this._m}},{key:"invert",value:function(){return this.invertToRef(this),this}},{key:"reset",value:function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}},{key:"add",value:function(t){var e=new this.constructor;return this.addToRef(t,e),e}},{key:"addToRef",value:function(t,e){for(var n=this._m,r=e._m,i=t.m,o=0;o<16;o++)r[o]=n[o]+i[o];return e.markAsUpdated(),e}},{key:"addToSelf",value:function(t){for(var e=this._m,n=t.m,r=0;r<16;r++)e[r]+=n[r];return this.markAsUpdated(),this}},{key:"invertToRef",value:function(e){if(!0===this._isIdentity)return t.IdentityToRef(e),e;var n=this._m,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],y=n[6],h=n[7],l=n[8],c=n[9],_=n[10],f=n[11],v=n[12],m=n[13],x=n[14],R=n[15],k=_*R-x*f,d=c*R-m*f,z=c*x-m*_,T=l*R-v*f,w=l*x-_*v,p=l*m-v*c,F=+(s*k-y*d+h*z),g=-(u*k-y*T+h*w),M=+(u*d-s*T+h*p),I=-(u*z-s*w+y*p),D=r*F+i*g+o*M+a*I;if(0===D)return e.copyFrom(this),e;var P=1/D,A=y*R-x*h,V=s*R-m*h,C=s*x-m*y,L=u*R-v*h,H=u*x-v*y,O=u*m-v*s,Z=y*f-_*h,S=s*f-c*h,B=s*_-c*y,b=u*f-l*h,U=u*_-l*y,q=u*c-l*s,N=-(i*k-o*d+a*z),E=+(r*k-o*T+a*w),Y=-(r*d-i*T+a*p),Q=+(r*z-i*w+o*p),W=+(i*A-o*V+a*C),j=-(r*A-o*L+a*H),G=+(r*V-i*L+a*O),X=-(r*C-i*H+o*O),J=-(i*Z-o*S+a*B),K=+(r*Z-o*b+a*U),$=-(r*S-i*b+a*q),tt=+(r*B-i*U+o*q);return t.FromValuesToRef(F*P,N*P,W*P,J*P,g*P,E*P,j*P,K*P,M*P,Y*P,G*P,$*P,I*P,Q*P,X*P,tt*P,e),e}},{key:"addAtIndex",value:function(t,e){return this._m[t]+=e,this.markAsUpdated(),this}},{key:"multiplyAtIndex",value:function(t,e){return this._m[t]*=e,this.markAsUpdated(),this}},{key:"setTranslationFromFloats",value:function(t,e,n){return this._m[12]=t,this._m[13]=e,this._m[14]=n,this.markAsUpdated(),this}},{key:"addTranslationFromFloats",value:function(t,e,n){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=n,this.markAsUpdated(),this}},{key:"setTranslation",value:function(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}},{key:"getTranslation",value:function(){return new _(this._m[12],this._m[13],this._m[14])}},{key:"getTranslationToRef",value:function(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],t}},{key:"removeRotationAndScaling",value:function(){var e=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],e[15],this),this._updateIdentityStatus(0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]),this}},{key:"multiply",value:function(t){var e=new this.constructor;return this.multiplyToRef(t,e),e}},{key:"copyFrom",value:function(t){t.copyToArray(this._m);var e=t;return this.updateFlag=e.updateFlag,this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this}},{key:"copyToArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._m;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],this}},{key:"multiplyToRef",value:function(t,e){return this._isIdentity?(e.copyFrom(t),e):t._isIdentity?(e.copyFrom(this),e):(this.multiplyToArray(t,e._m,0),e.markAsUpdated(),e)}},{key:"multiplyToArray",value:function(t,e,n){var r=this._m,i=t.m,o=r[0],a=r[1],u=r[2],s=r[3],y=r[4],h=r[5],l=r[6],c=r[7],_=r[8],f=r[9],v=r[10],m=r[11],x=r[12],R=r[13],k=r[14],d=r[15],z=i[0],T=i[1],w=i[2],p=i[3],F=i[4],g=i[5],M=i[6],I=i[7],D=i[8],P=i[9],A=i[10],V=i[11],C=i[12],L=i[13],H=i[14],O=i[15];return e[n]=o*z+a*F+u*D+s*C,e[n+1]=o*T+a*g+u*P+s*L,e[n+2]=o*w+a*M+u*A+s*H,e[n+3]=o*p+a*I+u*V+s*O,e[n+4]=y*z+h*F+l*D+c*C,e[n+5]=y*T+h*g+l*P+c*L,e[n+6]=y*w+h*M+l*A+c*H,e[n+7]=y*p+h*I+l*V+c*O,e[n+8]=_*z+f*F+v*D+m*C,e[n+9]=_*T+f*g+v*P+m*L,e[n+10]=_*w+f*M+v*A+m*H,e[n+11]=_*p+f*I+v*V+m*O,e[n+12]=x*z+R*F+k*D+d*C,e[n+13]=x*T+R*g+k*P+d*L,e[n+14]=x*w+R*M+k*A+d*H,e[n+15]=x*p+R*I+k*V+d*O,this}},{key:"equals",value:function(t){var e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;var n=this.m,r=e.m;return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]&&n[9]===r[9]&&n[10]===r[10]&&n[11]===r[11]&&n[12]===r[12]&&n[13]===r[13]&&n[14]===r[14]&&n[15]===r[15]}},{key:"clone",value:function(){var t=new this.constructor;return t.copyFrom(this),t}},{key:"getClassName",value:function(){return"Matrix"}},{key:"getHashCode",value:function(){for(var t=l(this._m[0]),e=1;e<16;e++)t=397*t^l(this._m[e]);return t}},{key:"decomposeToTransformNode",value:function(t){return t.rotationQuaternion=t.rotationQuaternion||new v,this.decompose(t.scaling,t.rotationQuaternion,t.position)}},{key:"decompose",value:function(e,n,r,i){if(this._isIdentity)return r&&r.setAll(0),e&&e.setAll(1),n&&n.copyFromFloats(0,0,0,1),!0;var o=this._m;if(r&&r.copyFromFloats(o[12],o[13],o[14]),(e=e||x.Vector3[0]).x=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]),e.y=Math.sqrt(o[4]*o[4]+o[5]*o[5]+o[6]*o[6]),e.z=Math.sqrt(o[8]*o[8]+o[9]*o[9]+o[10]*o[10]),i){var a=i.scaling.x<0?-1:1,u=i.scaling.y<0?-1:1,s=i.scaling.z<0?-1:1;e.x*=a,e.y*=u,e.z*=s}else this.determinant()<=0&&(e.y*=-1);if(0===e._x||0===e._y||0===e._z)return n&&n.copyFromFloats(0,0,0,1),!1;if(n){var y=1/e._x,h=1/e._y,l=1/e._z;t.FromValuesToRef(o[0]*y,o[1]*y,o[2]*y,0,o[4]*h,o[5]*h,o[6]*h,0,o[8]*l,o[9]*l,o[10]*l,0,0,0,0,1,x.Matrix[0]),v.FromRotationMatrixToRef(x.Matrix[0],n)}return!0}},{key:"getRow",value:function(t){if(t<0||t>3)return null;var e=4*t;return new f(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}},{key:"getRowToRef",value:function(t,e){if(t>=0&&t<3){var n=4*t;e.x=this._m[n+0],e.y=this._m[n+1],e.z=this._m[n+2],e.w=this._m[n+3]}return e}},{key:"setRow",value:function(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}},{key:"transpose",value:function(){var e=new this.constructor;return t.TransposeToRef(this,e),e}},{key:"transposeToRef",value:function(e){return t.TransposeToRef(this,e),e}},{key:"setRowFromFloats",value:function(t,e,n,r,i){if(t<0||t>3)return this;var o=4*t;return this._m[o+0]=e,this._m[o+1]=n,this._m[o+2]=r,this._m[o+3]=i,this.markAsUpdated(),this}},{key:"scale",value:function(t){var e=new this.constructor;return this.scaleToRef(t,e),e}},{key:"scaleToRef",value:function(t,e){for(var n=0;n<16;n++)e._m[n]=this._m[n]*t;return e.markAsUpdated(),e}},{key:"scaleAndAddToRef",value:function(t,e){for(var n=0;n<16;n++)e._m[n]+=this._m[n]*t;return e.markAsUpdated(),e}},{key:"toNormalMatrix",value:function(e){var n=x.Matrix[0];this.invertToRef(n),n.transposeToRef(e);var r=e._m;return t.FromValuesToRef(r[0],r[1],r[2],0,r[4],r[5],r[6],0,r[8],r[9],r[10],0,0,0,0,1,e),e}},{key:"getRotationMatrix",value:function(){var t=new this.constructor;return this.getRotationMatrixToRef(t),t}},{key:"getRotationMatrixToRef",value:function(e){var n=x.Vector3[0];if(!this.decompose(n))return t.IdentityToRef(e),e;var r=this._m,i=1/n._x,o=1/n._y,a=1/n._z;return t.FromValuesToRef(r[0]*i,r[1]*i,r[2]*i,0,r[4]*o,r[5]*o,r[6]*o,0,r[8]*a,r[9]*a,r[10]*a,0,0,0,0,1,e),e}},{key:"toggleModelMatrixHandInPlace",value:function(){var t=this._m;return t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated(),this}},{key:"toggleProjectionMatrixHandInPlace",value:function(){var t=this._m;return t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated(),this}}],[{key:"Use64Bits",get:function(){return y.Z.MatrixUse64Bits}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new t;return t.FromArrayToRef(e,n,r),r}},{key:"FromArrayToRef",value:function(t,e,n){for(var r=0;r<16;r++)n._m[r]=t[r+e];return n.markAsUpdated(),n}},{key:"FromFloat32ArrayToRefScaled",value:function(t,e,n,r){for(var i=0;i<16;i++)r._m[i]=t[i+e]*n;return r.markAsUpdated(),r}},{key:"IdentityReadOnly",get:function(){return t._IdentityReadOnly}},{key:"FromValuesToRef",value:function(t,e,n,r,i,o,a,u,s,y,h,l,c,_,f,v,m){var x=m._m;x[0]=t,x[1]=e,x[2]=n,x[3]=r,x[4]=i,x[5]=o,x[6]=a,x[7]=u,x[8]=s,x[9]=y,x[10]=h,x[11]=l,x[12]=c,x[13]=_,x[14]=f,x[15]=v,m.markAsUpdated()}},{key:"FromValues",value:function(e,n,r,i,o,a,u,s,y,h,l,c,_,f,v,m){var x=new t,R=x._m;return R[0]=e,R[1]=n,R[2]=r,R[3]=i,R[4]=o,R[5]=a,R[6]=u,R[7]=s,R[8]=y,R[9]=h,R[10]=l,R[11]=c,R[12]=_,R[13]=f,R[14]=v,R[15]=m,x.markAsUpdated(),x}},{key:"Compose",value:function(e,n,r){var i=new t;return t.ComposeToRef(e,n,r,i),i}},{key:"ComposeToRef",value:function(t,e,n,r){var i=r._m,o=e._x,a=e._y,u=e._z,s=e._w,y=o+o,h=a+a,l=u+u,c=o*y,_=o*h,f=o*l,v=a*h,m=a*l,x=u*l,R=s*y,k=s*h,d=s*l,z=t._x,T=t._y,w=t._z;return i[0]=(1-(v+x))*z,i[1]=(_+d)*z,i[2]=(f-k)*z,i[3]=0,i[4]=(_-d)*T,i[5]=(1-(c+x))*T,i[6]=(m+R)*T,i[7]=0,i[8]=(f+k)*w,i[9]=(m-R)*w,i[10]=(1-(c+v))*w,i[11]=0,i[12]=n._x,i[13]=n._y,i[14]=n._z,i[15]=1,r.markAsUpdated(),r}},{key:"Identity",value:function(){var e=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e._updateIdentityStatus(!0),e}},{key:"IdentityToRef",value:function(e){return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(!0),e}},{key:"Zero",value:function(){var e=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e._updateIdentityStatus(!1),e}},{key:"RotationX",value:function(e){var n=new t;return t.RotationXToRef(e,n),n}},{key:"Invert",value:function(t){var e=new t.constructor;return t.invertToRef(e),e}},{key:"RotationXToRef",value:function(e,n){var r=Math.sin(e),i=Math.cos(e);return t.FromValuesToRef(1,0,0,0,0,i,r,0,0,-r,i,0,0,0,0,1,n),n._updateIdentityStatus(1===i&&0===r),n}},{key:"RotationY",value:function(e){var n=new t;return t.RotationYToRef(e,n),n}},{key:"RotationYToRef",value:function(e,n){var r=Math.sin(e),i=Math.cos(e);return t.FromValuesToRef(i,0,-r,0,0,1,0,0,r,0,i,0,0,0,0,1,n),n._updateIdentityStatus(1===i&&0===r),n}},{key:"RotationZ",value:function(e){var n=new t;return t.RotationZToRef(e,n),n}},{key:"RotationZToRef",value:function(e,n){var r=Math.sin(e),i=Math.cos(e);return t.FromValuesToRef(i,r,0,0,-r,i,0,0,0,0,1,0,0,0,0,1,n),n._updateIdentityStatus(1===i&&0===r),n}},{key:"RotationAxis",value:function(e,n){var r=new t;return t.RotationAxisToRef(e,n,r),r}},{key:"RotationAxisToRef",value:function(t,e,n){var r=Math.sin(-e),i=Math.cos(-e),o=1-i;t.normalize();var a=n._m;return a[0]=t._x*t._x*o+i,a[1]=t._x*t._y*o-t._z*r,a[2]=t._x*t._z*o+t._y*r,a[3]=0,a[4]=t._y*t._x*o+t._z*r,a[5]=t._y*t._y*o+i,a[6]=t._y*t._z*o-t._x*r,a[7]=0,a[8]=t._z*t._x*o-t._y*r,a[9]=t._z*t._y*o+t._x*r,a[10]=t._z*t._z*o+i,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,n.markAsUpdated(),n}},{key:"RotationAlignToRef",value:function(t,e,n){var r=_.Dot(e,t),i=n._m;if(r<-1+a.kn)i[0]=-1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0;else{var o=_.Cross(e,t),u=1/(1+r);i[0]=o._x*o._x*u+r,i[1]=o._y*o._x*u-o._z,i[2]=o._z*o._x*u+o._y,i[3]=0,i[4]=o._x*o._y*u+o._z,i[5]=o._y*o._y*u+r,i[6]=o._z*o._y*u-o._x,i[7]=0,i[8]=o._x*o._z*u-o._y,i[9]=o._y*o._z*u+o._x,i[10]=o._z*o._z*u+r,i[11]=0}return i[12]=0,i[13]=0,i[14]=0,i[15]=1,n.markAsUpdated(),n}},{key:"RotationYawPitchRoll",value:function(e,n,r){var i=new t;return t.RotationYawPitchRollToRef(e,n,r,i),i}},{key:"RotationYawPitchRollToRef",value:function(t,e,n,r){return v.RotationYawPitchRollToRef(t,e,n,x.Quaternion[0]),x.Quaternion[0].toRotationMatrix(r),r}},{key:"Scaling",value:function(e,n,r){var i=new t;return t.ScalingToRef(e,n,r,i),i}},{key:"ScalingToRef",value:function(e,n,r,i){return t.FromValuesToRef(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1,i),i._updateIdentityStatus(1===e&&1===n&&1===r),i}},{key:"Translation",value:function(e,n,r){var i=new t;return t.TranslationToRef(e,n,r,i),i}},{key:"TranslationToRef",value:function(e,n,r,i){return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1,i),i._updateIdentityStatus(0===e&&0===n&&0===r),i}},{key:"Lerp",value:function(e,n,r){var i=new e.constructor;return t.LerpToRef(e,n,r,i),i}},{key:"LerpToRef",value:function(t,e,n,r){for(var i=r._m,o=t.m,a=e.m,u=0;u<16;u++)i[u]=o[u]*(1-n)+a[u]*n;return r.markAsUpdated(),r}},{key:"DecomposeLerp",value:function(e,n,r){var i=new e.constructor;return t.DecomposeLerpToRef(e,n,r,i),i}},{key:"DecomposeLerpToRef",value:function(e,n,r,i){var o=x.Vector3[0],a=x.Quaternion[0],u=x.Vector3[1];e.decompose(o,a,u);var s=x.Vector3[2],y=x.Quaternion[1],h=x.Vector3[3];n.decompose(s,y,h);var l=x.Vector3[4];_.LerpToRef(o,s,r,l);var c=x.Quaternion[2];v.SlerpToRef(a,y,r,c);var f=x.Vector3[5];return _.LerpToRef(u,h,r,f),t.ComposeToRef(l,c,f,i),i}},{key:"LookAtLH",value:function(e,n,r){var i=new t;return t.LookAtLHToRef(e,n,r,i),i}},{key:"LookAtLHToRef",value:function(e,n,r,i){var o=x.Vector3[0],a=x.Vector3[1],u=x.Vector3[2];n.subtractToRef(e,u),u.normalize(),_.CrossToRef(r,u,o);var s=o.lengthSquared();0===s?o.x=1:o.normalizeFromLength(Math.sqrt(s)),_.CrossToRef(u,o,a),a.normalize();var y=-_.Dot(o,e),h=-_.Dot(a,e),l=-_.Dot(u,e);t.FromValuesToRef(o._x,a._x,u._x,0,o._y,a._y,u._y,0,o._z,a._z,u._z,0,y,h,l,1,i)}},{key:"LookAtRH",value:function(e,n,r){var i=new t;return t.LookAtRHToRef(e,n,r,i),i}},{key:"LookAtRHToRef",value:function(e,n,r,i){var o=x.Vector3[0],a=x.Vector3[1],u=x.Vector3[2];e.subtractToRef(n,u),u.normalize(),_.CrossToRef(r,u,o);var s=o.lengthSquared();0===s?o.x=1:o.normalizeFromLength(Math.sqrt(s)),_.CrossToRef(u,o,a),a.normalize();var y=-_.Dot(o,e),h=-_.Dot(a,e),l=-_.Dot(u,e);return t.FromValuesToRef(o._x,a._x,u._x,0,o._y,a._y,u._y,0,o._z,a._z,u._z,0,y,h,l,1,i),i}},{key:"LookDirectionLH",value:function(e,n){var r=new t;return t.LookDirectionLHToRef(e,n,r),r}},{key:"LookDirectionLHToRef",value:function(e,n,r){var i=x.Vector3[0];i.copyFrom(e),i.scaleInPlace(-1);var o=x.Vector3[1];return _.CrossToRef(n,i,o),t.FromValuesToRef(o._x,o._y,o._z,0,n._x,n._y,n._z,0,i._x,i._y,i._z,0,0,0,0,1,r),r}},{key:"LookDirectionRH",value:function(e,n){var r=new t;return t.LookDirectionRHToRef(e,n,r),r}},{key:"LookDirectionRHToRef",value:function(e,n,r){var i=x.Vector3[2];return _.CrossToRef(n,e,i),t.FromValuesToRef(i._x,i._y,i._z,0,n._x,n._y,n._z,0,e._x,e._y,e._z,0,0,0,0,1,r),r}},{key:"OrthoLH",value:function(e,n,r,i,o){var a=new t;return t.OrthoLHToRef(e,n,r,i,a,o),a}},{key:"OrthoLHToRef",value:function(e,n,r,i,o,a){var u=2/e,s=2/n,y=2/(i-r),h=-(i+r)/(i-r);return t.FromValuesToRef(u,0,0,0,0,s,0,0,0,0,y,0,0,0,h,1,o),a&&o.multiplyToRef(k,o),o._updateIdentityStatus(1===u&&1===s&&1===y&&0===h),o}},{key:"OrthoOffCenterLH",value:function(e,n,r,i,o,a,u){var s=new t;return t.OrthoOffCenterLHToRef(e,n,r,i,o,a,s,u),s}},{key:"OrthoOffCenterLHToRef",value:function(e,n,r,i,o,a,u,s){var y=2/(n-e),h=2/(i-r),l=2/(a-o),c=-(a+o)/(a-o),_=(e+n)/(e-n),f=(i+r)/(r-i);return t.FromValuesToRef(y,0,0,0,0,h,0,0,0,0,l,0,_,f,c,1,u),s&&u.multiplyToRef(k,u),u.markAsUpdated(),u}},{key:"OrthoOffCenterRH",value:function(e,n,r,i,o,a,u){var s=new t;return t.OrthoOffCenterRHToRef(e,n,r,i,o,a,s,u),s}},{key:"OrthoOffCenterRHToRef",value:function(e,n,r,i,o,a,u,s){return t.OrthoOffCenterLHToRef(e,n,r,i,o,a,u,s),u._m[10]*=-1,u}},{key:"PerspectiveLH",value:function(e,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=new t,s=r,y=i,h=2*s/e,l=2*s/n,c=(y+s)/(y-s),_=-2*y*s/(y-s),f=Math.tan(a);return t.FromValuesToRef(h,0,0,0,0,l,0,f,0,0,c,1,0,0,_,0,u),o&&u.multiplyToRef(k,u),u._updateIdentityStatus(!1),u}},{key:"PerspectiveFovLH",value:function(e,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=new t;return t.PerspectiveFovLHToRef(e,n,r,i,s,!0,o,a,u),s}},{key:"PerspectiveFovLHToRef",value:function(e,n,r,i,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=r,l=i,c=1/Math.tan(.5*e),_=a?c/n:c,f=a?c:c*n,v=y&&0===h?-1:0!==l?(l+h)/(l-h):1,m=y&&0===h?2*l:0!==l?-2*l*h/(l-h):-2*h,x=Math.tan(s);return t.FromValuesToRef(_,0,0,0,0,f,0,x,0,0,v,1,0,0,m,0,o),u&&o.multiplyToRef(k,o),o._updateIdentityStatus(!1),o}},{key:"PerspectiveFovReverseLHToRef",value:function(e,n,r,i,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=1/Math.tan(.5*e),h=a?y/n:y,l=a?y:y*n,c=Math.tan(s);return t.FromValuesToRef(h,0,0,0,0,l,0,c,0,0,-r,1,0,0,1,0,o),u&&o.multiplyToRef(k,o),o._updateIdentityStatus(!1),o}},{key:"PerspectiveFovRH",value:function(e,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=new t;return t.PerspectiveFovRHToRef(e,n,r,i,s,!0,o,a,u),s}},{key:"PerspectiveFovRHToRef",value:function(e,n,r,i,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=r,l=i,c=1/Math.tan(.5*e),_=a?c/n:c,f=a?c:c*n,v=y&&0===h?1:0!==l?-(l+h)/(l-h):-1,m=y&&0===h?2*l:0!==l?-2*l*h/(l-h):-2*h,x=Math.tan(s);return t.FromValuesToRef(_,0,0,0,0,f,0,x,0,0,v,-1,0,0,m,0,o),u&&o.multiplyToRef(k,o),o._updateIdentityStatus(!1),o}},{key:"PerspectiveFovReverseRHToRef",value:function(e,n,r,i,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=1/Math.tan(.5*e),h=a?y/n:y,l=a?y:y*n,c=Math.tan(s);return t.FromValuesToRef(h,0,0,0,0,l,0,c,0,0,-r,-1,0,0,-1,0,o),u&&o.multiplyToRef(k,o),o._updateIdentityStatus(!1),o}},{key:"PerspectiveFovWebVRToRef",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=i?-1:1,s=Math.tan(t.upDegrees*Math.PI/180),y=Math.tan(t.downDegrees*Math.PI/180),h=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),c=2/(h+l),_=2/(s+y),f=Math.tan(a),v=r._m;return v[0]=c,v[1]=v[2]=v[3]=v[4]=0,v[5]=_,v[6]=0,v[7]=f,v[8]=(h-l)*c*.5,v[9]=-(s-y)*_*.5,v[10]=-n/(e-n),v[11]=1*u,v[12]=v[13]=v[15]=0,v[14]=-2*n*e/(n-e),o&&r.multiplyToRef(k,r),r.markAsUpdated(),r}},{key:"GetFinalMatrix",value:function(e,n,r,i,o,a){var u=e.width,s=e.height,y=e.x,h=e.y,l=t.FromValues(u/2,0,0,0,0,-s/2,0,0,0,0,a-o,0,y+u/2,s/2+h,o,1),c=new n.constructor;return n.multiplyToRef(r,c),c.multiplyToRef(i,c),c.multiplyToRef(l,c)}},{key:"GetAsMatrix2x2",value:function(t){var e=t.m,n=[e[0],e[1],e[4],e[5]];return y.Z.MatrixUse64Bits?n:new Float32Array(n)}},{key:"GetAsMatrix3x3",value:function(t){var e=t.m,n=[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];return y.Z.MatrixUse64Bits?n:new Float32Array(n)}},{key:"Transpose",value:function(e){var n=new e.constructor;return t.TransposeToRef(e,n),n}},{key:"TransposeToRef",value:function(t,e){var n=e._m,r=t.m;return n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15],e.markAsUpdated(),e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty),e}},{key:"Reflection",value:function(e){var n=new t;return t.ReflectionToRef(e,n),n}},{key:"ReflectionToRef",value:function(e,n){e.normalize();var r=e.normal.x,i=e.normal.y,o=e.normal.z,a=-2*r,u=-2*i,s=-2*o;return t.FromValuesToRef(a*r+1,u*r,s*r,0,a*i,u*i+1,s*i,0,a*o,u*o,s*o+1,0,a*e.d,u*e.d,s*e.d,1,n),n}},{key:"FromXYZAxesToRef",value:function(e,n,r,i){return t.FromValuesToRef(e._x,e._y,e._z,0,n._x,n._y,n._z,0,r._x,r._y,r._z,0,0,0,0,1,i),i}},{key:"FromQuaternionToRef",value:function(t,e){var n=t._x*t._x,r=t._y*t._y,i=t._z*t._z,o=t._x*t._y,a=t._z*t._w,u=t._z*t._x,s=t._y*t._w,y=t._y*t._z,h=t._x*t._w;return e._m[0]=1-2*(r+i),e._m[1]=2*(o+a),e._m[2]=2*(u-s),e._m[3]=0,e._m[4]=2*(o-a),e._m[5]=1-2*(i+n),e._m[6]=2*(y+h),e._m[7]=0,e._m[8]=2*(u+s),e._m[9]=2*(y-h),e._m[10]=1-2*(r+n),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e.markAsUpdated(),e}}]),t}();m._UpdateFlagSeed=0,m._IdentityReadOnly=m.Identity();var x=(0,i.Z)((function t(){(0,r.Z)(this,t)}));x.Vector3=u.B.BuildTuple(11,_.Zero),x.Matrix=u.B.BuildTuple(2,m.Identity),x.Quaternion=u.B.BuildTuple(3,v.Zero);var R=(0,i.Z)((function t(){(0,r.Z)(this,t)}));R.Vector2=u.B.BuildTuple(3,c.Zero),R.Vector3=u.B.BuildTuple(13,_.Zero),R.Vector4=u.B.BuildTuple(3,f.Zero),R.Quaternion=u.B.BuildTuple(2,v.Zero),R.Matrix=u.B.BuildTuple(8,m.Identity),(0,s.H)("BABYLON.Vector2",c),(0,s.H)("BABYLON.Vector3",_),(0,s.H)("BABYLON.Vector4",f),(0,s.H)("BABYLON.Matrix",m);var k=m.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)}}]);
//# sourceMappingURL=25284372-f82d3e9ab06e0a327cc4.js.map