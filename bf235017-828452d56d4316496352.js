"use strict";(self.webpackChunk_react_babylonjs_docs=self.webpackChunk_react_babylonjs_docs||[]).push([[309],{84562:function(t,e,n){n.d(e,{FM:function(){return c},Lt:function(){return v},P:function(){return f},_f:function(){return _},jp:function(){return k},y3:function(){return m}});var r=n(9249),o=n(87371),i=n(61287),a=n(41306),u=n(72209),s=n(46275),y=n(47736),h=n(38962),l=function(t){return parseInt(t.toString().replace(/\W/g,""))},c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,r.Z)(this,t),this.x=e,this.y=n}return(0,o.Z)(t,[{key:"toString",value:function(){return"{X: ".concat(this.x," Y: ").concat(this.y,"}")}},{key:"getClassName",value:function(){return"Vector2"}},{key:"getHashCode",value:function(){var t=l(this.x);return t=397*t^l(this.y)}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"asArray",value:function(){var t=new Array;return this.toArray(t,0),t}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"copyFromFloats",value:function(t,e){return this.x=t,this.y=e,this}},{key:"set",value:function(t,e){return this.copyFromFloats(t,e)}},{key:"add",value:function(t){return new this.constructor(this.x+t.x,this.y+t.y)}},{key:"addToRef",value:function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e}},{key:"addInPlace",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"addVector3",value:function(t){return new this.constructor(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new this.constructor(this.x-t.x,this.y-t.y)}},{key:"subtractToRef",value:function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e}},{key:"subtractInPlace",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiplyInPlace",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiply",value:function(t){return new this.constructor(this.x*t.x,this.y*t.y)}},{key:"multiplyToRef",value:function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e}},{key:"multiplyByFloats",value:function(t,e){return new this.constructor(this.x*t,this.y*e)}},{key:"divide",value:function(t){return new this.constructor(this.x/t.x,this.y/t.y)}},{key:"divideToRef",value:function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"negate",value:function(){return new this.constructor(-this.x,-this.y)}},{key:"negateInPlace",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this.x,-1*this.y)}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this}},{key:"scale",value:function(t){var e=new this.constructor(0,0);return this.scaleToRef(t,e),e}},{key:"scaleToRef",value:function(t,e){return e.x=this.x*t,e.y=this.y*t,e}},{key:"scaleAndAddToRef",value:function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e}},{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&i.R.WithinEpsilon(this.x,t.x,e)&&i.R.WithinEpsilon(this.y,t.y,e)}},{key:"floor",value:function(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))}},{key:"fract",value:function(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}},{key:"rotateToRef",value:function(t,e){var n=Math.cos(t),r=Math.sin(t);return e.x=n*this.x-r*this.y,e.y=r*this.x+n*this.y,e}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){return t.NormalizeToRef(this,this),this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}}],[{key:"Zero",value:function(){return new t(0,0)}},{key:"One",value:function(){return new t(1,1)}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e[n],e[n+1])}},{key:"FromArrayToRef",value:function(t,e,n){return n.x=t[e],n.y=t[e+1],n}},{key:"CatmullRom",value:function(t,e,n,r,o){var i=o*o,a=o*i,u=.5*(2*e.x+(-t.x+n.x)*o+(2*t.x-5*e.x+4*n.x-r.x)*i+(-t.x+3*e.x-3*n.x+r.x)*a),s=.5*(2*e.y+(-t.y+n.y)*o+(2*t.y-5*e.y+4*n.y-r.y)*i+(-t.y+3*e.y-3*n.y+r.y)*a);return new t.constructor(u,s)}},{key:"Clamp",value:function(t,e,n){var r=t.x;r=(r=r>n.x?n.x:r)<e.x?e.x:r;var o=t.y;return o=(o=o>n.y?n.y:o)<e.y?e.y:o,new t.constructor(r,o)}},{key:"Hermite",value:function(t,e,n,r,o){var i=o*o,a=o*i,u=2*a-3*i+1,s=-2*a+3*i,y=a-2*i+o,h=a-i,l=t.x*u+n.x*s+e.x*y+r.x*h,c=t.y*u+n.y*s+e.y*y+r.y*h;return new t.constructor(l,c)}},{key:"Hermite1stDerivative",value:function(t,e,n,r,o){var i=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,n,r,o,i),i}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,r,o,i){var a=o*o;return i.x=6*(a-o)*t.x+(3*a-4*o+1)*e.x+6*(-a+o)*n.x+(3*a-2*o)*r.x,i.y=6*(a-o)*t.y+(3*a-4*o+1)*e.y+6*(-a+o)*n.y+(3*a-2*o)*r.y,i}},{key:"Lerp",value:function(t,e,n){var r=t.x+(e.x-t.x)*n,o=t.y+(e.y-t.y)*n;return new t.constructor(r,o)}},{key:"Dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"Normalize",value:function(t){var e=new t.constructor;return this.NormalizeToRef(t,e),e}},{key:"NormalizeToRef",value:function(t,e){var n=t.length();return 0===n||(e.x=t.x/n,e.y=t.y/n),e}},{key:"Minimize",value:function(t,e){var n=t.x<e.x?t.x:e.x,r=t.y<e.y?t.y:e.y;return new t.constructor(n,r)}},{key:"Maximize",value:function(t,e){var n=t.x>e.x?t.x:e.x,r=t.y>e.y?t.y:e.y;return new t.constructor(n,r)}},{key:"Transform",value:function(e,n){var r=new e.constructor;return t.TransformToRef(e,n,r),r}},{key:"TransformToRef",value:function(t,e,n){var r=e.m,o=t.x*r[0]+t.y*r[4]+r[12],i=t.x*r[1]+t.y*r[5]+r[13];return n.x=o,n.y=i,n}},{key:"PointInTriangle",value:function(t,e,n,r){var o=.5*(-n.y*r.x+e.y*(-n.x+r.x)+e.x*(n.y-r.y)+n.x*r.y),i=o<0?-1:1,a=(e.y*r.x-e.x*r.y+(r.y-e.y)*t.x+(e.x-r.x)*t.y)*i,u=(e.x*n.y-e.y*n.x+(e.y-n.y)*t.x+(n.x-e.x)*t.y)*i;return a>0&&u>0&&a+u<2*o*i}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}},{key:"Center",value:function(e,n){var r=new e.constructor;return t.CenterToRef(e,n,r)}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2)}},{key:"DistanceOfPointFromSegment",value:function(e,n,r){var o=t.DistanceSquared(n,r);if(0===o)return t.Distance(e,n);var i=r.subtract(n),a=Math.max(0,Math.min(1,t.Dot(e.subtract(n),i)/o)),u=n.add(i.multiplyByFloats(a,a));return t.Distance(e,u)}}]),t}();c._ZeroReadOnly=c.Zero();var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,r.Z)(this,t),this._isDirty=!0,this._x=e,this._y=n,this._z=o}return(0,o.Z)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0}},{key:"toString",value:function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z,"}")}},{key:"getClassName",value:function(){return"Vector3"}},{key:"getHashCode",value:function(){var t=l(this._x);return t=397*(t=397*t^l(this._y))^l(this._z)}},{key:"asArray",value:function(){var t=[];return this.toArray(t,0),t}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"toQuaternion",value:function(){return _.RotationYawPitchRoll(this._y,this._x,this._z)}},{key:"addInPlace",value:function(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)}},{key:"addInPlaceFromFloats",value:function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this}},{key:"add",value:function(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z)}},{key:"addToRef",value:function(t,e){return e.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)}},{key:"subtractInPlace",value:function(t){return this.x-=t._x,this.y-=t._y,this.z-=t._z,this}},{key:"subtract",value:function(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z)}},{key:"subtractToRef",value:function(t,e){return this.subtractFromFloatsToRef(t._x,t._y,t._z,e)}},{key:"subtractFromFloats",value:function(t,e,n){return new this.constructor(this._x-t,this._y-e,this._z-n)}},{key:"subtractFromFloatsToRef",value:function(t,e,n,r){return r.copyFromFloats(this._x-t,this._y-e,this._z-n)}},{key:"negate",value:function(){return new this.constructor(-this._x,-this._y,-this._z)}},{key:"negateInPlace",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"scale",value:function(t){return new this.constructor(this._x*t,this._y*t,this._z*t)}},{key:"scaleToRef",value:function(t,e){return e.copyFromFloats(this._x*t,this._y*t,this._z*t)}},{key:"getNormalToRef",value:function(t){var e=this.length(),n=Math.acos(this.y/e),r=Math.atan2(this.z,this.x);n>Math.PI/2?n-=Math.PI/2:n+=Math.PI/2;var o=e*Math.sin(n)*Math.cos(r),i=e*Math.cos(n),a=e*Math.sin(n)*Math.sin(r);return t.set(o,i,a),t}},{key:"applyRotationQuaternionToRef",value:function(t,e){var n=t.w*this.x+t.y*this.z-t.z*this.y,r=t.w*this.y+t.z*this.x-t.x*this.z,o=t.w*this.z+t.x*this.y-t.y*this.x,i=-t.x*this.x-t.y*this.y-t.z*this.z;return e.x=n*t.w+i*-t.x+r*-t.z-o*-t.y,e.y=r*t.w+i*-t.y+o*-t.x-n*-t.z,e.z=o*t.w+i*-t.z+n*-t.y-r*-t.x,e}},{key:"applyRotationQuaternionInPlace",value:function(t){return this.applyRotationQuaternionToRef(t,this)}},{key:"applyRotationQuaternion",value:function(t){return this.applyRotationQuaternionToRef(t,new this.constructor)}},{key:"scaleAndAddToRef",value:function(t,e){return e.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)}},{key:"projectOnPlane",value:function(t,e){var n=new this.constructor;return this.projectOnPlaneToRef(t,e,n),n}},{key:"projectOnPlaneToRef",value:function(e,n,r){var o=e.normal,i=e.d,a=x.Vector3[0];this.subtractToRef(n,a),a.normalize();var u=t.Dot(a,o);if(Math.abs(u)<Math.pow(10,-10))r.setAll(1/0);else{var s=-(t.Dot(n,o)+i)/u,y=a.scaleInPlace(s);n.addToRef(y,r)}return r}},{key:"equals",value:function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&i.R.WithinEpsilon(this._x,t._x,e)&&i.R.WithinEpsilon(this._y,t._y,e)&&i.R.WithinEpsilon(this._z,t._z,e)}},{key:"equalsToFloats",value:function(t,e,n){return this._x===t&&this._y===e&&this._z===n}},{key:"multiplyInPlace",value:function(t){return this.x*=t._x,this.y*=t._y,this.z*=t._z,this}},{key:"multiply",value:function(t){return this.multiplyByFloats(t._x,t._y,t._z)}},{key:"multiplyToRef",value:function(t,e){return e.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)}},{key:"multiplyByFloats",value:function(t,e,n){return new this.constructor(this._x*t,this._y*e,this._z*n)}},{key:"divide",value:function(t){return new this.constructor(this._x/t._x,this._y/t._y,this._z/t._z)}},{key:"divideToRef",value:function(t,e){return e.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"minimizeInPlace",value:function(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}},{key:"maximizeInPlace",value:function(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}},{key:"minimizeInPlaceFromFloats",value:function(t,e,n){return t<this._x&&(this.x=t),e<this._y&&(this.y=e),n<this._z&&(this.z=n),this}},{key:"maximizeInPlaceFromFloats",value:function(t,e,n){return t>this._x&&(this.x=t),e>this._y&&(this.y=e),n>this._z&&(this.z=n),this}},{key:"isNonUniformWithinEpsilon",value:function(t){var e=Math.abs(this._x),n=Math.abs(this._y);if(!i.R.WithinEpsilon(e,n,t))return!0;var r=Math.abs(this._z);return!i.R.WithinEpsilon(e,r,t)||!i.R.WithinEpsilon(n,r,t)}},{key:"isNonUniform",get:function(){var t=Math.abs(this._x);return t!==Math.abs(this._y)||t!==Math.abs(this._z)}},{key:"floor",value:function(){return new this.constructor(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))}},{key:"fract",value:function(){return new this.constructor(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}},{key:"lengthSquared",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z}},{key:"hasAZeroComponent",get:function(){return this._x*this._y*this._z==0}},{key:"normalize",value:function(){return this.normalizeFromLength(this.length())}},{key:"reorderInPlace",value:function(t){var e=this;return"xyz"===(t=t.toLowerCase())||(x.Vector3[0].copyFrom(this),["x","y","z"].forEach((function(n,r){e[n]=x.Vector3[0][t[r]]}))),this}},{key:"rotateByQuaternionToRef",value:function(e,n){return e.toRotationMatrix(x.Matrix[0]),t.TransformCoordinatesToRef(this,x.Matrix[0],n),n}},{key:"rotateByQuaternionAroundPointToRef",value:function(t,e,n){return this.subtractToRef(e,x.Vector3[0]),x.Vector3[0].rotateByQuaternionToRef(t,x.Vector3[0]),e.addToRef(x.Vector3[0],n),n}},{key:"cross",value:function(e){var n=new this.constructor;return t.CrossToRef(this,e,n)}},{key:"normalizeFromLength",value:function(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}},{key:"normalizeToNew",value:function(){var t=new this.constructor(0,0,0);return this.normalizeToRef(t),t}},{key:"normalizeToRef",value:function(t){var e=this.length();return 0===e||1===e?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/e,t)}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z)}},{key:"copyFrom",value:function(t){return this.copyFromFloats(t._x,t._y,t._z)}},{key:"copyFromFloats",value:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},{key:"set",value:function(t,e,n){return this.copyFromFloats(t,e,n)}},{key:"setAll",value:function(t){return this.x=this.y=this.z=t,this}}],[{key:"GetClipFactor",value:function(e,n,r,o){var i=t.Dot(e,r)-o;return i/(i-(t.Dot(n,r)-o))}},{key:"GetAngleBetweenVectors",value:function(e,n,r){var o=e.normalizeToRef(x.Vector3[1]),a=n.normalizeToRef(x.Vector3[2]),u=t.Dot(o,a);u=i.R.Clamp(u,-1,1);var s=Math.acos(u),y=x.Vector3[3];return t.CrossToRef(o,a,y),t.Dot(y,r)>0?isNaN(s)?0:s:isNaN(s)?-Math.PI:-Math.acos(u)}},{key:"GetAngleBetweenVectorsOnPlane",value:function(e,n,r){x.Vector3[0].copyFrom(e);var o=x.Vector3[0];x.Vector3[1].copyFrom(n);var a=x.Vector3[1];x.Vector3[2].copyFrom(r);var u=x.Vector3[2],s=x.Vector3[3],y=x.Vector3[4];o.normalize(),a.normalize(),u.normalize(),t.CrossToRef(u,o,s),t.CrossToRef(s,u,y);var h=Math.atan2(t.Dot(a,s),t.Dot(a,y));return i.R.NormalizeRadians(h)}},{key:"PitchYawRollToMoveBetweenPointsToRef",value:function(t,e,n){var r=k.Vector3[0];return e.subtractToRef(t,r),n.y=Math.atan2(r.x,r.z)||0,n.x=Math.atan2(Math.sqrt(Math.pow(r.x,2)+Math.pow(r.z,2)),r.y)||0,n.z=0,n}},{key:"PitchYawRollToMoveBetweenPoints",value:function(e,n){var r=t.Zero();return t.PitchYawRollToMoveBetweenPointsToRef(e,n,r)}},{key:"SlerpToRef",value:function(e,n,r,o){r=i.R.Clamp(r,0,1);var u=x.Vector3[0],s=x.Vector3[1];u.copyFrom(e);var y=u.length();u.normalizeFromLength(y),s.copyFrom(n);var h=s.length();s.normalizeFromLength(h);var l,c,f=t.Dot(u,s);if(f<1-a.kn){var v=Math.acos(f),_=1/Math.sin(v);l=Math.sin((1-r)*v)*_,c=Math.sin(r*v)*_}else l=1-r,c=r;return u.scaleInPlace(l),s.scaleInPlace(c),o.copyFrom(u).addInPlace(s),o.scaleInPlace(i.R.Lerp(y,h,r)),o}},{key:"SmoothToRef",value:function(e,n,r,o,i){return t.SlerpToRef(e,n,0===o?1:r/o,i),i}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e[n],e[n+1],e[n+2])}},{key:"FromFloatArray",value:function(e,n){return t.FromArray(e,n)}},{key:"FromArrayToRef",value:function(t,e,n){return n.x=t[e],n.y=t[e+1],n.z=t[e+2],n}},{key:"FromFloatArrayToRef",value:function(e,n,r){return t.FromArrayToRef(e,n,r)}},{key:"FromFloatsToRef",value:function(t,e,n,r){return r.copyFromFloats(t,e,n),r}},{key:"Zero",value:function(){return new t(0,0,0)}},{key:"One",value:function(){return new t(1,1,1)}},{key:"Up",value:function(){return new t(0,1,0)}},{key:"UpReadOnly",get:function(){return t._UpReadOnly}},{key:"DownReadOnly",get:function(){return t._DownReadOnly}},{key:"RightReadOnly",get:function(){return t._RightReadOnly}},{key:"LeftReadOnly",get:function(){return t._LeftReadOnly}},{key:"LeftHandedForwardReadOnly",get:function(){return t._LeftHandedForwardReadOnly}},{key:"RightHandedForwardReadOnly",get:function(){return t._RightHandedForwardReadOnly}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"Down",value:function(){return new t(0,-1,0)}},{key:"Forward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new t(0,0,e?-1:1)}},{key:"Backward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new t(0,0,e?1:-1)}},{key:"Right",value:function(){return new t(1,0,0)}},{key:"Left",value:function(){return new t(-1,0,0)}},{key:"TransformCoordinates",value:function(e,n){var r=t.Zero();return t.TransformCoordinatesToRef(e,n,r),r}},{key:"TransformCoordinatesToRef",value:function(e,n,r){return t.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,n,r),r}},{key:"TransformCoordinatesFromFloatsToRef",value:function(t,e,n,r,o){var i=r.m,a=t*i[0]+e*i[4]+n*i[8]+i[12],u=t*i[1]+e*i[5]+n*i[9]+i[13],s=t*i[2]+e*i[6]+n*i[10]+i[14],y=1/(t*i[3]+e*i[7]+n*i[11]+i[15]);return o.x=a*y,o.y=u*y,o.z=s*y,o}},{key:"TransformNormal",value:function(e,n){var r=t.Zero();return t.TransformNormalToRef(e,n,r),r}},{key:"TransformNormalToRef",value:function(t,e,n){return this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,e,n),n}},{key:"TransformNormalFromFloatsToRef",value:function(t,e,n,r,o){var i=r.m;return o.x=t*i[0]+e*i[4]+n*i[8],o.y=t*i[1]+e*i[5]+n*i[9],o.z=t*i[2]+e*i[6]+n*i[10],o}},{key:"CatmullRom",value:function(t,e,n,r,o){var i=o*o,a=o*i,u=.5*(2*e._x+(-t._x+n._x)*o+(2*t._x-5*e._x+4*n._x-r._x)*i+(-t._x+3*e._x-3*n._x+r._x)*a),s=.5*(2*e._y+(-t._y+n._y)*o+(2*t._y-5*e._y+4*n._y-r._y)*i+(-t._y+3*e._y-3*n._y+r._y)*a),y=.5*(2*e._z+(-t._z+n._z)*o+(2*t._z-5*e._z+4*n._z-r._z)*i+(-t._z+3*e._z-3*n._z+r._z)*a);return new t.constructor(u,s,y)}},{key:"Clamp",value:function(e,n,r){var o=new e.constructor;return t.ClampToRef(e,n,r,o),o}},{key:"ClampToRef",value:function(t,e,n,r){var o=t._x;o=(o=o>n._x?n._x:o)<e._x?e._x:o;var i=t._y;i=(i=i>n._y?n._y:i)<e._y?e._y:i;var a=t._z;return a=(a=a>n._z?n._z:a)<e._z?e._z:a,r.copyFromFloats(o,i,a),r}},{key:"CheckExtends",value:function(t,e,n){e.minimizeInPlace(t),n.maximizeInPlace(t)}},{key:"Hermite",value:function(t,e,n,r,o){var i=o*o,a=o*i,u=2*a-3*i+1,s=-2*a+3*i,y=a-2*i+o,h=a-i,l=t._x*u+n._x*s+e._x*y+r._x*h,c=t._y*u+n._y*s+e._y*y+r._y*h,f=t._z*u+n._z*s+e._z*y+r._z*h;return new t.constructor(l,c,f)}},{key:"Hermite1stDerivative",value:function(t,e,n,r,o){var i=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,n,r,o,i),i}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,r,o,i){var a=o*o;return i.x=6*(a-o)*t.x+(3*a-4*o+1)*e.x+6*(-a+o)*n.x+(3*a-2*o)*r.x,i.y=6*(a-o)*t.y+(3*a-4*o+1)*e.y+6*(-a+o)*n.y+(3*a-2*o)*r.y,i.z=6*(a-o)*t.z+(3*a-4*o+1)*e.z+6*(-a+o)*n.z+(3*a-2*o)*r.z,i}},{key:"Lerp",value:function(e,n,r){var o=new e.constructor(0,0,0);return t.LerpToRef(e,n,r,o),o}},{key:"LerpToRef",value:function(t,e,n,r){return r.x=t._x+(e._x-t._x)*n,r.y=t._y+(e._y-t._y)*n,r.z=t._z+(e._z-t._z)*n,r}},{key:"Dot",value:function(t,e){return t._x*e._x+t._y*e._y+t._z*e._z}},{key:"Cross",value:function(e,n){var r=new e.constructor;return t.CrossToRef(e,n,r),r}},{key:"CrossToRef",value:function(t,e,n){var r=t._y*e._z-t._z*e._y,o=t._z*e._x-t._x*e._z,i=t._x*e._y-t._y*e._x;return n.copyFromFloats(r,o,i),n}},{key:"Normalize",value:function(e){var n=t.Zero();return t.NormalizeToRef(e,n),n}},{key:"NormalizeToRef",value:function(t,e){return t.normalizeToRef(e),e}},{key:"Project",value:function(e,n,r,o){var i=new e.constructor;return t.ProjectToRef(e,n,r,o,i),i}},{key:"ProjectToRef",value:function(e,n,r,o,i){var a=o.width,u=o.height,s=o.x,y=o.y,h=x.Matrix[1];m.FromValuesToRef(a/2,0,0,0,0,-u/2,0,0,0,0,.5,0,s+a/2,u/2+y,.5,1,h);var l=x.Matrix[0];return n.multiplyToRef(r,l),l.multiplyToRef(h,l),t.TransformCoordinatesToRef(e,l,i),i}},{key:"Reflect",value:function(e,n){return this.ReflectToRef(e,n,new t)}},{key:"ReflectToRef",value:function(e,n,r){var o=k.Vector3[0];return o.copyFrom(n).scaleInPlace(2*t.Dot(e,n)),r.copyFrom(e).subtractInPlace(o)}},{key:"_UnprojectFromInvertedMatrixToRef",value:function(e,n,r){t.TransformCoordinatesToRef(e,n,r);var o=n.m,a=e._x*o[3]+e._y*o[7]+e._z*o[11]+o[15];return i.R.WithinEpsilon(a,1)&&r.scaleInPlace(1/a),r}},{key:"UnprojectFromTransform",value:function(t,e,n,r,o){return this.Unproject(t,e,n,r,o,m.IdentityReadOnly)}},{key:"Unproject",value:function(e,n,r,o,i,a){var u=new e.constructor;return t.UnprojectToRef(e,n,r,o,i,a,u),u}},{key:"UnprojectToRef",value:function(e,n,r,o,i,a,u){return t.UnprojectFloatsToRef(e._x,e._y,e._z,n,r,o,i,a,u),u}},{key:"UnprojectFloatsToRef",value:function(e,n,r,o,i,a,u,s,y){var l,c=x.Matrix[0];a.multiplyToRef(u,c),c.multiplyToRef(s,c),c.invert();var f=x.Vector3[0];return f.x=e/o*2-1,f.y=-(n/i*2-1),(null===(l=h.l.LastCreatedEngine)||void 0===l?void 0:l.isNDCHalfZRange)?f.z=r:f.z=2*r-1,t._UnprojectFromInvertedMatrixToRef(f,c,y),y}},{key:"Minimize",value:function(t,e){var n=new t.constructor;return n.copyFrom(t),n.minimizeInPlace(e),n}},{key:"Maximize",value:function(t,e){var n=new t.constructor;return n.copyFrom(t),n.maximizeInPlace(e),n}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t._x-e._x,r=t._y-e._y,o=t._z-e._z;return n*n+r*r+o*o}},{key:"ProjectOnTriangleToRef",value:function(e,n,r,o,u){var s=x.Vector3[0],y=x.Vector3[1],h=x.Vector3[2],l=x.Vector3[3],c=x.Vector3[4];r.subtractToRef(n,s),o.subtractToRef(n,y),o.subtractToRef(r,h);var f=s.length(),v=y.length(),_=h.length();if(f<a.kn||v<a.kn||_<a.kn)return u.copyFrom(n),t.Distance(e,n);e.subtractToRef(n,c),t.CrossToRef(s,y,l);var m=l.length();if(m<a.kn)return u.copyFrom(n),t.Distance(e,n);l.normalizeFromLength(m);var k=c.length();if(k<a.kn)return u.copyFrom(n),0;c.normalizeFromLength(k);var R=t.Dot(l,c),d=x.Vector3[5],z=x.Vector3[6];d.copyFrom(l).scaleInPlace(-k*R),z.copyFrom(e).addInPlace(d);var T=x.Vector3[4],w=x.Vector3[5],p=x.Vector3[7],F=x.Vector3[8];T.copyFrom(s).scaleInPlace(1/f),F.copyFrom(y).scaleInPlace(1/v),T.addInPlace(F).scaleInPlace(-1),w.copyFrom(s).scaleInPlace(-1/f),F.copyFrom(h).scaleInPlace(1/_),w.addInPlace(F).scaleInPlace(-1),p.copyFrom(h).scaleInPlace(-1/_),F.copyFrom(y).scaleInPlace(-1/v),p.addInPlace(F).scaleInPlace(-1);var g=x.Vector3[9];g.copyFrom(z).subtractInPlace(n),t.CrossToRef(T,g,F);var M=t.Dot(F,l);g.copyFrom(z).subtractInPlace(r),t.CrossToRef(w,g,F);var I=t.Dot(F,l);g.copyFrom(z).subtractInPlace(o),t.CrossToRef(p,g,F);var P,A,V=t.Dot(F,l),D=x.Vector3[10];M>0&&I<0?(D.copyFrom(s),P=n,A=r):I>0&&V<0?(D.copyFrom(h),P=r,A=o):(D.copyFrom(y).scaleInPlace(-1),P=o,A=n);var C=x.Vector3[9],L=x.Vector3[4];if(P.subtractToRef(z,F),A.subtractToRef(z,C),t.CrossToRef(F,C,L),!(t.Dot(L,l)<0))return u.copyFrom(z),Math.abs(k*R);var H=x.Vector3[5];t.CrossToRef(D,L,H),H.normalize();var Z=x.Vector3[9];Z.copyFrom(P).subtractInPlace(z);var O=Z.length();if(O<a.kn)return u.copyFrom(P),t.Distance(e,P);Z.normalizeFromLength(O);var S=t.Dot(H,Z),b=x.Vector3[7];b.copyFrom(z).addInPlace(H.scaleInPlace(O*S)),F.copyFrom(b).subtractInPlace(P),k=D.length(),D.normalizeFromLength(k);var U=t.Dot(F,D)/Math.max(k,a.kn);return U=i.R.Clamp(U,0,1),b.copyFrom(P).addInPlace(D.scaleInPlace(U*k)),u.copyFrom(b),t.Distance(e,b)}},{key:"Center",value:function(e,n){return t.CenterToRef(e,n,t.Zero())}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t._x+e._x)/2,(t._y+e._y)/2,(t._z+e._z)/2)}},{key:"RotationFromAxis",value:function(e,n,r){var o=new e.constructor;return t.RotationFromAxisToRef(e,n,r,o),o}},{key:"RotationFromAxisToRef",value:function(t,e,n,r){var o=x.Quaternion[0];return _.RotationQuaternionFromAxisToRef(t,e,n,o),o.toEulerAnglesToRef(r),r}}]),t}();f._UpReadOnly=f.Up(),f._DownReadOnly=f.Down(),f._LeftHandedForwardReadOnly=f.Forward(!1),f._RightHandedForwardReadOnly=f.Forward(!0),f._RightReadOnly=f.Right(),f._LeftReadOnly=f.Left(),f._ZeroReadOnly=f.Zero();var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,t),this.x=e,this.y=n,this.z=o,this.w=i}return(0,o.Z)(t,[{key:"toString",value:function(){return"{X: ".concat(this.x," Y: ").concat(this.y," Z: ").concat(this.z," W: ").concat(this.w,"}")}},{key:"getClassName",value:function(){return"Vector4"}},{key:"getHashCode",value:function(){var t=l(this.x);return t=397*(t=397*(t=397*t^l(this.y))^l(this.z))^l(this.w)}},{key:"asArray",value:function(){var t=new Array;return this.toArray(t,0),t}},{key:"toArray",value:function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"addInPlace",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}},{key:"add",value:function(t){return new this.constructor(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}},{key:"addToRef",value:function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,e}},{key:"subtractInPlace",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}},{key:"subtract",value:function(t){return new this.constructor(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}},{key:"subtractToRef",value:function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,e}},{key:"subtractFromFloats",value:function(t,e,n,r){return new this.constructor(this.x-t,this.y-e,this.z-n,this.w-r)}},{key:"subtractFromFloatsToRef",value:function(t,e,n,r,o){return o.x=this.x-t,o.y=this.y-e,o.z=this.z-n,o.w=this.w-r,o}},{key:"negate",value:function(){return new this.constructor(-this.x,-this.y,-this.z,-this.w)}},{key:"negateInPlace",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"scale",value:function(t){return new this.constructor(this.x*t,this.y*t,this.z*t,this.w*t)}},{key:"scaleToRef",value:function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,e}},{key:"scaleAndAddToRef",value:function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,e}},{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&i.R.WithinEpsilon(this.x,t.x,e)&&i.R.WithinEpsilon(this.y,t.y,e)&&i.R.WithinEpsilon(this.z,t.z,e)&&i.R.WithinEpsilon(this.w,t.w,e)}},{key:"equalsToFloats",value:function(t,e,n,r){return this.x===t&&this.y===e&&this.z===n&&this.w===r}},{key:"multiplyInPlace",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiply",value:function(t){return new this.constructor(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}},{key:"multiplyToRef",value:function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,e}},{key:"multiplyByFloats",value:function(t,e,n,r){return new this.constructor(this.x*t,this.y*e,this.z*n,this.w*r)}},{key:"divide",value:function(t){return new this.constructor(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}},{key:"divideToRef",value:function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,e}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"minimizeInPlace",value:function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}},{key:"maximizeInPlace",value:function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}},{key:"floor",value:function(){return new this.constructor(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}},{key:"fract",value:function(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"normalize",value:function(){var t=this.length();return 0===t?this:this.scaleInPlace(1/t)}},{key:"toVector3",value:function(){return new f(this.x,this.y,this.z)}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}},{key:"copyFromFloats",value:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}},{key:"set",value:function(t,e,n,r){return this.copyFromFloats(t,e,n,r)}},{key:"setAll",value:function(t){return this.x=this.y=this.z=this.w=t,this}}],[{key:"FromArray",value:function(e,n){return n||(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])}},{key:"FromArrayToRef",value:function(t,e,n){return n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3],n}},{key:"FromFloatArrayToRef",value:function(e,n,r){return t.FromArrayToRef(e,n,r),r}},{key:"FromFloatsToRef",value:function(t,e,n,r,o){return o.x=t,o.y=e,o.z=n,o.w=r,o}},{key:"Zero",value:function(){return new t(0,0,0,0)}},{key:"One",value:function(){return new t(1,1,1,1)}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"Normalize",value:function(e){var n=t.Zero();return t.NormalizeToRef(e,n),n}},{key:"NormalizeToRef",value:function(t,e){return e.copyFrom(t),e.normalize(),e}},{key:"Minimize",value:function(t,e){var n=new t.constructor;return n.copyFrom(t),n.minimizeInPlace(e),n}},{key:"Maximize",value:function(t,e){var n=new t.constructor;return n.copyFrom(t),n.maximizeInPlace(e),n}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t.x-e.x,r=t.y-e.y,o=t.z-e.z,i=t.w-e.w;return n*n+r*r+o*o+i*i}},{key:"Center",value:function(e,n){return t.CenterToRef(e,n,t.Zero())}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2,(t.w+e.w)/2)}},{key:"TransformCoordinates",value:function(e,n){var r=t.Zero();return t.TransformCoordinatesToRef(e,n,r),r}},{key:"TransformCoordinatesToRef",value:function(e,n,r){return t.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,n,r),r}},{key:"TransformCoordinatesFromFloatsToRef",value:function(t,e,n,r,o){var i=r.m,a=t*i[0]+e*i[4]+n*i[8]+i[12],u=t*i[1]+e*i[5]+n*i[9]+i[13],s=t*i[2]+e*i[6]+n*i[10]+i[14],y=t*i[3]+e*i[7]+n*i[11]+i[15];return o.x=a,o.y=u,o.z=s,o.w=y,o}},{key:"TransformNormal",value:function(e,n){var r=new e.constructor;return t.TransformNormalToRef(e,n,r),r}},{key:"TransformNormalToRef",value:function(t,e,n){var r=e.m,o=t.x*r[0]+t.y*r[4]+t.z*r[8],i=t.x*r[1]+t.y*r[5]+t.z*r[9],a=t.x*r[2]+t.y*r[6]+t.z*r[10];return n.x=o,n.y=i,n.z=a,n.w=t.w,n}},{key:"TransformNormalFromFloatsToRef",value:function(t,e,n,r,o,i){var a=o.m;return i.x=t*a[0]+e*a[4]+n*a[8],i.y=t*a[1]+e*a[5]+n*a[9],i.z=t*a[2]+e*a[6]+n*a[10],i.w=r,i}},{key:"FromVector3",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e._x,e._y,e._z,n)}}]),t}();v._ZeroReadOnly=v.Zero();var _=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,r.Z)(this,t),this._isDirty=!0,this._x=e,this._y=n,this._z=o,this._w=i}return(0,o.Z)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._isDirty=!0}},{key:"toString",value:function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z," W: ").concat(this._w,"}")}},{key:"getClassName",value:function(){return"Quaternion"}},{key:"getHashCode",value:function(){var t=l(this._x);return t=397*(t=397*(t=397*t^l(this._y))^l(this._z))^l(this._w)}},{key:"asArray",value:function(){return[this._x,this._y,this._z,this._w]}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}},{key:"equals",value:function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&i.R.WithinEpsilon(this._x,t._x,e)&&i.R.WithinEpsilon(this._y,t._y,e)&&i.R.WithinEpsilon(this._z,t._z,e)&&i.R.WithinEpsilon(this._w,t._w,e)}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copyFrom",value:function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this.w=t._w,this}},{key:"copyFromFloats",value:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}},{key:"set",value:function(t,e,n,r){return this.copyFromFloats(t,e,n,r)}},{key:"add",value:function(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)}},{key:"addInPlace",value:function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this}},{key:"subtract",value:function(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)}},{key:"subtractInPlace",value:function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this}},{key:"scale",value:function(t){return new this.constructor(this._x*t,this._y*t,this._z*t,this._w*t)}},{key:"scaleToRef",value:function(t,e){return e.x=this._x*t,e.y=this._y*t,e.z=this._z*t,e.w=this._w*t,e}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"scaleAndAddToRef",value:function(t,e){return e.x+=this._x*t,e.y+=this._y*t,e.z+=this._z*t,e.w+=this._w*t,e}},{key:"multiply",value:function(t){var e=new this.constructor(0,0,0,1);return this.multiplyToRef(t,e),e}},{key:"multiplyToRef",value:function(t,e){var n=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,r=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,o=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,i=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return e.copyFromFloats(n,r,o,i),e}},{key:"multiplyInPlace",value:function(t){return this.multiplyToRef(t,this),this}},{key:"conjugateToRef",value:function(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),t}},{key:"conjugateInPlace",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"conjugate",value:function(){return new this.constructor(-this._x,-this._y,-this._z,this._w)}},{key:"invert",value:function(){var t=this.conjugate(),e=this.lengthSquared();return 0==e||1==e||t.scaleInPlace(1/e),t}},{key:"invertInPlace",value:function(){this.conjugateInPlace();var t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}},{key:"lengthSquared",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"normalize",value:function(){var t=this.length();if(0===t)return this;var e=1/t;return this.scaleInPlace(e),this}},{key:"normalizeToNew",value:function(){var t=this.length();if(0===t)return this.clone();var e=1/t;return this.scale(e)}},{key:"toEulerAngles",value:function(){var t=f.Zero();return this.toEulerAnglesToRef(t),t}},{key:"toEulerAnglesToRef",value:function(t){var e=this._z,n=this._x,r=this._y,o=this._w,i=r*e-n*o,a=.4999999;if(i<-a)t.y=2*Math.atan2(r,o),t.x=Math.PI/2,t.z=0;else if(i>a)t.y=2*Math.atan2(r,o),t.x=-Math.PI/2,t.z=0;else{var u=o*o,s=e*e,y=n*n,h=r*r;t.z=Math.atan2(2*(n*r+e*o),-s-y+h+u),t.x=Math.asin(-2*i),t.y=Math.atan2(2*(e*n+r*o),s-y-h+u)}return t}},{key:"toRotationMatrix",value:function(t){return m.FromQuaternionToRef(this,t),t}},{key:"fromRotationMatrix",value:function(e){return t.FromRotationMatrixToRef(e,this),this}}],[{key:"FromRotationMatrix",value:function(e){var n=new t;return t.FromRotationMatrixToRef(e,n),n}},{key:"FromRotationMatrixToRef",value:function(t,e){var n,r=t.m,o=r[0],i=r[4],a=r[8],u=r[1],s=r[5],y=r[9],h=r[2],l=r[6],c=r[10],f=o+s+c;return f>0?(n=.5/Math.sqrt(f+1),e.w=.25/n,e.x=(l-y)*n,e.y=(a-h)*n,e.z=(u-i)*n):o>s&&o>c?(n=2*Math.sqrt(1+o-s-c),e.w=(l-y)/n,e.x=.25*n,e.y=(i+u)/n,e.z=(a+h)/n):s>c?(n=2*Math.sqrt(1+s-o-c),e.w=(a-h)/n,e.x=(i+u)/n,e.y=.25*n,e.z=(y+l)/n):(n=2*Math.sqrt(1+c-o-s),e.w=(u-i)/n,e.x=(a+h)/n,e.y=(y+l)/n,e.z=.25*n),e}},{key:"Dot",value:function(t,e){return t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w}},{key:"AreClose",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=t.Dot(e,n);return 1-o*o<=r}},{key:"SmoothToRef",value:function(e,n,r,o,a){var u=0===o?1:r/o;return u=i.R.Clamp(u,0,1),t.SlerpToRef(e,n,u,a),a}},{key:"Zero",value:function(){return new t(0,0,0,0)}},{key:"Inverse",value:function(t){return new t.constructor(-t._x,-t._y,-t._z,t._w)}},{key:"InverseToRef",value:function(t,e){return e.set(-t._x,-t._y,-t._z,t._w),e}},{key:"Identity",value:function(){return new t(0,0,0,1)}},{key:"IsIdentity",value:function(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}},{key:"RotationAxis",value:function(e,n){return t.RotationAxisToRef(e,n,new t)}},{key:"RotationAxisToRef",value:function(t,e,n){var r=Math.sin(e/2);return t.normalize(),n.w=Math.cos(e/2),n.x=t._x*r,n.y=t._y*r,n.z=t._z*r,n}},{key:"FromArray",value:function(e,n){return n||(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])}},{key:"FromArrayToRef",value:function(t,e,n){return n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3],n}},{key:"FromEulerAngles",value:function(e,n,r){var o=new t;return t.RotationYawPitchRollToRef(n,e,r,o),o}},{key:"FromEulerAnglesToRef",value:function(e,n,r,o){return t.RotationYawPitchRollToRef(n,e,r,o),o}},{key:"FromEulerVector",value:function(e){var n=new t;return t.RotationYawPitchRollToRef(e._y,e._x,e._z,n),n}},{key:"FromEulerVectorToRef",value:function(e,n){return t.RotationYawPitchRollToRef(e._y,e._x,e._z,n),n}},{key:"FromUnitVectorsToRef",value:function(t,e,n){var r=f.Dot(t,e)+1;return r<a.kn?Math.abs(t.x)>Math.abs(t.z)?n.set(-t.y,t.x,0,0):n.set(0,-t.z,t.y,0):(f.CrossToRef(t,e,k.Vector3[0]),n.set(k.Vector3[0].x,k.Vector3[0].y,k.Vector3[0].z,r)),n.normalize()}},{key:"RotationYawPitchRoll",value:function(e,n,r){var o=new t;return t.RotationYawPitchRollToRef(e,n,r,o),o}},{key:"RotationYawPitchRollToRef",value:function(t,e,n,r){var o=.5*n,i=.5*e,a=.5*t,u=Math.sin(o),s=Math.cos(o),y=Math.sin(i),h=Math.cos(i),l=Math.sin(a),c=Math.cos(a);return r.x=c*y*s+l*h*u,r.y=l*h*s-c*y*u,r.z=c*h*u-l*y*s,r.w=c*h*s+l*y*u,r}},{key:"RotationAlphaBetaGamma",value:function(e,n,r){var o=new t;return t.RotationAlphaBetaGammaToRef(e,n,r,o),o}},{key:"RotationAlphaBetaGammaToRef",value:function(t,e,n,r){var o=.5*(n+t),i=.5*(n-t),a=.5*e;return r.x=Math.cos(i)*Math.sin(a),r.y=Math.sin(i)*Math.sin(a),r.z=Math.sin(o)*Math.cos(a),r.w=Math.cos(o)*Math.cos(a),r}},{key:"RotationQuaternionFromAxis",value:function(e,n,r){var o=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(e,n,r,o),o}},{key:"RotationQuaternionFromAxisToRef",value:function(e,n,r,o){var i=x.Matrix[0];return m.FromXYZAxesToRef(e.normalize(),n.normalize(),r.normalize(),i),t.FromRotationMatrixToRef(i,o),o}},{key:"FromLookDirectionLH",value:function(e,n){var r=new t;return t.FromLookDirectionLHToRef(e,n,r),r}},{key:"FromLookDirectionLHToRef",value:function(e,n,r){var o=x.Matrix[0];return m.LookDirectionLHToRef(e,n,o),t.FromRotationMatrixToRef(o,r),r}},{key:"FromLookDirectionRH",value:function(e,n){var r=new t;return t.FromLookDirectionRHToRef(e,n,r),r}},{key:"FromLookDirectionRHToRef",value:function(e,n,r){var o=x.Matrix[0];return m.LookDirectionRHToRef(e,n,o),t.FromRotationMatrixToRef(o,r)}},{key:"Slerp",value:function(e,n,r){var o=t.Identity();return t.SlerpToRef(e,n,r,o),o}},{key:"SlerpToRef",value:function(t,e,n,r){var o,i,a=t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w,u=!1;if(a<0&&(u=!0,a=-a),a>.999999)i=1-n,o=u?-n:n;else{var s=Math.acos(a),y=1/Math.sin(s);i=Math.sin((1-n)*s)*y,o=u?-Math.sin(n*s)*y:Math.sin(n*s)*y}return r.x=i*t._x+o*e._x,r.y=i*t._y+o*e._y,r.z=i*t._z+o*e._z,r.w=i*t._w+o*e._w,r}},{key:"Hermite",value:function(t,e,n,r,o){var i=o*o,a=o*i,u=2*a-3*i+1,s=-2*a+3*i,y=a-2*i+o,h=a-i,l=t._x*u+n._x*s+e._x*y+r._x*h,c=t._y*u+n._y*s+e._y*y+r._y*h,f=t._z*u+n._z*s+e._z*y+r._z*h,v=t._w*u+n._w*s+e._w*y+r._w*h;return new t.constructor(l,c,f,v)}},{key:"Hermite1stDerivative",value:function(t,e,n,r,o){var i=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,n,r,o,i),i}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,r,o,i){var a=o*o;return i.x=6*(a-o)*t.x+(3*a-4*o+1)*e.x+6*(-a+o)*n.x+(3*a-2*o)*r.x,i.y=6*(a-o)*t.y+(3*a-4*o+1)*e.y+6*(-a+o)*n.y+(3*a-2*o)*r.y,i.z=6*(a-o)*t.z+(3*a-4*o+1)*e.z+6*(-a+o)*n.z+(3*a-2*o)*r.z,i.w=6*(a-o)*t.w+(3*a-4*o+1)*e.w+6*(-a+o)*n.w+(3*a-2*o)*r.w,i}}]),t}(),m=function(){function t(){(0,r.Z)(this,t),this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,y.Z.MatrixTrackPrecisionChange&&y.Z.MatrixTrackedMatrices.push(this),this._m=new y.Z.MatrixCurrentType(16),this.markAsUpdated()}return(0,o.Z)(t,[{key:"m",get:function(){return this._m}},{key:"markAsUpdated",value:function(){this.updateFlag=t._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}},{key:"_updateIdentityStatus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._isIdentity=t,this._isIdentity3x2=t||n,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&r}},{key:"isIdentity",value:function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}},{key:"isIdentityAs3x2",value:function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}},{key:"determinant",value:function(){if(!0===this._isIdentity)return 1;var t=this._m,e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],y=t[8],h=t[9],l=t[10],c=t[11],f=t[12],v=t[13],_=t[14],m=t[15],x=l*m-_*c,k=h*m-v*c,R=h*_-v*l,d=y*m-f*c,z=y*_-l*f,T=y*v-f*h;return e*+(a*x-u*k+s*R)+n*-(i*x-u*d+s*z)+r*+(i*k-a*d+s*T)+o*-(i*R-a*z+u*T)}},{key:"toArray",value:function(){return this._m}},{key:"asArray",value:function(){return this._m}},{key:"invert",value:function(){return this.invertToRef(this),this}},{key:"reset",value:function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}},{key:"add",value:function(t){var e=new this.constructor;return this.addToRef(t,e),e}},{key:"addToRef",value:function(t,e){for(var n=this._m,r=e._m,o=t.m,i=0;i<16;i++)r[i]=n[i]+o[i];return e.markAsUpdated(),e}},{key:"addToSelf",value:function(t){for(var e=this._m,n=t.m,r=0;r<16;r++)e[r]+=n[r];return this.markAsUpdated(),this}},{key:"invertToRef",value:function(e){if(!0===this._isIdentity)return t.IdentityToRef(e),e;var n=this._m,r=n[0],o=n[1],i=n[2],a=n[3],u=n[4],s=n[5],y=n[6],h=n[7],l=n[8],c=n[9],f=n[10],v=n[11],_=n[12],m=n[13],x=n[14],k=n[15],R=f*k-x*v,d=c*k-m*v,z=c*x-m*f,T=l*k-_*v,w=l*x-f*_,p=l*m-_*c,F=+(s*R-y*d+h*z),g=-(u*R-y*T+h*w),M=+(u*d-s*T+h*p),I=-(u*z-s*w+y*p),P=r*F+o*g+i*M+a*I;if(0===P)return e.copyFrom(this),e;var A=1/P,V=y*k-x*h,D=s*k-m*h,C=s*x-m*y,L=u*k-_*h,H=u*x-_*y,Z=u*m-_*s,O=y*v-f*h,S=s*v-c*h,b=s*f-c*y,U=u*v-l*h,B=u*f-l*y,q=u*c-l*s,N=-(o*R-i*d+a*z),E=+(r*R-i*T+a*w),Y=-(r*d-o*T+a*p),Q=+(r*z-o*w+i*p),W=+(o*V-i*D+a*C),j=-(r*V-i*L+a*H),G=+(r*D-o*L+a*Z),X=-(r*C-o*H+i*Z),J=-(o*O-i*S+a*b),K=+(r*O-i*U+a*B),$=-(r*S-o*U+a*q),tt=+(r*b-o*B+i*q);return t.FromValuesToRef(F*A,N*A,W*A,J*A,g*A,E*A,j*A,K*A,M*A,Y*A,G*A,$*A,I*A,Q*A,X*A,tt*A,e),e}},{key:"addAtIndex",value:function(t,e){return this._m[t]+=e,this.markAsUpdated(),this}},{key:"multiplyAtIndex",value:function(t,e){return this._m[t]*=e,this.markAsUpdated(),this}},{key:"setTranslationFromFloats",value:function(t,e,n){return this._m[12]=t,this._m[13]=e,this._m[14]=n,this.markAsUpdated(),this}},{key:"addTranslationFromFloats",value:function(t,e,n){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=n,this.markAsUpdated(),this}},{key:"setTranslation",value:function(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}},{key:"getTranslation",value:function(){return new f(this._m[12],this._m[13],this._m[14])}},{key:"getTranslationToRef",value:function(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],t}},{key:"removeRotationAndScaling",value:function(){var e=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],e[15],this),this._updateIdentityStatus(0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]),this}},{key:"multiply",value:function(t){var e=new this.constructor;return this.multiplyToRef(t,e),e}},{key:"copyFrom",value:function(t){t.copyToArray(this._m);var e=t;return this.updateFlag=e.updateFlag,this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this}},{key:"copyToArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._m;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],this}},{key:"multiplyToRef",value:function(t,e){return this._isIdentity?(e.copyFrom(t),e):t._isIdentity?(e.copyFrom(this),e):(this.multiplyToArray(t,e._m,0),e.markAsUpdated(),e)}},{key:"multiplyToArray",value:function(t,e,n){var r=this._m,o=t.m,i=r[0],a=r[1],u=r[2],s=r[3],y=r[4],h=r[5],l=r[6],c=r[7],f=r[8],v=r[9],_=r[10],m=r[11],x=r[12],k=r[13],R=r[14],d=r[15],z=o[0],T=o[1],w=o[2],p=o[3],F=o[4],g=o[5],M=o[6],I=o[7],P=o[8],A=o[9],V=o[10],D=o[11],C=o[12],L=o[13],H=o[14],Z=o[15];return e[n]=i*z+a*F+u*P+s*C,e[n+1]=i*T+a*g+u*A+s*L,e[n+2]=i*w+a*M+u*V+s*H,e[n+3]=i*p+a*I+u*D+s*Z,e[n+4]=y*z+h*F+l*P+c*C,e[n+5]=y*T+h*g+l*A+c*L,e[n+6]=y*w+h*M+l*V+c*H,e[n+7]=y*p+h*I+l*D+c*Z,e[n+8]=f*z+v*F+_*P+m*C,e[n+9]=f*T+v*g+_*A+m*L,e[n+10]=f*w+v*M+_*V+m*H,e[n+11]=f*p+v*I+_*D+m*Z,e[n+12]=x*z+k*F+R*P+d*C,e[n+13]=x*T+k*g+R*A+d*L,e[n+14]=x*w+k*M+R*V+d*H,e[n+15]=x*p+k*I+R*D+d*Z,this}},{key:"equals",value:function(t){var e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;var n=this.m,r=e.m;return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]&&n[9]===r[9]&&n[10]===r[10]&&n[11]===r[11]&&n[12]===r[12]&&n[13]===r[13]&&n[14]===r[14]&&n[15]===r[15]}},{key:"clone",value:function(){var t=new this.constructor;return t.copyFrom(this),t}},{key:"getClassName",value:function(){return"Matrix"}},{key:"getHashCode",value:function(){for(var t=l(this._m[0]),e=1;e<16;e++)t=397*t^l(this._m[e]);return t}},{key:"decomposeToTransformNode",value:function(t){return t.rotationQuaternion=t.rotationQuaternion||new _,this.decompose(t.scaling,t.rotationQuaternion,t.position)}},{key:"decompose",value:function(e,n,r,o){if(this._isIdentity)return r&&r.setAll(0),e&&e.setAll(1),n&&n.copyFromFloats(0,0,0,1),!0;var i=this._m;if(r&&r.copyFromFloats(i[12],i[13],i[14]),(e=e||x.Vector3[0]).x=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),e.y=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),e.z=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]),o){var a=o.scaling.x<0?-1:1,u=o.scaling.y<0?-1:1,s=o.scaling.z<0?-1:1;e.x*=a,e.y*=u,e.z*=s}else this.determinant()<=0&&(e.y*=-1);if(0===e._x||0===e._y||0===e._z)return n&&n.copyFromFloats(0,0,0,1),!1;if(n){var y=1/e._x,h=1/e._y,l=1/e._z;t.FromValuesToRef(i[0]*y,i[1]*y,i[2]*y,0,i[4]*h,i[5]*h,i[6]*h,0,i[8]*l,i[9]*l,i[10]*l,0,0,0,0,1,x.Matrix[0]),_.FromRotationMatrixToRef(x.Matrix[0],n)}return!0}},{key:"getRow",value:function(t){if(t<0||t>3)return null;var e=4*t;return new v(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}},{key:"getRowToRef",value:function(t,e){if(t>=0&&t<3){var n=4*t;e.x=this._m[n+0],e.y=this._m[n+1],e.z=this._m[n+2],e.w=this._m[n+3]}return e}},{key:"setRow",value:function(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}},{key:"transpose",value:function(){var e=new this.constructor;return t.TransposeToRef(this,e),e}},{key:"transposeToRef",value:function(e){return t.TransposeToRef(this,e),e}},{key:"setRowFromFloats",value:function(t,e,n,r,o){if(t<0||t>3)return this;var i=4*t;return this._m[i+0]=e,this._m[i+1]=n,this._m[i+2]=r,this._m[i+3]=o,this.markAsUpdated(),this}},{key:"scale",value:function(t){var e=new this.constructor;return this.scaleToRef(t,e),e}},{key:"scaleToRef",value:function(t,e){for(var n=0;n<16;n++)e._m[n]=this._m[n]*t;return e.markAsUpdated(),e}},{key:"scaleAndAddToRef",value:function(t,e){for(var n=0;n<16;n++)e._m[n]+=this._m[n]*t;return e.markAsUpdated(),e}},{key:"toNormalMatrix",value:function(e){var n=x.Matrix[0];this.invertToRef(n),n.transposeToRef(e);var r=e._m;return t.FromValuesToRef(r[0],r[1],r[2],0,r[4],r[5],r[6],0,r[8],r[9],r[10],0,0,0,0,1,e),e}},{key:"getRotationMatrix",value:function(){var t=new this.constructor;return this.getRotationMatrixToRef(t),t}},{key:"getRotationMatrixToRef",value:function(e){var n=x.Vector3[0];if(!this.decompose(n))return t.IdentityToRef(e),e;var r=this._m,o=1/n._x,i=1/n._y,a=1/n._z;return t.FromValuesToRef(r[0]*o,r[1]*o,r[2]*o,0,r[4]*i,r[5]*i,r[6]*i,0,r[8]*a,r[9]*a,r[10]*a,0,0,0,0,1,e),e}},{key:"toggleModelMatrixHandInPlace",value:function(){var t=this._m;return t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated(),this}},{key:"toggleProjectionMatrixHandInPlace",value:function(){var t=this._m;return t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated(),this}}],[{key:"Use64Bits",get:function(){return y.Z.MatrixUse64Bits}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new t;return t.FromArrayToRef(e,n,r),r}},{key:"FromArrayToRef",value:function(t,e,n){for(var r=0;r<16;r++)n._m[r]=t[r+e];return n.markAsUpdated(),n}},{key:"FromFloat32ArrayToRefScaled",value:function(t,e,n,r){for(var o=0;o<16;o++)r._m[o]=t[o+e]*n;return r.markAsUpdated(),r}},{key:"IdentityReadOnly",get:function(){return t._IdentityReadOnly}},{key:"FromValuesToRef",value:function(t,e,n,r,o,i,a,u,s,y,h,l,c,f,v,_,m){var x=m._m;x[0]=t,x[1]=e,x[2]=n,x[3]=r,x[4]=o,x[5]=i,x[6]=a,x[7]=u,x[8]=s,x[9]=y,x[10]=h,x[11]=l,x[12]=c,x[13]=f,x[14]=v,x[15]=_,m.markAsUpdated()}},{key:"FromValues",value:function(e,n,r,o,i,a,u,s,y,h,l,c,f,v,_,m){var x=new t,k=x._m;return k[0]=e,k[1]=n,k[2]=r,k[3]=o,k[4]=i,k[5]=a,k[6]=u,k[7]=s,k[8]=y,k[9]=h,k[10]=l,k[11]=c,k[12]=f,k[13]=v,k[14]=_,k[15]=m,x.markAsUpdated(),x}},{key:"Compose",value:function(e,n,r){var o=new t;return t.ComposeToRef(e,n,r,o),o}},{key:"ComposeToRef",value:function(t,e,n,r){var o=r._m,i=e._x,a=e._y,u=e._z,s=e._w,y=i+i,h=a+a,l=u+u,c=i*y,f=i*h,v=i*l,_=a*h,m=a*l,x=u*l,k=s*y,R=s*h,d=s*l,z=t._x,T=t._y,w=t._z;return o[0]=(1-(_+x))*z,o[1]=(f+d)*z,o[2]=(v-R)*z,o[3]=0,o[4]=(f-d)*T,o[5]=(1-(c+x))*T,o[6]=(m+k)*T,o[7]=0,o[8]=(v+R)*w,o[9]=(m-k)*w,o[10]=(1-(c+_))*w,o[11]=0,o[12]=n._x,o[13]=n._y,o[14]=n._z,o[15]=1,r.markAsUpdated(),r}},{key:"Identity",value:function(){var e=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e._updateIdentityStatus(!0),e}},{key:"IdentityToRef",value:function(e){return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(!0),e}},{key:"Zero",value:function(){var e=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e._updateIdentityStatus(!1),e}},{key:"RotationX",value:function(e){var n=new t;return t.RotationXToRef(e,n),n}},{key:"Invert",value:function(t){var e=new t.constructor;return t.invertToRef(e),e}},{key:"RotationXToRef",value:function(e,n){var r=Math.sin(e),o=Math.cos(e);return t.FromValuesToRef(1,0,0,0,0,o,r,0,0,-r,o,0,0,0,0,1,n),n._updateIdentityStatus(1===o&&0===r),n}},{key:"RotationY",value:function(e){var n=new t;return t.RotationYToRef(e,n),n}},{key:"RotationYToRef",value:function(e,n){var r=Math.sin(e),o=Math.cos(e);return t.FromValuesToRef(o,0,-r,0,0,1,0,0,r,0,o,0,0,0,0,1,n),n._updateIdentityStatus(1===o&&0===r),n}},{key:"RotationZ",value:function(e){var n=new t;return t.RotationZToRef(e,n),n}},{key:"RotationZToRef",value:function(e,n){var r=Math.sin(e),o=Math.cos(e);return t.FromValuesToRef(o,r,0,0,-r,o,0,0,0,0,1,0,0,0,0,1,n),n._updateIdentityStatus(1===o&&0===r),n}},{key:"RotationAxis",value:function(e,n){var r=new t;return t.RotationAxisToRef(e,n,r),r}},{key:"RotationAxisToRef",value:function(t,e,n){var r=Math.sin(-e),o=Math.cos(-e),i=1-o;t.normalize();var a=n._m;return a[0]=t._x*t._x*i+o,a[1]=t._x*t._y*i-t._z*r,a[2]=t._x*t._z*i+t._y*r,a[3]=0,a[4]=t._y*t._x*i+t._z*r,a[5]=t._y*t._y*i+o,a[6]=t._y*t._z*i-t._x*r,a[7]=0,a[8]=t._z*t._x*i-t._y*r,a[9]=t._z*t._y*i+t._x*r,a[10]=t._z*t._z*i+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,n.markAsUpdated(),n}},{key:"RotationAlignToRef",value:function(t,e,n){var r=f.Dot(e,t),o=n._m;if(r<-1+a.kn)o[0]=-1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0;else{var i=f.Cross(e,t),u=1/(1+r);o[0]=i._x*i._x*u+r,o[1]=i._y*i._x*u-i._z,o[2]=i._z*i._x*u+i._y,o[3]=0,o[4]=i._x*i._y*u+i._z,o[5]=i._y*i._y*u+r,o[6]=i._z*i._y*u-i._x,o[7]=0,o[8]=i._x*i._z*u-i._y,o[9]=i._y*i._z*u+i._x,o[10]=i._z*i._z*u+r,o[11]=0}return o[12]=0,o[13]=0,o[14]=0,o[15]=1,n.markAsUpdated(),n}},{key:"RotationYawPitchRoll",value:function(e,n,r){var o=new t;return t.RotationYawPitchRollToRef(e,n,r,o),o}},{key:"RotationYawPitchRollToRef",value:function(t,e,n,r){return _.RotationYawPitchRollToRef(t,e,n,x.Quaternion[0]),x.Quaternion[0].toRotationMatrix(r),r}},{key:"Scaling",value:function(e,n,r){var o=new t;return t.ScalingToRef(e,n,r,o),o}},{key:"ScalingToRef",value:function(e,n,r,o){return t.FromValuesToRef(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1,o),o._updateIdentityStatus(1===e&&1===n&&1===r),o}},{key:"Translation",value:function(e,n,r){var o=new t;return t.TranslationToRef(e,n,r,o),o}},{key:"TranslationToRef",value:function(e,n,r,o){return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1,o),o._updateIdentityStatus(0===e&&0===n&&0===r),o}},{key:"Lerp",value:function(e,n,r){var o=new e.constructor;return t.LerpToRef(e,n,r,o),o}},{key:"LerpToRef",value:function(t,e,n,r){for(var o=r._m,i=t.m,a=e.m,u=0;u<16;u++)o[u]=i[u]*(1-n)+a[u]*n;return r.markAsUpdated(),r}},{key:"DecomposeLerp",value:function(e,n,r){var o=new e.constructor;return t.DecomposeLerpToRef(e,n,r,o),o}},{key:"DecomposeLerpToRef",value:function(e,n,r,o){var i=x.Vector3[0],a=x.Quaternion[0],u=x.Vector3[1];e.decompose(i,a,u);var s=x.Vector3[2],y=x.Quaternion[1],h=x.Vector3[3];n.decompose(s,y,h);var l=x.Vector3[4];f.LerpToRef(i,s,r,l);var c=x.Quaternion[2];_.SlerpToRef(a,y,r,c);var v=x.Vector3[5];return f.LerpToRef(u,h,r,v),t.ComposeToRef(l,c,v,o),o}},{key:"LookAtLH",value:function(e,n,r){var o=new t;return t.LookAtLHToRef(e,n,r,o),o}},{key:"LookAtLHToRef",value:function(e,n,r,o){var i=x.Vector3[0],a=x.Vector3[1],u=x.Vector3[2];n.subtractToRef(e,u),u.normalize(),f.CrossToRef(r,u,i);var s=i.lengthSquared();0===s?i.x=1:i.normalizeFromLength(Math.sqrt(s)),f.CrossToRef(u,i,a),a.normalize();var y=-f.Dot(i,e),h=-f.Dot(a,e),l=-f.Dot(u,e);t.FromValuesToRef(i._x,a._x,u._x,0,i._y,a._y,u._y,0,i._z,a._z,u._z,0,y,h,l,1,o)}},{key:"LookAtRH",value:function(e,n,r){var o=new t;return t.LookAtRHToRef(e,n,r,o),o}},{key:"LookAtRHToRef",value:function(e,n,r,o){var i=x.Vector3[0],a=x.Vector3[1],u=x.Vector3[2];e.subtractToRef(n,u),u.normalize(),f.CrossToRef(r,u,i);var s=i.lengthSquared();0===s?i.x=1:i.normalizeFromLength(Math.sqrt(s)),f.CrossToRef(u,i,a),a.normalize();var y=-f.Dot(i,e),h=-f.Dot(a,e),l=-f.Dot(u,e);return t.FromValuesToRef(i._x,a._x,u._x,0,i._y,a._y,u._y,0,i._z,a._z,u._z,0,y,h,l,1,o),o}},{key:"LookDirectionLH",value:function(e,n){var r=new t;return t.LookDirectionLHToRef(e,n,r),r}},{key:"LookDirectionLHToRef",value:function(e,n,r){var o=x.Vector3[0];o.copyFrom(e),o.scaleInPlace(-1);var i=x.Vector3[1];return f.CrossToRef(n,o,i),t.FromValuesToRef(i._x,i._y,i._z,0,n._x,n._y,n._z,0,o._x,o._y,o._z,0,0,0,0,1,r),r}},{key:"LookDirectionRH",value:function(e,n){var r=new t;return t.LookDirectionRHToRef(e,n,r),r}},{key:"LookDirectionRHToRef",value:function(e,n,r){var o=x.Vector3[2];return f.CrossToRef(n,e,o),t.FromValuesToRef(o._x,o._y,o._z,0,n._x,n._y,n._z,0,e._x,e._y,e._z,0,0,0,0,1,r),r}},{key:"OrthoLH",value:function(e,n,r,o,i){var a=new t;return t.OrthoLHToRef(e,n,r,o,a,i),a}},{key:"OrthoLHToRef",value:function(e,n,r,o,i,a){var u=2/e,s=2/n,y=2/(o-r),h=-(o+r)/(o-r);return t.FromValuesToRef(u,0,0,0,0,s,0,0,0,0,y,0,0,0,h,1,i),a&&i.multiplyToRef(R,i),i._updateIdentityStatus(1===u&&1===s&&1===y&&0===h),i}},{key:"OrthoOffCenterLH",value:function(e,n,r,o,i,a,u){var s=new t;return t.OrthoOffCenterLHToRef(e,n,r,o,i,a,s,u),s}},{key:"OrthoOffCenterLHToRef",value:function(e,n,r,o,i,a,u,s){var y=2/(n-e),h=2/(o-r),l=2/(a-i),c=-(a+i)/(a-i),f=(e+n)/(e-n),v=(o+r)/(r-o);return t.FromValuesToRef(y,0,0,0,0,h,0,0,0,0,l,0,f,v,c,1,u),s&&u.multiplyToRef(R,u),u.markAsUpdated(),u}},{key:"OrthoOffCenterRH",value:function(e,n,r,o,i,a,u){var s=new t;return t.OrthoOffCenterRHToRef(e,n,r,o,i,a,s,u),s}},{key:"OrthoOffCenterRHToRef",value:function(e,n,r,o,i,a,u,s){return t.OrthoOffCenterLHToRef(e,n,r,o,i,a,u,s),u._m[10]*=-1,u}},{key:"PerspectiveLH",value:function(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=new t,s=r,y=o,h=2*s/e,l=2*s/n,c=(y+s)/(y-s),f=-2*y*s/(y-s),v=Math.tan(a);return t.FromValuesToRef(h,0,0,0,0,l,0,v,0,0,c,1,0,0,f,0,u),i&&u.multiplyToRef(R,u),u._updateIdentityStatus(!1),u}},{key:"PerspectiveFovLH",value:function(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=new t;return t.PerspectiveFovLHToRef(e,n,r,o,s,!0,i,a,u),s}},{key:"PerspectiveFovLHToRef",value:function(e,n,r,o,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=r,l=o,c=1/Math.tan(.5*e),f=a?c/n:c,v=a?c:c*n,_=y&&0===h?-1:0!==l?(l+h)/(l-h):1,m=y&&0===h?2*l:0!==l?-2*l*h/(l-h):-2*h,x=Math.tan(s);return t.FromValuesToRef(f,0,0,0,0,v,0,x,0,0,_,1,0,0,m,0,i),u&&i.multiplyToRef(R,i),i._updateIdentityStatus(!1),i}},{key:"PerspectiveFovReverseLHToRef",value:function(e,n,r,o,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=1/Math.tan(.5*e),h=a?y/n:y,l=a?y:y*n,c=Math.tan(s);return t.FromValuesToRef(h,0,0,0,0,l,0,c,0,0,-r,1,0,0,1,0,i),u&&i.multiplyToRef(R,i),i._updateIdentityStatus(!1),i}},{key:"PerspectiveFovRH",value:function(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=new t;return t.PerspectiveFovRHToRef(e,n,r,o,s,!0,i,a,u),s}},{key:"PerspectiveFovRHToRef",value:function(e,n,r,o,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=r,l=o,c=1/Math.tan(.5*e),f=a?c/n:c,v=a?c:c*n,_=y&&0===h?1:0!==l?-(l+h)/(l-h):-1,m=y&&0===h?2*l:0!==l?-2*l*h/(l-h):-2*h,x=Math.tan(s);return t.FromValuesToRef(f,0,0,0,0,v,0,x,0,0,_,-1,0,0,m,0,i),u&&i.multiplyToRef(R,i),i._updateIdentityStatus(!1),i}},{key:"PerspectiveFovReverseRHToRef",value:function(e,n,r,o,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=1/Math.tan(.5*e),h=a?y/n:y,l=a?y:y*n,c=Math.tan(s);return t.FromValuesToRef(h,0,0,0,0,l,0,c,0,0,-r,-1,0,0,-1,0,i),u&&i.multiplyToRef(R,i),i._updateIdentityStatus(!1),i}},{key:"PerspectiveFovWebVRToRef",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=o?-1:1,s=Math.tan(t.upDegrees*Math.PI/180),y=Math.tan(t.downDegrees*Math.PI/180),h=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),c=2/(h+l),f=2/(s+y),v=Math.tan(a),_=r._m;return _[0]=c,_[1]=_[2]=_[3]=_[4]=0,_[5]=f,_[6]=0,_[7]=v,_[8]=(h-l)*c*.5,_[9]=-(s-y)*f*.5,_[10]=-n/(e-n),_[11]=1*u,_[12]=_[13]=_[15]=0,_[14]=-2*n*e/(n-e),i&&r.multiplyToRef(R,r),r.markAsUpdated(),r}},{key:"GetFinalMatrix",value:function(e,n,r,o,i,a){var u=e.width,s=e.height,y=e.x,h=e.y,l=t.FromValues(u/2,0,0,0,0,-s/2,0,0,0,0,a-i,0,y+u/2,s/2+h,i,1),c=new n.constructor;return n.multiplyToRef(r,c),c.multiplyToRef(o,c),c.multiplyToRef(l,c)}},{key:"GetAsMatrix2x2",value:function(t){var e=t.m,n=[e[0],e[1],e[4],e[5]];return y.Z.MatrixUse64Bits?n:new Float32Array(n)}},{key:"GetAsMatrix3x3",value:function(t){var e=t.m,n=[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];return y.Z.MatrixUse64Bits?n:new Float32Array(n)}},{key:"Transpose",value:function(e){var n=new e.constructor;return t.TransposeToRef(e,n),n}},{key:"TransposeToRef",value:function(t,e){var n=e._m,r=t.m;return n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15],e.markAsUpdated(),e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty),e}},{key:"Reflection",value:function(e){var n=new t;return t.ReflectionToRef(e,n),n}},{key:"ReflectionToRef",value:function(e,n){e.normalize();var r=e.normal.x,o=e.normal.y,i=e.normal.z,a=-2*r,u=-2*o,s=-2*i;return t.FromValuesToRef(a*r+1,u*r,s*r,0,a*o,u*o+1,s*o,0,a*i,u*i,s*i+1,0,a*e.d,u*e.d,s*e.d,1,n),n}},{key:"FromXYZAxesToRef",value:function(e,n,r,o){return t.FromValuesToRef(e._x,e._y,e._z,0,n._x,n._y,n._z,0,r._x,r._y,r._z,0,0,0,0,1,o),o}},{key:"FromQuaternionToRef",value:function(t,e){var n=t._x*t._x,r=t._y*t._y,o=t._z*t._z,i=t._x*t._y,a=t._z*t._w,u=t._z*t._x,s=t._y*t._w,y=t._y*t._z,h=t._x*t._w;return e._m[0]=1-2*(r+o),e._m[1]=2*(i+a),e._m[2]=2*(u-s),e._m[3]=0,e._m[4]=2*(i-a),e._m[5]=1-2*(o+n),e._m[6]=2*(y+h),e._m[7]=0,e._m[8]=2*(u+s),e._m[9]=2*(y-h),e._m[10]=1-2*(r+n),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e.markAsUpdated(),e}}]),t}();m._UpdateFlagSeed=0,m._IdentityReadOnly=m.Identity();var x=(0,o.Z)((function t(){(0,r.Z)(this,t)}));x.Vector3=u.B.BuildTuple(11,f.Zero),x.Matrix=u.B.BuildTuple(2,m.Identity),x.Quaternion=u.B.BuildTuple(3,_.Zero);var k=(0,o.Z)((function t(){(0,r.Z)(this,t)}));k.Vector2=u.B.BuildTuple(3,c.Zero),k.Vector3=u.B.BuildTuple(13,f.Zero),k.Vector4=u.B.BuildTuple(3,v.Zero),k.Quaternion=u.B.BuildTuple(2,_.Zero),k.Matrix=u.B.BuildTuple(8,m.Identity),(0,s.H)("BABYLON.Vector2",c),(0,s.H)("BABYLON.Vector3",f),(0,s.H)("BABYLON.Vector4",v),(0,s.H)("BABYLON.Matrix",m);var R=m.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)}}]);
//# sourceMappingURL=bf235017-828452d56d4316496352.js.map