{"version":3,"file":"702596cc-be0f5577a3a3717164ae.js","mappings":"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","sources":["webpack://@react-babylonjs/docs/../../node_modules/@babylonjs/core/scene.js"],"sourcesContent":["import _defineProperty from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classCallCheck from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { Tools } from \"./Misc/tools.js\";\nimport { PrecisionDate } from \"./Misc/precisionDate.js\";\nimport { Observable } from \"./Misc/observable.js\";\nimport { SmartArrayNoDuplicate, SmartArray } from \"./Misc/smartArray.js\";\nimport { StringDictionary } from \"./Misc/stringDictionary.js\";\nimport { Tags } from \"./Misc/tags.js\";\nimport { Vector3, Matrix, TmpVectors } from \"./Maths/math.vector.js\";\nimport { AbstractScene } from \"./abstractScene.js\";\nimport { ImageProcessingConfiguration } from \"./Materials/imageProcessingConfiguration.js\";\nimport { UniformBuffer } from \"./Materials/uniformBuffer.js\";\nimport { PickingInfo } from \"./Collisions/pickingInfo.js\";\nimport { ActionEvent } from \"./Actions/actionEvent.js\";\nimport { PostProcessManager } from \"./PostProcesses/postProcessManager.js\";\nimport { RenderingManager } from \"./Rendering/renderingManager.js\";\nimport { Stage } from \"./sceneComponent.js\";\nimport { IsWindowObjectExist } from \"./Misc/domManagement.js\";\nimport { EngineStore } from \"./Engines/engineStore.js\";\nimport { _WarnImport } from \"./Misc/devTools.js\";\nimport { InputManager } from \"./Inputs/scene.inputManager.js\";\nimport { PerfCounter } from \"./Misc/perfCounter.js\";\nimport { Color4, Color3 } from \"./Maths/math.color.js\";\nimport { Frustum } from \"./Maths/math.frustum.js\";\nimport { UniqueIdGenerator } from \"./Misc/uniqueIdGenerator.js\";\nimport { ReadFile, RequestFile, LoadFile } from \"./Misc/fileTools.js\";\nimport { LightConstants } from \"./Lights/lightConstants.js\";\nimport { _ObserveArray } from \"./Misc/arrayTools.js\";\n/**\n * Define how the scene should favor performance over ease of use\n */\nexport var ScenePerformancePriority;\n(function (ScenePerformancePriority) {\n  /** Default mode. No change. Performance will be treated as less important than backward compatibility */\n  ScenePerformancePriority[ScenePerformancePriority[\"BackwardCompatible\"] = 0] = \"BackwardCompatible\";\n  /** Some performance options will be turned on trying to strike a balance between perf and ease of use */\n  ScenePerformancePriority[ScenePerformancePriority[\"Intermediate\"] = 1] = \"Intermediate\";\n  /** Performance will be top priority */\n  ScenePerformancePriority[ScenePerformancePriority[\"Aggressive\"] = 2] = \"Aggressive\";\n})(ScenePerformancePriority || (ScenePerformancePriority = {}));\n/**\n * Represents a scene to be rendered by the engine.\n * @see https://doc.babylonjs.com/features/featuresDeepDive/scene\n */\nexport var Scene = /*#__PURE__*/function (_AbstractScene) {\n  _inherits(Scene, _AbstractScene);\n  var _super = _createSuper(Scene);\n  /**\n   * Creates a new Scene\n   * @param engine defines the engine to use to render this scene\n   * @param options defines the scene options\n   */\n  function Scene(engine, options) {\n    var _this;\n    _classCallCheck(this, Scene);\n    _this = _super.call(this);\n    // Members\n    /** @internal */\n    _this._inputManager = new InputManager(_assertThisInitialized(_this));\n    /** Define this parameter if you are using multiple cameras and you want to specify which one should be used for pointer position */\n    _this.cameraToUseForPointers = null;\n    /** @internal */\n    _this._isScene = true;\n    /** @internal */\n    _this._blockEntityCollection = false;\n    /**\n     * Gets or sets a boolean that indicates if the scene must clear the render buffer before rendering a frame\n     */\n    _this.autoClear = true;\n    /**\n     * Gets or sets a boolean that indicates if the scene must clear the depth and stencil buffers before rendering a frame\n     */\n    _this.autoClearDepthAndStencil = true;\n    /**\n     * Defines the color used to clear the render buffer (Default is (0.2, 0.2, 0.3, 1.0))\n     */\n    _this.clearColor = new Color4(0.2, 0.2, 0.3, 1.0);\n    /**\n     * Defines the color used to simulate the ambient color (Default is (0, 0, 0))\n     */\n    _this.ambientColor = new Color3(0, 0, 0);\n    /**\n     * Intensity of the environment in all pbr material.\n     * This dims or reinforces the IBL lighting overall (reflection and diffuse).\n     * As in the majority of the scene they are the same (exception for multi room and so on),\n     * this is easier to reference from here than from all the materials.\n     */\n    _this.environmentIntensity = 1;\n    _this._performancePriority = ScenePerformancePriority.BackwardCompatible;\n    _this._forceWireframe = false;\n    _this._skipFrustumClipping = false;\n    _this._forcePointsCloud = false;\n    /**\n     * Gets or sets a boolean indicating if animations are enabled\n     */\n    _this.animationsEnabled = true;\n    _this._animationPropertiesOverride = null;\n    /**\n     * Gets or sets a boolean indicating if a constant deltatime has to be used\n     * This is mostly useful for testing purposes when you do not want the animations to scale with the framerate\n     */\n    _this.useConstantAnimationDeltaTime = false;\n    /**\n     * Gets or sets a boolean indicating if the scene must keep the meshUnderPointer property updated\n     * Please note that it requires to run a ray cast through the scene on every frame\n     */\n    _this.constantlyUpdateMeshUnderPointer = false;\n    /**\n     * Defines the HTML cursor to use when hovering over interactive elements\n     */\n    _this.hoverCursor = \"pointer\";\n    /**\n     * Defines the HTML default cursor to use (empty by default)\n     */\n    _this.defaultCursor = \"\";\n    /**\n     * Defines whether cursors are handled by the scene.\n     */\n    _this.doNotHandleCursors = false;\n    /**\n     * This is used to call preventDefault() on pointer down\n     * in order to block unwanted artifacts like system double clicks\n     */\n    _this.preventDefaultOnPointerDown = true;\n    /**\n     * This is used to call preventDefault() on pointer up\n     * in order to block unwanted artifacts like system double clicks\n     */\n    _this.preventDefaultOnPointerUp = true;\n    // Metadata\n    /**\n     * Gets or sets user defined metadata\n     */\n    _this.metadata = null;\n    /**\n     * For internal use only. Please do not use.\n     */\n    _this.reservedDataStore = null;\n    /**\n     * Use this array to add regular expressions used to disable offline support for specific urls\n     */\n    _this.disableOfflineSupportExceptionRules = new Array();\n    /**\n     * An event triggered when the scene is disposed.\n     */\n    _this.onDisposeObservable = new Observable();\n    _this._onDisposeObserver = null;\n    /**\n     * An event triggered before rendering the scene (right after animations and physics)\n     */\n    _this.onBeforeRenderObservable = new Observable();\n    _this._onBeforeRenderObserver = null;\n    /**\n     * An event triggered after rendering the scene\n     */\n    _this.onAfterRenderObservable = new Observable();\n    /**\n     * An event triggered after rendering the scene for an active camera (When scene.render is called this will be called after each camera)\n     * This is triggered for each \"sub\" camera in a Camera Rig unlike onAfterCameraRenderObservable\n     */\n    _this.onAfterRenderCameraObservable = new Observable();\n    _this._onAfterRenderObserver = null;\n    /**\n     * An event triggered before animating the scene\n     */\n    _this.onBeforeAnimationsObservable = new Observable();\n    /**\n     * An event triggered after animations processing\n     */\n    _this.onAfterAnimationsObservable = new Observable();\n    /**\n     * An event triggered before draw calls are ready to be sent\n     */\n    _this.onBeforeDrawPhaseObservable = new Observable();\n    /**\n     * An event triggered after draw calls have been sent\n     */\n    _this.onAfterDrawPhaseObservable = new Observable();\n    /**\n     * An event triggered when the scene is ready\n     */\n    _this.onReadyObservable = new Observable();\n    /**\n     * An event triggered before rendering a camera\n     */\n    _this.onBeforeCameraRenderObservable = new Observable();\n    _this._onBeforeCameraRenderObserver = null;\n    /**\n     * An event triggered after rendering a camera\n     * This is triggered for the full rig Camera only unlike onAfterRenderCameraObservable\n     */\n    _this.onAfterCameraRenderObservable = new Observable();\n    _this._onAfterCameraRenderObserver = null;\n    /**\n     * An event triggered when active meshes evaluation is about to start\n     */\n    _this.onBeforeActiveMeshesEvaluationObservable = new Observable();\n    /**\n     * An event triggered when active meshes evaluation is done\n     */\n    _this.onAfterActiveMeshesEvaluationObservable = new Observable();\n    /**\n     * An event triggered when particles rendering is about to start\n     * Note: This event can be trigger more than once per frame (because particles can be rendered by render target textures as well)\n     */\n    _this.onBeforeParticlesRenderingObservable = new Observable();\n    /**\n     * An event triggered when particles rendering is done\n     * Note: This event can be trigger more than once per frame (because particles can be rendered by render target textures as well)\n     */\n    _this.onAfterParticlesRenderingObservable = new Observable();\n    /**\n     * An event triggered when SceneLoader.Append or SceneLoader.Load or SceneLoader.ImportMesh were successfully executed\n     */\n    _this.onDataLoadedObservable = new Observable();\n    /**\n     * An event triggered when a camera is created\n     */\n    _this.onNewCameraAddedObservable = new Observable();\n    /**\n     * An event triggered when a camera is removed\n     */\n    _this.onCameraRemovedObservable = new Observable();\n    /**\n     * An event triggered when a light is created\n     */\n    _this.onNewLightAddedObservable = new Observable();\n    /**\n     * An event triggered when a light is removed\n     */\n    _this.onLightRemovedObservable = new Observable();\n    /**\n     * An event triggered when a geometry is created\n     */\n    _this.onNewGeometryAddedObservable = new Observable();\n    /**\n     * An event triggered when a geometry is removed\n     */\n    _this.onGeometryRemovedObservable = new Observable();\n    /**\n     * An event triggered when a transform node is created\n     */\n    _this.onNewTransformNodeAddedObservable = new Observable();\n    /**\n     * An event triggered when a transform node is removed\n     */\n    _this.onTransformNodeRemovedObservable = new Observable();\n    /**\n     * An event triggered when a mesh is created\n     */\n    _this.onNewMeshAddedObservable = new Observable();\n    /**\n     * An event triggered when a mesh is removed\n     */\n    _this.onMeshRemovedObservable = new Observable();\n    /**\n     * An event triggered when a skeleton is created\n     */\n    _this.onNewSkeletonAddedObservable = new Observable();\n    /**\n     * An event triggered when a skeleton is removed\n     */\n    _this.onSkeletonRemovedObservable = new Observable();\n    /**\n     * An event triggered when a material is created\n     */\n    _this.onNewMaterialAddedObservable = new Observable();\n    /**\n     * An event triggered when a multi material is created\n     */\n    _this.onNewMultiMaterialAddedObservable = new Observable();\n    /**\n     * An event triggered when a material is removed\n     */\n    _this.onMaterialRemovedObservable = new Observable();\n    /**\n     * An event triggered when a multi material is removed\n     */\n    _this.onMultiMaterialRemovedObservable = new Observable();\n    /**\n     * An event triggered when a texture is created\n     */\n    _this.onNewTextureAddedObservable = new Observable();\n    /**\n     * An event triggered when a texture is removed\n     */\n    _this.onTextureRemovedObservable = new Observable();\n    /**\n     * An event triggered when render targets are about to be rendered\n     * Can happen multiple times per frame.\n     */\n    _this.onBeforeRenderTargetsRenderObservable = new Observable();\n    /**\n     * An event triggered when render targets were rendered.\n     * Can happen multiple times per frame.\n     */\n    _this.onAfterRenderTargetsRenderObservable = new Observable();\n    /**\n     * An event triggered before calculating deterministic simulation step\n     */\n    _this.onBeforeStepObservable = new Observable();\n    /**\n     * An event triggered after calculating deterministic simulation step\n     */\n    _this.onAfterStepObservable = new Observable();\n    /**\n     * An event triggered when the activeCamera property is updated\n     */\n    _this.onActiveCameraChanged = new Observable();\n    /**\n     * An event triggered when the activeCameras property is updated\n     */\n    _this.onActiveCamerasChanged = new Observable();\n    /**\n     * This Observable will be triggered before rendering each renderingGroup of each rendered camera.\n     * The RenderingGroupInfo class contains all the information about the context in which the observable is called\n     * If you wish to register an Observer only for a given set of renderingGroup, use the mask with a combination of the renderingGroup index elevated to the power of two (1 for renderingGroup 0, 2 for renderingrOup1, 4 for 2 and 8 for 3)\n     */\n    _this.onBeforeRenderingGroupObservable = new Observable();\n    /**\n     * This Observable will be triggered after rendering each renderingGroup of each rendered camera.\n     * The RenderingGroupInfo class contains all the information about the context in which the observable is called\n     * If you wish to register an Observer only for a given set of renderingGroup, use the mask with a combination of the renderingGroup index elevated to the power of two (1 for renderingGroup 0, 2 for renderingrOup1, 4 for 2 and 8 for 3)\n     */\n    _this.onAfterRenderingGroupObservable = new Observable();\n    /**\n     * This Observable will when a mesh has been imported into the scene.\n     */\n    _this.onMeshImportedObservable = new Observable();\n    /**\n     * This Observable will when an animation file has been imported into the scene.\n     */\n    _this.onAnimationFileImportedObservable = new Observable();\n    // Animations\n    /** @internal */\n    _this._registeredForLateAnimationBindings = new SmartArrayNoDuplicate(256);\n    /**\n     * Gets or sets a boolean indicating if the user want to entirely skip the picking phase when a pointer move event occurs.\n     */\n    _this.skipPointerMovePicking = false;\n    /**\n     * Gets or sets a boolean indicating if the user want to entirely skip the picking phase when a pointer down event occurs.\n     */\n    _this.skipPointerDownPicking = false;\n    /**\n     * Gets or sets a boolean indicating if the user want to entirely skip the picking phase when a pointer up event occurs.  Off by default.\n     */\n    _this.skipPointerUpPicking = false;\n    /**\n     * This observable event is triggered when any ponter event is triggered. It is registered during Scene.attachControl() and it is called BEFORE the 3D engine process anything (mesh/sprite picking for instance).\n     * You have the possibility to skip the process and the call to onPointerObservable by setting PointerInfoPre.skipOnPointerObservable to true\n     */\n    _this.onPrePointerObservable = new Observable();\n    /**\n     * Observable event triggered each time an input event is received from the rendering canvas\n     */\n    _this.onPointerObservable = new Observable();\n    // Keyboard\n    /**\n     * This observable event is triggered when any keyboard event si raised and registered during Scene.attachControl()\n     * You have the possibility to skip the process and the call to onKeyboardObservable by setting KeyboardInfoPre.skipOnPointerObservable to true\n     */\n    _this.onPreKeyboardObservable = new Observable();\n    /**\n     * Observable event triggered each time an keyboard event is received from the hosting window\n     */\n    _this.onKeyboardObservable = new Observable();\n    // Coordinates system\n    _this._useRightHandedSystem = false;\n    // Deterministic lockstep\n    _this._timeAccumulator = 0;\n    _this._currentStepId = 0;\n    _this._currentInternalStep = 0;\n    // Fog\n    _this._fogEnabled = true;\n    _this._fogMode = Scene.FOGMODE_NONE;\n    /**\n     * Gets or sets the fog color to use\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/environment/environment_introduction#fog\n     * (Default is Color3(0.2, 0.2, 0.3))\n     */\n    _this.fogColor = new Color3(0.2, 0.2, 0.3);\n    /**\n     * Gets or sets the fog density to use\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/environment/environment_introduction#fog\n     * (Default is 0.1)\n     */\n    _this.fogDensity = 0.1;\n    /**\n     * Gets or sets the fog start distance to use\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/environment/environment_introduction#fog\n     * (Default is 0)\n     */\n    _this.fogStart = 0;\n    /**\n     * Gets or sets the fog end distance to use\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/environment/environment_introduction#fog\n     * (Default is 1000)\n     */\n    _this.fogEnd = 1000.0;\n    /**\n     * Flag indicating if we need to store previous matrices when rendering\n     */\n    _this.needsPreviousWorldMatrices = false;\n    // Lights\n    _this._shadowsEnabled = true;\n    _this._lightsEnabled = true;\n    _this._unObserveActiveCameras = null;\n    // Textures\n    _this._texturesEnabled = true;\n    // Physics\n    /**\n     * Gets or sets a boolean indicating if physic engines are enabled on this scene\n     */\n    _this.physicsEnabled = true;\n    // Particles\n    /**\n     * Gets or sets a boolean indicating if particles are enabled on this scene\n     */\n    _this.particlesEnabled = true;\n    // Sprites\n    /**\n     * Gets or sets a boolean indicating if sprites are enabled on this scene\n     */\n    _this.spritesEnabled = true;\n    // Skeletons\n    _this._skeletonsEnabled = true;\n    // Lens flares\n    /**\n     * Gets or sets a boolean indicating if lens flares are enabled on this scene\n     */\n    _this.lensFlaresEnabled = true;\n    // Collisions\n    /**\n     * Gets or sets a boolean indicating if collisions are enabled on this scene\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/cameras/camera_collisions\n     */\n    _this.collisionsEnabled = true;\n    /**\n     * Defines the gravity applied to this scene (used only for collisions)\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/cameras/camera_collisions\n     */\n    _this.gravity = new Vector3(0, -9.807, 0);\n    // Postprocesses\n    /**\n     * Gets or sets a boolean indicating if postprocesses are enabled on this scene\n     */\n    _this.postProcessesEnabled = true;\n    // Customs render targets\n    /**\n     * Gets or sets a boolean indicating if render targets are enabled on this scene\n     */\n    _this.renderTargetsEnabled = true;\n    /**\n     * Gets or sets a boolean indicating if next render targets must be dumped as image for debugging purposes\n     * We recommend not using it and instead rely on Spector.js: http://spector.babylonjs.com\n     */\n    _this.dumpNextRenderTargets = false;\n    /**\n     * The list of user defined render targets added to the scene\n     */\n    _this.customRenderTargets = new Array();\n    /**\n     * Gets the list of meshes imported to the scene through SceneLoader\n     */\n    _this.importedMeshesFiles = new Array();\n    // Probes\n    /**\n     * Gets or sets a boolean indicating if probes are enabled on this scene\n     */\n    _this.probesEnabled = true;\n    _this._meshesForIntersections = new SmartArrayNoDuplicate(256);\n    // Procedural textures\n    /**\n     * Gets or sets a boolean indicating if procedural textures are enabled on this scene\n     */\n    _this.proceduralTexturesEnabled = true;\n    // Performance counters\n    _this._totalVertices = new PerfCounter();\n    /** @internal */\n    _this._activeIndices = new PerfCounter();\n    /** @internal */\n    _this._activeParticles = new PerfCounter();\n    /** @internal */\n    _this._activeBones = new PerfCounter();\n    /** @internal */\n    _this._animationTime = 0;\n    /**\n     * Gets or sets a general scale for animation speed\n     * @see https://www.babylonjs-playground.com/#IBU2W7#3\n     */\n    _this.animationTimeScale = 1;\n    _this._renderId = 0;\n    _this._frameId = 0;\n    _this._executeWhenReadyTimeoutId = null;\n    _this._intermediateRendering = false;\n    _this._defaultFrameBufferCleared = false;\n    _this._viewUpdateFlag = -1;\n    _this._projectionUpdateFlag = -1;\n    /** @internal */\n    _this._toBeDisposed = new Array(256);\n    _this._activeRequests = new Array();\n    /** @internal */\n    _this._pendingData = new Array();\n    _this._isDisposed = false;\n    /**\n     * Gets or sets a boolean indicating that all submeshes of active meshes must be rendered\n     * Use this boolean to avoid computing frustum clipping on submeshes (This could help when you are CPU bound)\n     */\n    _this.dispatchAllSubMeshesOfActiveMeshes = false;\n    _this._activeMeshes = new SmartArray(256);\n    _this._processedMaterials = new SmartArray(256);\n    _this._renderTargets = new SmartArrayNoDuplicate(256);\n    _this._materialsRenderTargets = new SmartArrayNoDuplicate(256);\n    /** @internal */\n    _this._activeParticleSystems = new SmartArray(256);\n    _this._activeSkeletons = new SmartArrayNoDuplicate(32);\n    _this._softwareSkinnedMeshes = new SmartArrayNoDuplicate(32);\n    /** @internal */\n    _this._activeAnimatables = new Array();\n    _this._transformMatrix = Matrix.Zero();\n    /**\n     * Gets or sets a boolean indicating if lights must be sorted by priority (off by default)\n     * This is useful if there are more lights that the maximum simulteanous authorized\n     */\n    _this.requireLightSorting = false;\n    /**\n     * @internal\n     * Backing store of defined scene components.\n     */\n    _this._components = [];\n    /**\n     * @internal\n     * Backing store of defined scene components.\n     */\n    _this._serializableComponents = [];\n    /**\n     * List of components to register on the next registration step.\n     */\n    _this._transientComponents = [];\n    /**\n     * @internal\n     * Defines the actions happening before camera updates.\n     */\n    _this._beforeCameraUpdateStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening before clear the canvas.\n     */\n    _this._beforeClearStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening before clear the canvas.\n     */\n    _this._beforeRenderTargetClearStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions when collecting render targets for the frame.\n     */\n    _this._gatherRenderTargetsStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening for one camera in the frame.\n     */\n    _this._gatherActiveCameraRenderTargetsStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening during the per mesh ready checks.\n     */\n    _this._isReadyForMeshStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening before evaluate active mesh checks.\n     */\n    _this._beforeEvaluateActiveMeshStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening during the evaluate sub mesh checks.\n     */\n    _this._evaluateSubMeshStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening during the active mesh stage.\n     */\n    _this._preActiveMeshStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening during the per camera render target step.\n     */\n    _this._cameraDrawRenderTargetStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just before the active camera is drawing.\n     */\n    _this._beforeCameraDrawStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just before a render target is drawing.\n     */\n    _this._beforeRenderTargetDrawStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just before a rendering group is drawing.\n     */\n    _this._beforeRenderingGroupDrawStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just before a mesh is drawing.\n     */\n    _this._beforeRenderingMeshStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just after a mesh has been drawn.\n     */\n    _this._afterRenderingMeshStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just after a rendering group has been drawn.\n     */\n    _this._afterRenderingGroupDrawStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just after the active camera has been drawn.\n     */\n    _this._afterCameraDrawStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just after the post processing\n     */\n    _this._afterCameraPostProcessStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just after a render target has been drawn.\n     */\n    _this._afterRenderTargetDrawStage = Stage.Create();\n    /**\n     * Defines the actions happening just after the post processing on a render target\n     */\n    _this._afterRenderTargetPostProcessStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening just after rendering all cameras and computing intersections.\n     */\n    _this._afterRenderStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening when a pointer move event happens.\n     */\n    _this._pointerMoveStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening when a pointer down event happens.\n     */\n    _this._pointerDownStage = Stage.Create();\n    /**\n     * @internal\n     * Defines the actions happening when a pointer up event happens.\n     */\n    _this._pointerUpStage = Stage.Create();\n    /**\n     * an optional map from Geometry Id to Geometry index in the 'geometries' array\n     */\n    _this._geometriesByUniqueId = null;\n    _this._defaultMeshCandidates = {\n      data: [],\n      length: 0\n    };\n    _this._defaultSubMeshCandidates = {\n      data: [],\n      length: 0\n    };\n    _this._preventFreeActiveMeshesAndRenderingGroups = false;\n    /** @internal */\n    _this._activeMeshesFrozen = false;\n    /** @internal */\n    _this._activeMeshesFrozenButKeepClipping = false;\n    _this._skipEvaluateActiveMeshesCompletely = false;\n    /** @internal */\n    _this._allowPostProcessClearColor = true;\n    /**\n     * User updatable function that will return a deterministic frame time when engine is in deterministic lock step mode\n     */\n    _this.getDeterministicFrameTime = function () {\n      return _this._engine.getTimeStep();\n    };\n    /** @internal */\n    _this._registeredActions = 0;\n    _this._blockMaterialDirtyMechanism = false;\n    /**\n     * Internal perfCollector instance used for sharing between inspector and playground.\n     * Marked as protected to allow sharing between prototype extensions, but disallow access at toplevel.\n     */\n    _this._perfCollector = null;\n    _this.activeCameras = new Array();\n    var fullOptions = _objectSpread({\n      useGeometryUniqueIdsMap: true,\n      useMaterialMeshMap: true,\n      useClonedMeshMap: true,\n      virtual: false\n    }, options);\n    _this._engine = engine || EngineStore.LastCreatedEngine;\n    if (!fullOptions.virtual) {\n      EngineStore._LastCreatedScene = _assertThisInitialized(_this);\n      _this._engine.scenes.push(_assertThisInitialized(_this));\n    } else {\n      _this._engine._virtualScenes.push(_assertThisInitialized(_this));\n    }\n    _this._uid = null;\n    _this._renderingManager = new RenderingManager(_assertThisInitialized(_this));\n    if (PostProcessManager) {\n      _this.postProcessManager = new PostProcessManager(_assertThisInitialized(_this));\n    }\n    if (IsWindowObjectExist()) {\n      _this.attachControl();\n    }\n    // Uniform Buffer\n    _this._createUbo();\n    // Default Image processing definition\n    if (ImageProcessingConfiguration) {\n      _this._imageProcessingConfiguration = new ImageProcessingConfiguration();\n    }\n    _this.setDefaultCandidateProviders();\n    if (fullOptions.useGeometryUniqueIdsMap) {\n      _this._geometriesByUniqueId = {};\n    }\n    _this.useMaterialMeshMap = fullOptions.useMaterialMeshMap;\n    _this.useClonedMeshMap = fullOptions.useClonedMeshMap;\n    if (!options || !options.virtual) {\n      _this._engine.onNewSceneAddedObservable.notifyObservers(_assertThisInitialized(_this));\n    }\n    return _this;\n  }\n  /**\n   * Factory used to create the default material.\n   * @param scene The scene to create the material for\n   * @returns The default material\n   */\n  _createClass(Scene, [{\n    key: \"environmentTexture\",\n    get:\n    /**\n     * Texture used in all pbr material as the reflection texture.\n     * As in the majority of the scene they are the same (exception for multi room and so on),\n     * this is easier to reference from here than from all the materials.\n     */\n    function get() {\n      return this._environmentTexture;\n    }\n    /**\n     * Texture used in all pbr material as the reflection texture.\n     * As in the majority of the scene they are the same (exception for multi room and so on),\n     * this is easier to set here than in all the materials.\n     */,\n    set: function set(value) {\n      if (this._environmentTexture === value) {\n        return;\n      }\n      this._environmentTexture = value;\n      this.markAllMaterialsAsDirty(1);\n    }\n    /**\n     * Default image processing configuration used either in the rendering\n     * Forward main pass or through the imageProcessingPostProcess if present.\n     * As in the majority of the scene they are the same (exception for multi camera),\n     * this is easier to reference from here than from all the materials and post process.\n     *\n     * No setter as we it is a shared configuration, you can set the values instead.\n     */\n  }, {\n    key: \"imageProcessingConfiguration\",\n    get: function get() {\n      return this._imageProcessingConfiguration;\n    }\n    /**\n     * Gets or sets a value indicating how to treat performance relatively to ease of use and backward compatibility\n     */\n  }, {\n    key: \"performancePriority\",\n    get: function get() {\n      return this._performancePriority;\n    },\n    set: function set(value) {\n      if (value === this._performancePriority) {\n        return;\n      }\n      this._performancePriority = value;\n      switch (value) {\n        case ScenePerformancePriority.BackwardCompatible:\n          this.skipFrustumClipping = false;\n          this._renderingManager.maintainStateBetweenFrames = false;\n          this.skipPointerMovePicking = false;\n          this.autoClear = true;\n          break;\n        case ScenePerformancePriority.Intermediate:\n          this.skipFrustumClipping = false;\n          this._renderingManager.maintainStateBetweenFrames = false;\n          this.skipPointerMovePicking = true;\n          this.autoClear = false;\n          break;\n        case ScenePerformancePriority.Aggressive:\n          this.skipFrustumClipping = true;\n          this._renderingManager.maintainStateBetweenFrames = true;\n          this.skipPointerMovePicking = true;\n          this.autoClear = false;\n          break;\n      }\n    }\n    /**\n     * Gets or sets a boolean indicating if all rendering must be done in wireframe\n     */\n  }, {\n    key: \"forceWireframe\",\n    get: function get() {\n      return this._forceWireframe;\n    }\n    /**\n     * Gets or sets a boolean indicating if we should skip the frustum clipping part of the active meshes selection\n     */,\n    set: function set(value) {\n      if (this._forceWireframe === value) {\n        return;\n      }\n      this._forceWireframe = value;\n      this.markAllMaterialsAsDirty(16);\n    }\n  }, {\n    key: \"skipFrustumClipping\",\n    get: function get() {\n      return this._skipFrustumClipping;\n    }\n    /**\n     * Gets or sets a boolean indicating if all rendering must be done in point cloud\n     */,\n    set: function set(value) {\n      if (this._skipFrustumClipping === value) {\n        return;\n      }\n      this._skipFrustumClipping = value;\n    }\n  }, {\n    key: \"forcePointsCloud\",\n    get: function get() {\n      return this._forcePointsCloud;\n    }\n    /**\n     * Gets or sets the animation properties override\n     */,\n    set: function set(value) {\n      if (this._forcePointsCloud === value) {\n        return;\n      }\n      this._forcePointsCloud = value;\n      this.markAllMaterialsAsDirty(16);\n    }\n  }, {\n    key: \"animationPropertiesOverride\",\n    get: function get() {\n      return this._animationPropertiesOverride;\n    },\n    set: function set(value) {\n      this._animationPropertiesOverride = value;\n    }\n    /** Sets a function to be executed when this scene is disposed. */\n  }, {\n    key: \"onDispose\",\n    set: function set(callback) {\n      if (this._onDisposeObserver) {\n        this.onDisposeObservable.remove(this._onDisposeObserver);\n      }\n      this._onDisposeObserver = this.onDisposeObservable.add(callback);\n    }\n    /** Sets a function to be executed before rendering this scene */\n  }, {\n    key: \"beforeRender\",\n    set: function set(callback) {\n      if (this._onBeforeRenderObserver) {\n        this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver);\n      }\n      if (callback) {\n        this._onBeforeRenderObserver = this.onBeforeRenderObservable.add(callback);\n      }\n    }\n    /** Sets a function to be executed after rendering this scene */\n  }, {\n    key: \"afterRender\",\n    set: function set(callback) {\n      if (this._onAfterRenderObserver) {\n        this.onAfterRenderObservable.remove(this._onAfterRenderObserver);\n      }\n      if (callback) {\n        this._onAfterRenderObserver = this.onAfterRenderObservable.add(callback);\n      }\n    }\n    /** Sets a function to be executed before rendering a camera*/\n  }, {\n    key: \"beforeCameraRender\",\n    set: function set(callback) {\n      if (this._onBeforeCameraRenderObserver) {\n        this.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver);\n      }\n      this._onBeforeCameraRenderObserver = this.onBeforeCameraRenderObservable.add(callback);\n    }\n    /** Sets a function to be executed after rendering a camera*/\n  }, {\n    key: \"afterCameraRender\",\n    set: function set(callback) {\n      if (this._onAfterCameraRenderObserver) {\n        this.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver);\n      }\n      this._onAfterCameraRenderObserver = this.onAfterCameraRenderObservable.add(callback);\n    }\n    /**\n     * Gets the pointer coordinates without any translation (ie. straight out of the pointer event)\n     */\n  }, {\n    key: \"unTranslatedPointer\",\n    get: function get() {\n      return this._inputManager.unTranslatedPointer;\n    }\n    /**\n     * Gets or sets the distance in pixel that you have to move to prevent some events. Default is 10 pixels\n     */\n  }, {\n    key: \"bindEyePosition\",\n    value:\n    /**\n     * Bind the current view position to an effect.\n     * @param effect The effect to be bound\n     * @param variableName name of the shader variable that will hold the eye position\n     * @param isVector3 true to indicates that variableName is a Vector3 and not a Vector4\n     * @returns the computed eye position\n     */\n    function bindEyePosition(effect) {\n      var variableName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"vEyePosition\";\n      var isVector3 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var _a;\n      var eyePosition = this._forcedViewPosition ? this._forcedViewPosition : this._mirroredCameraPosition ? this._mirroredCameraPosition : (_a = this.activeCamera.globalPosition) !== null && _a !== void 0 ? _a : this.activeCamera.devicePosition;\n      var invertNormal = this.useRightHandedSystem === (this._mirroredCameraPosition != null);\n      TmpVectors.Vector4[0].set(eyePosition.x, eyePosition.y, eyePosition.z, invertNormal ? -1 : 1);\n      if (effect) {\n        if (isVector3) {\n          effect.setFloat3(variableName, TmpVectors.Vector4[0].x, TmpVectors.Vector4[0].y, TmpVectors.Vector4[0].z);\n        } else {\n          effect.setVector4(variableName, TmpVectors.Vector4[0]);\n        }\n      }\n      return TmpVectors.Vector4[0];\n    }\n    /**\n     * Update the scene ubo before it can be used in rendering processing\n     * @returns the scene UniformBuffer\n     */\n  }, {\n    key: \"finalizeSceneUbo\",\n    value: function finalizeSceneUbo() {\n      var ubo = this.getSceneUniformBuffer();\n      var eyePosition = this.bindEyePosition(null);\n      ubo.updateFloat4(\"vEyePosition\", eyePosition.x, eyePosition.y, eyePosition.z, eyePosition.w);\n      ubo.update();\n      return ubo;\n    }\n    /**\n     * Gets or sets a boolean indicating if the scene must use right-handed coordinates system\n     */\n  }, {\n    key: \"useRightHandedSystem\",\n    get: function get() {\n      return this._useRightHandedSystem;\n    }\n    /**\n     * Sets the step Id used by deterministic lock step\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/animation/advanced_animations#deterministic-lockstep\n     * @param newStepId defines the step Id\n     */,\n    set: function set(value) {\n      if (this._useRightHandedSystem === value) {\n        return;\n      }\n      this._useRightHandedSystem = value;\n      this.markAllMaterialsAsDirty(16);\n    }\n  }, {\n    key: \"setStepId\",\n    value: function setStepId(newStepId) {\n      this._currentStepId = newStepId;\n    }\n    /**\n     * Gets the step Id used by deterministic lock step\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/animation/advanced_animations#deterministic-lockstep\n     * @returns the step Id\n     */\n  }, {\n    key: \"getStepId\",\n    value: function getStepId() {\n      return this._currentStepId;\n    }\n    /**\n     * Gets the internal step used by deterministic lock step\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/animation/advanced_animations#deterministic-lockstep\n     * @returns the internal step\n     */\n  }, {\n    key: \"getInternalStep\",\n    value: function getInternalStep() {\n      return this._currentInternalStep;\n    }\n    /**\n     * Gets or sets a boolean indicating if fog is enabled on this scene\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/environment/environment_introduction#fog\n     * (Default is true)\n     */\n  }, {\n    key: \"fogEnabled\",\n    get: function get() {\n      return this._fogEnabled;\n    }\n    /**\n     * Gets or sets the fog mode to use\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/environment/environment_introduction#fog\n     * | mode | value |\n     * | --- | --- |\n     * | FOGMODE_NONE | 0 |\n     * | FOGMODE_EXP | 1 |\n     * | FOGMODE_EXP2 | 2 |\n     * | FOGMODE_LINEAR | 3 |\n     */,\n    set: function set(value) {\n      if (this._fogEnabled === value) {\n        return;\n      }\n      this._fogEnabled = value;\n      this.markAllMaterialsAsDirty(16);\n    }\n  }, {\n    key: \"fogMode\",\n    get: function get() {\n      return this._fogMode;\n    }\n    /**\n     * Flag indicating that the frame buffer binding is handled by another component\n     */,\n    set: function set(value) {\n      if (this._fogMode === value) {\n        return;\n      }\n      this._fogMode = value;\n      this.markAllMaterialsAsDirty(16);\n    }\n  }, {\n    key: \"prePass\",\n    get: function get() {\n      return !!this.prePassRenderer && this.prePassRenderer.defaultRT.enabled;\n    }\n    /**\n     * Gets or sets a boolean indicating if shadows are enabled on this scene\n     */\n  }, {\n    key: \"shadowsEnabled\",\n    get: function get() {\n      return this._shadowsEnabled;\n    }\n    /**\n     * Gets or sets a boolean indicating if lights are enabled on this scene\n     */,\n    set: function set(value) {\n      if (this._shadowsEnabled === value) {\n        return;\n      }\n      this._shadowsEnabled = value;\n      this.markAllMaterialsAsDirty(2);\n    }\n  }, {\n    key: \"lightsEnabled\",\n    get: function get() {\n      return this._lightsEnabled;\n    }\n    /** All of the active cameras added to this scene. */,\n    set: function set(value) {\n      if (this._lightsEnabled === value) {\n        return;\n      }\n      this._lightsEnabled = value;\n      this.markAllMaterialsAsDirty(2);\n    }\n  }, {\n    key: \"activeCameras\",\n    get: function get() {\n      return this._activeCameras;\n    },\n    set: function set(cameras) {\n      var _this2 = this;\n      if (this._unObserveActiveCameras) {\n        this._unObserveActiveCameras();\n        this._unObserveActiveCameras = null;\n      }\n      if (cameras) {\n        this._unObserveActiveCameras = _ObserveArray(cameras, function () {\n          _this2.onActiveCamerasChanged.notifyObservers(_this2);\n        });\n      }\n      this._activeCameras = cameras;\n    }\n    /** Gets or sets the current active camera */\n  }, {\n    key: \"activeCamera\",\n    get: function get() {\n      return this._activeCamera;\n    },\n    set: function set(value) {\n      if (value === this._activeCamera) {\n        return;\n      }\n      this._activeCamera = value;\n      this.onActiveCameraChanged.notifyObservers(this);\n    }\n    /** The default material used on meshes when no material is affected */\n  }, {\n    key: \"defaultMaterial\",\n    get: function get() {\n      if (!this._defaultMaterial) {\n        this._defaultMaterial = Scene.DefaultMaterialFactory(this);\n      }\n      return this._defaultMaterial;\n    }\n    /** The default material used on meshes when no material is affected */,\n    set: function set(value) {\n      this._defaultMaterial = value;\n    }\n    /**\n     * Gets or sets a boolean indicating if textures are enabled on this scene\n     */\n  }, {\n    key: \"texturesEnabled\",\n    get: function get() {\n      return this._texturesEnabled;\n    }\n    /**\n     * Gets or sets a boolean indicating if skeletons are enabled on this scene\n     */,\n    set: function set(value) {\n      if (this._texturesEnabled === value) {\n        return;\n      }\n      this._texturesEnabled = value;\n      this.markAllMaterialsAsDirty(1);\n    }\n  }, {\n    key: \"skeletonsEnabled\",\n    get: function get() {\n      return this._skeletonsEnabled;\n    }\n    /** @internal */,\n    set: function set(value) {\n      if (this._skeletonsEnabled === value) {\n        return;\n      }\n      this._skeletonsEnabled = value;\n      this.markAllMaterialsAsDirty(8);\n    }\n  }, {\n    key: \"collisionCoordinator\",\n    get: function get() {\n      if (!this._collisionCoordinator) {\n        this._collisionCoordinator = Scene.CollisionCoordinatorFactory();\n        this._collisionCoordinator.init(this);\n      }\n      return this._collisionCoordinator;\n    }\n    /**\n     * Gets the scene's rendering manager\n     */\n  }, {\n    key: \"renderingManager\",\n    get: function get() {\n      return this._renderingManager;\n    }\n    /**\n     * Gets the list of frustum planes (built from the active camera)\n     */\n  }, {\n    key: \"frustumPlanes\",\n    get: function get() {\n      return this._frustumPlanes;\n    }\n    /**\n     * Registers the transient components if needed.\n     */\n  }, {\n    key: \"_registerTransientComponents\",\n    value: function _registerTransientComponents() {\n      // Register components that have been associated lately to the scene.\n      if (this._transientComponents.length > 0) {\n        var _iterator = _createForOfIteratorHelper(this._transientComponents),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var component = _step.value;\n            component.register();\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        this._transientComponents.length = 0;\n      }\n    }\n    /**\n     * @internal\n     * Add a component to the scene.\n     * Note that the ccomponent could be registered on th next frame if this is called after\n     * the register component stage.\n     * @param component Defines the component to add to the scene\n     */\n  }, {\n    key: \"_addComponent\",\n    value: function _addComponent(component) {\n      this._components.push(component);\n      this._transientComponents.push(component);\n      var serializableComponent = component;\n      if (serializableComponent.addFromContainer && serializableComponent.serialize) {\n        this._serializableComponents.push(serializableComponent);\n      }\n    }\n    /**\n     * @internal\n     * Gets a component from the scene.\n     * @param name defines the name of the component to retrieve\n     * @returns the component or null if not present\n     */\n  }, {\n    key: \"_getComponent\",\n    value: function _getComponent(name) {\n      var _iterator2 = _createForOfIteratorHelper(this._components),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var component = _step2.value;\n          if (component.name === name) {\n            return component;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return null;\n    }\n    /**\n     * Gets a string identifying the name of the class\n     * @returns \"Scene\" string\n     */\n  }, {\n    key: \"getClassName\",\n    value: function getClassName() {\n      return \"Scene\";\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getDefaultMeshCandidates\",\n    value: function _getDefaultMeshCandidates() {\n      this._defaultMeshCandidates.data = this.meshes;\n      this._defaultMeshCandidates.length = this.meshes.length;\n      return this._defaultMeshCandidates;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getDefaultSubMeshCandidates\",\n    value: function _getDefaultSubMeshCandidates(mesh) {\n      this._defaultSubMeshCandidates.data = mesh.subMeshes;\n      this._defaultSubMeshCandidates.length = mesh.subMeshes.length;\n      return this._defaultSubMeshCandidates;\n    }\n    /**\n     * Sets the default candidate providers for the scene.\n     * This sets the getActiveMeshCandidates, getActiveSubMeshCandidates, getIntersectingSubMeshCandidates\n     * and getCollidingSubMeshCandidates to their default function\n     */\n  }, {\n    key: \"setDefaultCandidateProviders\",\n    value: function setDefaultCandidateProviders() {\n      this.getActiveMeshCandidates = this._getDefaultMeshCandidates.bind(this);\n      this.getActiveSubMeshCandidates = this._getDefaultSubMeshCandidates.bind(this);\n      this.getIntersectingSubMeshCandidates = this._getDefaultSubMeshCandidates.bind(this);\n      this.getCollidingSubMeshCandidates = this._getDefaultSubMeshCandidates.bind(this);\n    }\n    /**\n     * Gets the mesh that is currently under the pointer\n     */\n  }, {\n    key: \"meshUnderPointer\",\n    get: function get() {\n      return this._inputManager.meshUnderPointer;\n    }\n    /**\n     * Gets or sets the current on-screen X position of the pointer\n     */\n  }, {\n    key: \"pointerX\",\n    get: function get() {\n      return this._inputManager.pointerX;\n    },\n    set: function set(value) {\n      this._inputManager.pointerX = value;\n    }\n    /**\n     * Gets or sets the current on-screen Y position of the pointer\n     */\n  }, {\n    key: \"pointerY\",\n    get: function get() {\n      return this._inputManager.pointerY;\n    },\n    set: function set(value) {\n      this._inputManager.pointerY = value;\n    }\n    /**\n     * Gets the cached material (ie. the latest rendered one)\n     * @returns the cached material\n     */\n  }, {\n    key: \"getCachedMaterial\",\n    value: function getCachedMaterial() {\n      return this._cachedMaterial;\n    }\n    /**\n     * Gets the cached effect (ie. the latest rendered one)\n     * @returns the cached effect\n     */\n  }, {\n    key: \"getCachedEffect\",\n    value: function getCachedEffect() {\n      return this._cachedEffect;\n    }\n    /**\n     * Gets the cached visibility state (ie. the latest rendered one)\n     * @returns the cached visibility state\n     */\n  }, {\n    key: \"getCachedVisibility\",\n    value: function getCachedVisibility() {\n      return this._cachedVisibility;\n    }\n    /**\n     * Gets a boolean indicating if the current material / effect / visibility must be bind again\n     * @param material defines the current material\n     * @param effect defines the current effect\n     * @param visibility defines the current visibility state\n     * @returns true if one parameter is not cached\n     */\n  }, {\n    key: \"isCachedMaterialInvalid\",\n    value: function isCachedMaterialInvalid(material, effect) {\n      var visibility = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      return this._cachedEffect !== effect || this._cachedMaterial !== material || this._cachedVisibility !== visibility;\n    }\n    /**\n     * Gets the engine associated with the scene\n     * @returns an Engine\n     */\n  }, {\n    key: \"getEngine\",\n    value: function getEngine() {\n      return this._engine;\n    }\n    /**\n     * Gets the total number of vertices rendered per frame\n     * @returns the total number of vertices rendered per frame\n     */\n  }, {\n    key: \"getTotalVertices\",\n    value: function getTotalVertices() {\n      return this._totalVertices.current;\n    }\n    /**\n     * Gets the performance counter for total vertices\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#instrumentation\n     */\n  }, {\n    key: \"totalVerticesPerfCounter\",\n    get: function get() {\n      return this._totalVertices;\n    }\n    /**\n     * Gets the total number of active indices rendered per frame (You can deduce the number of rendered triangles by dividing this number by 3)\n     * @returns the total number of active indices rendered per frame\n     */\n  }, {\n    key: \"getActiveIndices\",\n    value: function getActiveIndices() {\n      return this._activeIndices.current;\n    }\n    /**\n     * Gets the performance counter for active indices\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#instrumentation\n     */\n  }, {\n    key: \"totalActiveIndicesPerfCounter\",\n    get: function get() {\n      return this._activeIndices;\n    }\n    /**\n     * Gets the total number of active particles rendered per frame\n     * @returns the total number of active particles rendered per frame\n     */\n  }, {\n    key: \"getActiveParticles\",\n    value: function getActiveParticles() {\n      return this._activeParticles.current;\n    }\n    /**\n     * Gets the performance counter for active particles\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#instrumentation\n     */\n  }, {\n    key: \"activeParticlesPerfCounter\",\n    get: function get() {\n      return this._activeParticles;\n    }\n    /**\n     * Gets the total number of active bones rendered per frame\n     * @returns the total number of active bones rendered per frame\n     */\n  }, {\n    key: \"getActiveBones\",\n    value: function getActiveBones() {\n      return this._activeBones.current;\n    }\n    /**\n     * Gets the performance counter for active bones\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#instrumentation\n     */\n  }, {\n    key: \"activeBonesPerfCounter\",\n    get: function get() {\n      return this._activeBones;\n    }\n    /**\n     * Gets the array of active meshes\n     * @returns an array of AbstractMesh\n     */\n  }, {\n    key: \"getActiveMeshes\",\n    value: function getActiveMeshes() {\n      return this._activeMeshes;\n    }\n    /**\n     * Gets the animation ratio (which is 1.0 is the scene renders at 60fps and 2 if the scene renders at 30fps, etc.)\n     * @returns a number\n     */\n  }, {\n    key: \"getAnimationRatio\",\n    value: function getAnimationRatio() {\n      return this._animationRatio !== undefined ? this._animationRatio : 1;\n    }\n    /**\n     * Gets an unique Id for the current render phase\n     * @returns a number\n     */\n  }, {\n    key: \"getRenderId\",\n    value: function getRenderId() {\n      return this._renderId;\n    }\n    /**\n     * Gets an unique Id for the current frame\n     * @returns a number\n     */\n  }, {\n    key: \"getFrameId\",\n    value: function getFrameId() {\n      return this._frameId;\n    }\n    /** Call this function if you want to manually increment the render Id*/\n  }, {\n    key: \"incrementRenderId\",\n    value: function incrementRenderId() {\n      this._renderId++;\n    }\n  }, {\n    key: \"_createUbo\",\n    value: function _createUbo() {\n      this.setSceneUniformBuffer(this.createSceneUniformBuffer());\n    }\n    /**\n     * Use this method to simulate a pointer move on a mesh\n     * The pickResult parameter can be obtained from a scene.pick or scene.pickWithRay\n     * @param pickResult pickingInfo of the object wished to simulate pointer event on\n     * @param pointerEventInit pointer event state to be used when simulating the pointer event (eg. pointer id for multitouch)\n     * @returns the current scene\n     */\n  }, {\n    key: \"simulatePointerMove\",\n    value: function simulatePointerMove(pickResult, pointerEventInit) {\n      this._inputManager.simulatePointerMove(pickResult, pointerEventInit);\n      return this;\n    }\n    /**\n     * Use this method to simulate a pointer down on a mesh\n     * The pickResult parameter can be obtained from a scene.pick or scene.pickWithRay\n     * @param pickResult pickingInfo of the object wished to simulate pointer event on\n     * @param pointerEventInit pointer event state to be used when simulating the pointer event (eg. pointer id for multitouch)\n     * @returns the current scene\n     */\n  }, {\n    key: \"simulatePointerDown\",\n    value: function simulatePointerDown(pickResult, pointerEventInit) {\n      this._inputManager.simulatePointerDown(pickResult, pointerEventInit);\n      return this;\n    }\n    /**\n     * Use this method to simulate a pointer up on a mesh\n     * The pickResult parameter can be obtained from a scene.pick or scene.pickWithRay\n     * @param pickResult pickingInfo of the object wished to simulate pointer event on\n     * @param pointerEventInit pointer event state to be used when simulating the pointer event (eg. pointer id for multitouch)\n     * @param doubleTap indicates that the pointer up event should be considered as part of a double click (false by default)\n     * @returns the current scene\n     */\n  }, {\n    key: \"simulatePointerUp\",\n    value: function simulatePointerUp(pickResult, pointerEventInit, doubleTap) {\n      this._inputManager.simulatePointerUp(pickResult, pointerEventInit, doubleTap);\n      return this;\n    }\n    /**\n     * Gets a boolean indicating if the current pointer event is captured (meaning that the scene has already handled the pointer down)\n     * @param pointerId defines the pointer id to use in a multi-touch scenario (0 by default)\n     * @returns true if the pointer was captured\n     */\n  }, {\n    key: \"isPointerCaptured\",\n    value: function isPointerCaptured() {\n      var pointerId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this._inputManager.isPointerCaptured(pointerId);\n    }\n    /**\n     * Attach events to the canvas (To handle actionManagers triggers and raise onPointerMove, onPointerDown and onPointerUp\n     * @param attachUp defines if you want to attach events to pointerup\n     * @param attachDown defines if you want to attach events to pointerdown\n     * @param attachMove defines if you want to attach events to pointermove\n     */\n  }, {\n    key: \"attachControl\",\n    value: function attachControl() {\n      var attachUp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var attachDown = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var attachMove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      this._inputManager.attachControl(attachUp, attachDown, attachMove);\n    }\n    /** Detaches all event handlers*/\n  }, {\n    key: \"detachControl\",\n    value: function detachControl() {\n      this._inputManager.detachControl();\n    }\n    /**\n     * This function will check if the scene can be rendered (textures are loaded, shaders are compiled)\n     * Delay loaded resources are not taking in account\n     * @param checkRenderTargets true to also check that the meshes rendered as part of a render target are ready (default: true)\n     * @returns true if all required resources are ready\n     */\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      var checkRenderTargets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (this._isDisposed) {\n        return false;\n      }\n      var index;\n      var engine = this.getEngine();\n      var isReady = true;\n      // Pending data\n      if (this._pendingData.length > 0) {\n        isReady = false;\n      }\n      // Meshes\n      if (checkRenderTargets) {\n        this._processedMaterials.reset();\n        this._materialsRenderTargets.reset();\n      }\n      for (index = 0; index < this.meshes.length; index++) {\n        var mesh = this.meshes[index];\n        if (!mesh.subMeshes || mesh.subMeshes.length === 0) {\n          continue;\n        }\n        // Do not stop at the first encountered \"unready\" object as we want to ensure\n        // all materials are starting off their compilation in parallel.\n        if (!mesh.isReady(true)) {\n          isReady = false;\n          continue;\n        }\n        var hardwareInstancedRendering = mesh.hasThinInstances || mesh.getClassName() === \"InstancedMesh\" || mesh.getClassName() === \"InstancedLinesMesh\" || engine.getCaps().instancedArrays && mesh.instances.length > 0;\n        // Is Ready For Mesh\n        var _iterator3 = _createForOfIteratorHelper(this._isReadyForMeshStage),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var step = _step3.value;\n            if (!step.action(mesh, hardwareInstancedRendering)) {\n              isReady = false;\n            }\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n        if (!checkRenderTargets) {\n          continue;\n        }\n        var mat = mesh.material || this.defaultMaterial;\n        if (mat) {\n          if (mat._storeEffectOnSubMeshes) {\n            var _iterator4 = _createForOfIteratorHelper(mesh.subMeshes),\n              _step4;\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                var subMesh = _step4.value;\n                var material = subMesh.getMaterial();\n                if (material && material.hasRenderTargetTextures && material.getRenderTargetTextures != null) {\n                  if (this._processedMaterials.indexOf(material) === -1) {\n                    this._processedMaterials.push(material);\n                    this._materialsRenderTargets.concatWithNoDuplicate(material.getRenderTargetTextures());\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n          } else {\n            if (mat.hasRenderTargetTextures && mat.getRenderTargetTextures != null) {\n              if (this._processedMaterials.indexOf(mat) === -1) {\n                this._processedMaterials.push(mat);\n                this._materialsRenderTargets.concatWithNoDuplicate(mat.getRenderTargetTextures());\n              }\n            }\n          }\n        }\n      }\n      if (!isReady) {\n        return false;\n      }\n      // Effects\n      if (!engine.areAllEffectsReady()) {\n        return false;\n      }\n      // Render targets\n      if (checkRenderTargets) {\n        for (index = 0; index < this._materialsRenderTargets.length; ++index) {\n          var rtt = this._materialsRenderTargets.data[index];\n          if (!rtt.isReadyForRendering()) {\n            return false;\n          }\n        }\n      }\n      // Geometries\n      for (index = 0; index < this.geometries.length; index++) {\n        var geometry = this.geometries[index];\n        if (geometry.delayLoadState === 2) {\n          return false;\n        }\n      }\n      // Post-processes\n      if (this.activeCameras && this.activeCameras.length > 0) {\n        var _iterator5 = _createForOfIteratorHelper(this.activeCameras),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var camera = _step5.value;\n            if (!camera.isReady(true)) {\n              return false;\n            }\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      } else if (this.activeCamera) {\n        if (!this.activeCamera.isReady(true)) {\n          return false;\n        }\n      }\n      // Particles\n      var _iterator6 = _createForOfIteratorHelper(this.particleSystems),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var particleSystem = _step6.value;\n          if (!particleSystem.isReady()) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n      return true;\n    }\n    /** Resets all cached information relative to material (including effect and visibility) */\n  }, {\n    key: \"resetCachedMaterial\",\n    value: function resetCachedMaterial() {\n      this._cachedMaterial = null;\n      this._cachedEffect = null;\n      this._cachedVisibility = null;\n    }\n    /**\n     * Registers a function to be called before every frame render\n     * @param func defines the function to register\n     */\n  }, {\n    key: \"registerBeforeRender\",\n    value: function registerBeforeRender(func) {\n      this.onBeforeRenderObservable.add(func);\n    }\n    /**\n     * Unregisters a function called before every frame render\n     * @param func defines the function to unregister\n     */\n  }, {\n    key: \"unregisterBeforeRender\",\n    value: function unregisterBeforeRender(func) {\n      this.onBeforeRenderObservable.removeCallback(func);\n    }\n    /**\n     * Registers a function to be called after every frame render\n     * @param func defines the function to register\n     */\n  }, {\n    key: \"registerAfterRender\",\n    value: function registerAfterRender(func) {\n      this.onAfterRenderObservable.add(func);\n    }\n    /**\n     * Unregisters a function called after every frame render\n     * @param func defines the function to unregister\n     */\n  }, {\n    key: \"unregisterAfterRender\",\n    value: function unregisterAfterRender(func) {\n      this.onAfterRenderObservable.removeCallback(func);\n    }\n  }, {\n    key: \"_executeOnceBeforeRender\",\n    value: function _executeOnceBeforeRender(func) {\n      var _this3 = this;\n      var execFunc = function execFunc() {\n        func();\n        setTimeout(function () {\n          _this3.unregisterBeforeRender(execFunc);\n        });\n      };\n      this.registerBeforeRender(execFunc);\n    }\n    /**\n     * The provided function will run before render once and will be disposed afterwards.\n     * A timeout delay can be provided so that the function will be executed in N ms.\n     * The timeout is using the browser's native setTimeout so time percision cannot be guaranteed.\n     * @param func The function to be executed.\n     * @param timeout optional delay in ms\n     */\n  }, {\n    key: \"executeOnceBeforeRender\",\n    value: function executeOnceBeforeRender(func, timeout) {\n      var _this4 = this;\n      if (timeout !== undefined) {\n        setTimeout(function () {\n          _this4._executeOnceBeforeRender(func);\n        }, timeout);\n      } else {\n        this._executeOnceBeforeRender(func);\n      }\n    }\n    /**\n     * This function can help adding any object to the list of data awaited to be ready in order to check for a complete scene loading.\n     * @param data defines the object to wait for\n     */\n  }, {\n    key: \"addPendingData\",\n    value: function addPendingData(data) {\n      this._pendingData.push(data);\n    }\n    /**\n     * Remove a pending data from the loading list which has previously been added with addPendingData.\n     * @param data defines the object to remove from the pending list\n     */\n  }, {\n    key: \"removePendingData\",\n    value: function removePendingData(data) {\n      var wasLoading = this.isLoading;\n      var index = this._pendingData.indexOf(data);\n      if (index !== -1) {\n        this._pendingData.splice(index, 1);\n      }\n      if (wasLoading && !this.isLoading) {\n        this.onDataLoadedObservable.notifyObservers(this);\n      }\n    }\n    /**\n     * Returns the number of items waiting to be loaded\n     * @returns the number of items waiting to be loaded\n     */\n  }, {\n    key: \"getWaitingItemsCount\",\n    value: function getWaitingItemsCount() {\n      return this._pendingData.length;\n    }\n    /**\n     * Returns a boolean indicating if the scene is still loading data\n     */\n  }, {\n    key: \"isLoading\",\n    get: function get() {\n      return this._pendingData.length > 0;\n    }\n    /**\n     * Registers a function to be executed when the scene is ready\n     * @param {Function} func - the function to be executed\n     * @param checkRenderTargets true to also check that the meshes rendered as part of a render target are ready (default: false)\n     */\n  }, {\n    key: \"executeWhenReady\",\n    value: function executeWhenReady(func) {\n      var checkRenderTargets = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      this.onReadyObservable.addOnce(func);\n      if (this._executeWhenReadyTimeoutId !== null) {\n        return;\n      }\n      this._checkIsReady(checkRenderTargets);\n    }\n    /**\n     * Returns a promise that resolves when the scene is ready\n     * @param checkRenderTargets true to also check that the meshes rendered as part of a render target are ready (default: false)\n     * @returns A promise that resolves when the scene is ready\n     */\n  }, {\n    key: \"whenReadyAsync\",\n    value: function whenReadyAsync() {\n      var _this5 = this;\n      var checkRenderTargets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return new Promise(function (resolve) {\n        _this5.executeWhenReady(function () {\n          resolve();\n        }, checkRenderTargets);\n      });\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_checkIsReady\",\n    value: function _checkIsReady() {\n      var _this6 = this;\n      var checkRenderTargets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this._registerTransientComponents();\n      if (this.isReady(checkRenderTargets)) {\n        this.onReadyObservable.notifyObservers(this);\n        this.onReadyObservable.clear();\n        this._executeWhenReadyTimeoutId = null;\n        return;\n      }\n      if (this._isDisposed) {\n        this.onReadyObservable.clear();\n        this._executeWhenReadyTimeoutId = null;\n        return;\n      }\n      this._executeWhenReadyTimeoutId = setTimeout(function () {\n        // Ensure materials effects are checked outside render loops\n        _this6.incrementRenderId();\n        _this6._checkIsReady(checkRenderTargets);\n      }, 100);\n    }\n    /**\n     * Gets all animatable attached to the scene\n     */\n  }, {\n    key: \"animatables\",\n    get: function get() {\n      return this._activeAnimatables;\n    }\n    /**\n     * Resets the last animation time frame.\n     * Useful to override when animations start running when loading a scene for the first time.\n     */\n  }, {\n    key: \"resetLastAnimationTimeFrame\",\n    value: function resetLastAnimationTimeFrame() {\n      this._animationTimeLast = PrecisionDate.Now;\n    }\n    // Matrix\n    /**\n     * Gets the current view matrix\n     * @returns a Matrix\n     */\n  }, {\n    key: \"getViewMatrix\",\n    value: function getViewMatrix() {\n      return this._viewMatrix;\n    }\n    /**\n     * Gets the current projection matrix\n     * @returns a Matrix\n     */\n  }, {\n    key: \"getProjectionMatrix\",\n    value: function getProjectionMatrix() {\n      return this._projectionMatrix;\n    }\n    /**\n     * Gets the current transform matrix\n     * @returns a Matrix made of View * Projection\n     */\n  }, {\n    key: \"getTransformMatrix\",\n    value: function getTransformMatrix() {\n      return this._transformMatrix;\n    }\n    /**\n     * Sets the current transform matrix\n     * @param viewL defines the View matrix to use\n     * @param projectionL defines the Projection matrix to use\n     * @param viewR defines the right View matrix to use (if provided)\n     * @param projectionR defines the right Projection matrix to use (if provided)\n     */\n  }, {\n    key: \"setTransformMatrix\",\n    value: function setTransformMatrix(viewL, projectionL, viewR, projectionR) {\n      // clear the multiviewSceneUbo if no viewR and projectionR are defined\n      if (!viewR && !projectionR && this._multiviewSceneUbo) {\n        this._multiviewSceneUbo.dispose();\n        this._multiviewSceneUbo = null;\n      }\n      if (this._viewUpdateFlag === viewL.updateFlag && this._projectionUpdateFlag === projectionL.updateFlag) {\n        return;\n      }\n      this._viewUpdateFlag = viewL.updateFlag;\n      this._projectionUpdateFlag = projectionL.updateFlag;\n      this._viewMatrix = viewL;\n      this._projectionMatrix = projectionL;\n      this._viewMatrix.multiplyToRef(this._projectionMatrix, this._transformMatrix);\n      // Update frustum\n      if (!this._frustumPlanes) {\n        this._frustumPlanes = Frustum.GetPlanes(this._transformMatrix);\n      } else {\n        Frustum.GetPlanesToRef(this._transformMatrix, this._frustumPlanes);\n      }\n      if (this._multiviewSceneUbo && this._multiviewSceneUbo.useUbo) {\n        this._updateMultiviewUbo(viewR, projectionR);\n      } else if (this._sceneUbo.useUbo) {\n        this._sceneUbo.updateMatrix(\"viewProjection\", this._transformMatrix);\n        this._sceneUbo.updateMatrix(\"view\", this._viewMatrix);\n        this._sceneUbo.updateMatrix(\"projection\", this._projectionMatrix);\n      }\n    }\n    /**\n     * Gets the uniform buffer used to store scene data\n     * @returns a UniformBuffer\n     */\n  }, {\n    key: \"getSceneUniformBuffer\",\n    value: function getSceneUniformBuffer() {\n      return this._multiviewSceneUbo ? this._multiviewSceneUbo : this._sceneUbo;\n    }\n    /**\n     * Creates a scene UBO\n     * @param name name of the uniform buffer (optional, for debugging purpose only)\n     * @returns a new ubo\n     */\n  }, {\n    key: \"createSceneUniformBuffer\",\n    value: function createSceneUniformBuffer(name) {\n      var sceneUbo = new UniformBuffer(this._engine, undefined, false, name !== null && name !== void 0 ? name : \"scene\");\n      sceneUbo.addUniform(\"viewProjection\", 16);\n      sceneUbo.addUniform(\"view\", 16);\n      sceneUbo.addUniform(\"projection\", 16);\n      sceneUbo.addUniform(\"vEyePosition\", 4);\n      return sceneUbo;\n    }\n    /**\n     * Sets the scene ubo\n     * @param ubo the ubo to set for the scene\n     */\n  }, {\n    key: \"setSceneUniformBuffer\",\n    value: function setSceneUniformBuffer(ubo) {\n      this._sceneUbo = ubo;\n      this._viewUpdateFlag = -1;\n      this._projectionUpdateFlag = -1;\n    }\n    /**\n     * Gets an unique (relatively to the current scene) Id\n     * @returns an unique number for the scene\n     */\n  }, {\n    key: \"getUniqueId\",\n    value: function getUniqueId() {\n      return UniqueIdGenerator.UniqueId;\n    }\n    /**\n     * Add a mesh to the list of scene's meshes\n     * @param newMesh defines the mesh to add\n     * @param recursive if all child meshes should also be added to the scene\n     */\n  }, {\n    key: \"addMesh\",\n    value: function addMesh(newMesh) {\n      var _this7 = this;\n      var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.meshes.push(newMesh);\n      newMesh._resyncLightSources();\n      if (!newMesh.parent) {\n        newMesh._addToSceneRootNodes();\n      }\n      this.onNewMeshAddedObservable.notifyObservers(newMesh);\n      if (recursive) {\n        newMesh.getChildMeshes().forEach(function (m) {\n          _this7.addMesh(m);\n        });\n      }\n    }\n    /**\n     * Remove a mesh for the list of scene's meshes\n     * @param toRemove defines the mesh to remove\n     * @param recursive if all child meshes should also be removed from the scene\n     * @returns the index where the mesh was in the mesh list\n     */\n  }, {\n    key: \"removeMesh\",\n    value: function removeMesh(toRemove) {\n      var _this8 = this;\n      var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var index = this.meshes.indexOf(toRemove);\n      if (index !== -1) {\n        // Remove from the scene if mesh found\n        this.meshes[index] = this.meshes[this.meshes.length - 1];\n        this.meshes.pop();\n        if (!toRemove.parent) {\n          toRemove._removeFromSceneRootNodes();\n        }\n      }\n      this._inputManager._invalidateMesh(toRemove);\n      this.onMeshRemovedObservable.notifyObservers(toRemove);\n      if (recursive) {\n        toRemove.getChildMeshes().forEach(function (m) {\n          _this8.removeMesh(m);\n        });\n      }\n      return index;\n    }\n    /**\n     * Add a transform node to the list of scene's transform nodes\n     * @param newTransformNode defines the transform node to add\n     */\n  }, {\n    key: \"addTransformNode\",\n    value: function addTransformNode(newTransformNode) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      if (newTransformNode.getScene() === this && newTransformNode._indexInSceneTransformNodesArray !== -1) {\n        // Already there?\n        return;\n      }\n      newTransformNode._indexInSceneTransformNodesArray = this.transformNodes.length;\n      this.transformNodes.push(newTransformNode);\n      if (!newTransformNode.parent) {\n        newTransformNode._addToSceneRootNodes();\n      }\n      this.onNewTransformNodeAddedObservable.notifyObservers(newTransformNode);\n    }\n    /**\n     * Remove a transform node for the list of scene's transform nodes\n     * @param toRemove defines the transform node to remove\n     * @returns the index where the transform node was in the transform node list\n     */\n  }, {\n    key: \"removeTransformNode\",\n    value: function removeTransformNode(toRemove) {\n      var index = toRemove._indexInSceneTransformNodesArray;\n      if (index !== -1) {\n        if (index !== this.transformNodes.length - 1) {\n          var lastNode = this.transformNodes[this.transformNodes.length - 1];\n          this.transformNodes[index] = lastNode;\n          lastNode._indexInSceneTransformNodesArray = index;\n        }\n        toRemove._indexInSceneTransformNodesArray = -1;\n        this.transformNodes.pop();\n        if (!toRemove.parent) {\n          toRemove._removeFromSceneRootNodes();\n        }\n      }\n      this.onTransformNodeRemovedObservable.notifyObservers(toRemove);\n      return index;\n    }\n    /**\n     * Remove a skeleton for the list of scene's skeletons\n     * @param toRemove defines the skeleton to remove\n     * @returns the index where the skeleton was in the skeleton list\n     */\n  }, {\n    key: \"removeSkeleton\",\n    value: function removeSkeleton(toRemove) {\n      var index = this.skeletons.indexOf(toRemove);\n      if (index !== -1) {\n        // Remove from the scene if found\n        this.skeletons.splice(index, 1);\n        this.onSkeletonRemovedObservable.notifyObservers(toRemove);\n        // Clean active container\n        this._executeActiveContainerCleanup(this._activeSkeletons);\n      }\n      return index;\n    }\n    /**\n     * Remove a morph target for the list of scene's morph targets\n     * @param toRemove defines the morph target to remove\n     * @returns the index where the morph target was in the morph target list\n     */\n  }, {\n    key: \"removeMorphTargetManager\",\n    value: function removeMorphTargetManager(toRemove) {\n      var index = this.morphTargetManagers.indexOf(toRemove);\n      if (index !== -1) {\n        // Remove from the scene if found\n        this.morphTargetManagers.splice(index, 1);\n      }\n      return index;\n    }\n    /**\n     * Remove a light for the list of scene's lights\n     * @param toRemove defines the light to remove\n     * @returns the index where the light was in the light list\n     */\n  }, {\n    key: \"removeLight\",\n    value: function removeLight(toRemove) {\n      var index = this.lights.indexOf(toRemove);\n      if (index !== -1) {\n        // Remove from meshes\n        var _iterator7 = _createForOfIteratorHelper(this.meshes),\n          _step7;\n        try {\n          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n            var mesh = _step7.value;\n            mesh._removeLightSource(toRemove, false);\n          }\n          // Remove from the scene if mesh found\n        } catch (err) {\n          _iterator7.e(err);\n        } finally {\n          _iterator7.f();\n        }\n        this.lights.splice(index, 1);\n        this.sortLightsByPriority();\n        if (!toRemove.parent) {\n          toRemove._removeFromSceneRootNodes();\n        }\n      }\n      this.onLightRemovedObservable.notifyObservers(toRemove);\n      return index;\n    }\n    /**\n     * Remove a camera for the list of scene's cameras\n     * @param toRemove defines the camera to remove\n     * @returns the index where the camera was in the camera list\n     */\n  }, {\n    key: \"removeCamera\",\n    value: function removeCamera(toRemove) {\n      var index = this.cameras.indexOf(toRemove);\n      if (index !== -1) {\n        // Remove from the scene if mesh found\n        this.cameras.splice(index, 1);\n        if (!toRemove.parent) {\n          toRemove._removeFromSceneRootNodes();\n        }\n      }\n      // Remove from activeCameras\n      if (this.activeCameras) {\n        var index2 = this.activeCameras.indexOf(toRemove);\n        if (index2 !== -1) {\n          // Remove from the scene if mesh found\n          this.activeCameras.splice(index2, 1);\n        }\n      }\n      // Reset the activeCamera\n      if (this.activeCamera === toRemove) {\n        if (this.cameras.length > 0) {\n          this.activeCamera = this.cameras[0];\n        } else {\n          this.activeCamera = null;\n        }\n      }\n      this.onCameraRemovedObservable.notifyObservers(toRemove);\n      return index;\n    }\n    /**\n     * Remove a particle system for the list of scene's particle systems\n     * @param toRemove defines the particle system to remove\n     * @returns the index where the particle system was in the particle system list\n     */\n  }, {\n    key: \"removeParticleSystem\",\n    value: function removeParticleSystem(toRemove) {\n      var index = this.particleSystems.indexOf(toRemove);\n      if (index !== -1) {\n        this.particleSystems.splice(index, 1);\n        // Clean active container\n        this._executeActiveContainerCleanup(this._activeParticleSystems);\n      }\n      return index;\n    }\n    /**\n     * Remove a animation for the list of scene's animations\n     * @param toRemove defines the animation to remove\n     * @returns the index where the animation was in the animation list\n     */\n  }, {\n    key: \"removeAnimation\",\n    value: function removeAnimation(toRemove) {\n      var index = this.animations.indexOf(toRemove);\n      if (index !== -1) {\n        this.animations.splice(index, 1);\n      }\n      return index;\n    }\n    /**\n     * Will stop the animation of the given target\n     * @param target - the target\n     * @param animationName - the name of the animation to stop (all animations will be stopped if both this and targetMask are empty)\n     * @param targetMask - a function that determines if the animation should be stopped based on its target (all animations will be stopped if both this and animationName are empty)\n     */\n  }, {\n    key: \"stopAnimation\",\n    value: function stopAnimation(target, animationName, targetMask) {\n      // Do nothing as code will be provided by animation component\n    }\n    /**\n     * Removes the given animation group from this scene.\n     * @param toRemove The animation group to remove\n     * @returns The index of the removed animation group\n     */\n  }, {\n    key: \"removeAnimationGroup\",\n    value: function removeAnimationGroup(toRemove) {\n      var index = this.animationGroups.indexOf(toRemove);\n      if (index !== -1) {\n        this.animationGroups.splice(index, 1);\n      }\n      return index;\n    }\n    /**\n     * Removes the given multi-material from this scene.\n     * @param toRemove The multi-material to remove\n     * @returns The index of the removed multi-material\n     */\n  }, {\n    key: \"removeMultiMaterial\",\n    value: function removeMultiMaterial(toRemove) {\n      var index = this.multiMaterials.indexOf(toRemove);\n      if (index !== -1) {\n        this.multiMaterials.splice(index, 1);\n      }\n      this.onMultiMaterialRemovedObservable.notifyObservers(toRemove);\n      return index;\n    }\n    /**\n     * Removes the given material from this scene.\n     * @param toRemove The material to remove\n     * @returns The index of the removed material\n     */\n  }, {\n    key: \"removeMaterial\",\n    value: function removeMaterial(toRemove) {\n      var index = toRemove._indexInSceneMaterialArray;\n      if (index !== -1 && index < this.materials.length) {\n        if (index !== this.materials.length - 1) {\n          var lastMaterial = this.materials[this.materials.length - 1];\n          this.materials[index] = lastMaterial;\n          lastMaterial._indexInSceneMaterialArray = index;\n        }\n        toRemove._indexInSceneMaterialArray = -1;\n        this.materials.pop();\n      }\n      this.onMaterialRemovedObservable.notifyObservers(toRemove);\n      return index;\n    }\n    /**\n     * Removes the given action manager from this scene.\n     * @deprecated\n     * @param toRemove The action manager to remove\n     * @returns The index of the removed action manager\n     */\n  }, {\n    key: \"removeActionManager\",\n    value: function removeActionManager(toRemove) {\n      var index = this.actionManagers.indexOf(toRemove);\n      if (index !== -1) {\n        this.actionManagers.splice(index, 1);\n      }\n      return index;\n    }\n    /**\n     * Removes the given texture from this scene.\n     * @param toRemove The texture to remove\n     * @returns The index of the removed texture\n     */\n  }, {\n    key: \"removeTexture\",\n    value: function removeTexture(toRemove) {\n      var index = this.textures.indexOf(toRemove);\n      if (index !== -1) {\n        this.textures.splice(index, 1);\n      }\n      this.onTextureRemovedObservable.notifyObservers(toRemove);\n      return index;\n    }\n    /**\n     * Adds the given light to this scene\n     * @param newLight The light to add\n     */\n  }, {\n    key: \"addLight\",\n    value: function addLight(newLight) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.lights.push(newLight);\n      this.sortLightsByPriority();\n      if (!newLight.parent) {\n        newLight._addToSceneRootNodes();\n      }\n      // Add light to all meshes (To support if the light is removed and then re-added)\n      var _iterator8 = _createForOfIteratorHelper(this.meshes),\n        _step8;\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var mesh = _step8.value;\n          if (mesh.lightSources.indexOf(newLight) === -1) {\n            mesh.lightSources.push(newLight);\n            mesh._resyncLightSources();\n          }\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n      this.onNewLightAddedObservable.notifyObservers(newLight);\n    }\n    /**\n     * Sorts the list list based on light priorities\n     */\n  }, {\n    key: \"sortLightsByPriority\",\n    value: function sortLightsByPriority() {\n      if (this.requireLightSorting) {\n        this.lights.sort(LightConstants.CompareLightsPriority);\n      }\n    }\n    /**\n     * Adds the given camera to this scene\n     * @param newCamera The camera to add\n     */\n  }, {\n    key: \"addCamera\",\n    value: function addCamera(newCamera) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.cameras.push(newCamera);\n      this.onNewCameraAddedObservable.notifyObservers(newCamera);\n      if (!newCamera.parent) {\n        newCamera._addToSceneRootNodes();\n      }\n    }\n    /**\n     * Adds the given skeleton to this scene\n     * @param newSkeleton The skeleton to add\n     */\n  }, {\n    key: \"addSkeleton\",\n    value: function addSkeleton(newSkeleton) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.skeletons.push(newSkeleton);\n      this.onNewSkeletonAddedObservable.notifyObservers(newSkeleton);\n    }\n    /**\n     * Adds the given particle system to this scene\n     * @param newParticleSystem The particle system to add\n     */\n  }, {\n    key: \"addParticleSystem\",\n    value: function addParticleSystem(newParticleSystem) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.particleSystems.push(newParticleSystem);\n    }\n    /**\n     * Adds the given animation to this scene\n     * @param newAnimation The animation to add\n     */\n  }, {\n    key: \"addAnimation\",\n    value: function addAnimation(newAnimation) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.animations.push(newAnimation);\n    }\n    /**\n     * Adds the given animation group to this scene.\n     * @param newAnimationGroup The animation group to add\n     */\n  }, {\n    key: \"addAnimationGroup\",\n    value: function addAnimationGroup(newAnimationGroup) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.animationGroups.push(newAnimationGroup);\n    }\n    /**\n     * Adds the given multi-material to this scene\n     * @param newMultiMaterial The multi-material to add\n     */\n  }, {\n    key: \"addMultiMaterial\",\n    value: function addMultiMaterial(newMultiMaterial) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.multiMaterials.push(newMultiMaterial);\n      this.onNewMultiMaterialAddedObservable.notifyObservers(newMultiMaterial);\n    }\n    /**\n     * Adds the given material to this scene\n     * @param newMaterial The material to add\n     */\n  }, {\n    key: \"addMaterial\",\n    value: function addMaterial(newMaterial) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      if (newMaterial.getScene() === this && newMaterial._indexInSceneMaterialArray !== -1) {\n        // Already there??\n        return;\n      }\n      newMaterial._indexInSceneMaterialArray = this.materials.length;\n      this.materials.push(newMaterial);\n      this.onNewMaterialAddedObservable.notifyObservers(newMaterial);\n    }\n    /**\n     * Adds the given morph target to this scene\n     * @param newMorphTargetManager The morph target to add\n     */\n  }, {\n    key: \"addMorphTargetManager\",\n    value: function addMorphTargetManager(newMorphTargetManager) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.morphTargetManagers.push(newMorphTargetManager);\n    }\n    /**\n     * Adds the given geometry to this scene\n     * @param newGeometry The geometry to add\n     */\n  }, {\n    key: \"addGeometry\",\n    value: function addGeometry(newGeometry) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      if (this._geometriesByUniqueId) {\n        this._geometriesByUniqueId[newGeometry.uniqueId] = this.geometries.length;\n      }\n      this.geometries.push(newGeometry);\n    }\n    /**\n     * Adds the given action manager to this scene\n     * @deprecated\n     * @param newActionManager The action manager to add\n     */\n  }, {\n    key: \"addActionManager\",\n    value: function addActionManager(newActionManager) {\n      this.actionManagers.push(newActionManager);\n    }\n    /**\n     * Adds the given texture to this scene.\n     * @param newTexture The texture to add\n     */\n  }, {\n    key: \"addTexture\",\n    value: function addTexture(newTexture) {\n      if (this._blockEntityCollection) {\n        return;\n      }\n      this.textures.push(newTexture);\n      this.onNewTextureAddedObservable.notifyObservers(newTexture);\n    }\n    /**\n     * Switch active camera\n     * @param newCamera defines the new active camera\n     * @param attachControl defines if attachControl must be called for the new active camera (default: true)\n     */\n  }, {\n    key: \"switchActiveCamera\",\n    value: function switchActiveCamera(newCamera) {\n      var attachControl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var canvas = this._engine.getInputElement();\n      if (!canvas) {\n        return;\n      }\n      if (this.activeCamera) {\n        this.activeCamera.detachControl();\n      }\n      this.activeCamera = newCamera;\n      if (attachControl) {\n        newCamera.attachControl();\n      }\n    }\n    /**\n     * sets the active camera of the scene using its Id\n     * @param id defines the camera's Id\n     * @returns the new active camera or null if none found.\n     */\n  }, {\n    key: \"setActiveCameraById\",\n    value: function setActiveCameraById(id) {\n      var camera = this.getCameraById(id);\n      if (camera) {\n        this.activeCamera = camera;\n        return camera;\n      }\n      return null;\n    }\n    /**\n     * sets the active camera of the scene using its name\n     * @param name defines the camera's name\n     * @returns the new active camera or null if none found.\n     */\n  }, {\n    key: \"setActiveCameraByName\",\n    value: function setActiveCameraByName(name) {\n      var camera = this.getCameraByName(name);\n      if (camera) {\n        this.activeCamera = camera;\n        return camera;\n      }\n      return null;\n    }\n    /**\n     * get an animation group using its name\n     * @param name defines the material's name\n     * @returns the animation group or null if none found.\n     */\n  }, {\n    key: \"getAnimationGroupByName\",\n    value: function getAnimationGroupByName(name) {\n      for (var index = 0; index < this.animationGroups.length; index++) {\n        if (this.animationGroups[index].name === name) {\n          return this.animationGroups[index];\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"_getMaterial\",\n    value: function _getMaterial(allowMultiMaterials, predicate) {\n      for (var index = 0; index < this.materials.length; index++) {\n        var material = this.materials[index];\n        if (predicate(material)) {\n          return material;\n        }\n      }\n      if (allowMultiMaterials) {\n        for (var _index = 0; _index < this.multiMaterials.length; _index++) {\n          var _material = this.multiMaterials[_index];\n          if (predicate(_material)) {\n            return _material;\n          }\n        }\n      }\n      return null;\n    }\n    /**\n     * Get a material using its unique id\n     * @param uniqueId defines the material's unique id\n     * @param allowMultiMaterials determines whether multimaterials should be considered\n     * @returns the material or null if none found.\n     */\n  }, {\n    key: \"getMaterialByUniqueID\",\n    value: function getMaterialByUniqueID(uniqueId) {\n      var allowMultiMaterials = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this._getMaterial(allowMultiMaterials, function (m) {\n        return m.uniqueId === uniqueId;\n      });\n    }\n    /**\n     * get a material using its id\n     * @param id defines the material's Id\n     * @param allowMultiMaterials determines whether multimaterials should be considered\n     * @returns the material or null if none found.\n     */\n  }, {\n    key: \"getMaterialById\",\n    value: function getMaterialById(id) {\n      var allowMultiMaterials = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this._getMaterial(allowMultiMaterials, function (m) {\n        return m.id === id;\n      });\n    }\n    /**\n     * Gets a material using its name\n     * @param name defines the material's name\n     * @param allowMultiMaterials determines whether multimaterials should be considered\n     * @returns the material or null if none found.\n     */\n  }, {\n    key: \"getMaterialByName\",\n    value: function getMaterialByName(name) {\n      var allowMultiMaterials = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this._getMaterial(allowMultiMaterials, function (m) {\n        return m.name === name;\n      });\n    }\n    /**\n     * Gets a last added material using a given id\n     * @param id defines the material's id\n     * @param allowMultiMaterials determines whether multimaterials should be considered\n     * @returns the last material with the given id or null if none found.\n     */\n  }, {\n    key: \"getLastMaterialById\",\n    value: function getLastMaterialById(id) {\n      var allowMultiMaterials = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      for (var index = this.materials.length - 1; index >= 0; index--) {\n        if (this.materials[index].id === id) {\n          return this.materials[index];\n        }\n      }\n      if (allowMultiMaterials) {\n        for (var _index2 = this.multiMaterials.length - 1; _index2 >= 0; _index2--) {\n          if (this.multiMaterials[_index2].id === id) {\n            return this.multiMaterials[_index2];\n          }\n        }\n      }\n      return null;\n    }\n    /**\n     * Get a texture using its unique id\n     * @param uniqueId defines the texture's unique id\n     * @returns the texture or null if none found.\n     */\n  }, {\n    key: \"getTextureByUniqueId\",\n    value: function getTextureByUniqueId(uniqueId) {\n      for (var index = 0; index < this.textures.length; index++) {\n        if (this.textures[index].uniqueId === uniqueId) {\n          return this.textures[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a texture using its name\n     * @param name defines the texture's name\n     * @returns the texture or null if none found.\n     */\n  }, {\n    key: \"getTextureByName\",\n    value: function getTextureByName(name) {\n      for (var index = 0; index < this.textures.length; index++) {\n        if (this.textures[index].name === name) {\n          return this.textures[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a camera using its Id\n     * @param id defines the Id to look for\n     * @returns the camera or null if not found\n     */\n  }, {\n    key: \"getCameraById\",\n    value: function getCameraById(id) {\n      for (var index = 0; index < this.cameras.length; index++) {\n        if (this.cameras[index].id === id) {\n          return this.cameras[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a camera using its unique Id\n     * @param uniqueId defines the unique Id to look for\n     * @returns the camera or null if not found\n     */\n  }, {\n    key: \"getCameraByUniqueId\",\n    value: function getCameraByUniqueId(uniqueId) {\n      for (var index = 0; index < this.cameras.length; index++) {\n        if (this.cameras[index].uniqueId === uniqueId) {\n          return this.cameras[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a camera using its name\n     * @param name defines the camera's name\n     * @returns the camera or null if none found.\n     */\n  }, {\n    key: \"getCameraByName\",\n    value: function getCameraByName(name) {\n      for (var index = 0; index < this.cameras.length; index++) {\n        if (this.cameras[index].name === name) {\n          return this.cameras[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a bone using its Id\n     * @param id defines the bone's Id\n     * @returns the bone or null if not found\n     */\n  }, {\n    key: \"getBoneById\",\n    value: function getBoneById(id) {\n      for (var skeletonIndex = 0; skeletonIndex < this.skeletons.length; skeletonIndex++) {\n        var skeleton = this.skeletons[skeletonIndex];\n        for (var boneIndex = 0; boneIndex < skeleton.bones.length; boneIndex++) {\n          if (skeleton.bones[boneIndex].id === id) {\n            return skeleton.bones[boneIndex];\n          }\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a bone using its id\n     * @param name defines the bone's name\n     * @returns the bone or null if not found\n     */\n  }, {\n    key: \"getBoneByName\",\n    value: function getBoneByName(name) {\n      for (var skeletonIndex = 0; skeletonIndex < this.skeletons.length; skeletonIndex++) {\n        var skeleton = this.skeletons[skeletonIndex];\n        for (var boneIndex = 0; boneIndex < skeleton.bones.length; boneIndex++) {\n          if (skeleton.bones[boneIndex].name === name) {\n            return skeleton.bones[boneIndex];\n          }\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a light node using its name\n     * @param name defines the the light's name\n     * @returns the light or null if none found.\n     */\n  }, {\n    key: \"getLightByName\",\n    value: function getLightByName(name) {\n      for (var index = 0; index < this.lights.length; index++) {\n        if (this.lights[index].name === name) {\n          return this.lights[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a light node using its Id\n     * @param id defines the light's Id\n     * @returns the light or null if none found.\n     */\n  }, {\n    key: \"getLightById\",\n    value: function getLightById(id) {\n      for (var index = 0; index < this.lights.length; index++) {\n        if (this.lights[index].id === id) {\n          return this.lights[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a light node using its scene-generated unique Id\n     * @param uniqueId defines the light's unique Id\n     * @returns the light or null if none found.\n     */\n  }, {\n    key: \"getLightByUniqueId\",\n    value: function getLightByUniqueId(uniqueId) {\n      for (var index = 0; index < this.lights.length; index++) {\n        if (this.lights[index].uniqueId === uniqueId) {\n          return this.lights[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a particle system by Id\n     * @param id defines the particle system Id\n     * @returns the corresponding system or null if none found\n     */\n  }, {\n    key: \"getParticleSystemById\",\n    value: function getParticleSystemById(id) {\n      for (var index = 0; index < this.particleSystems.length; index++) {\n        if (this.particleSystems[index].id === id) {\n          return this.particleSystems[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a geometry using its Id\n     * @param id defines the geometry's Id\n     * @returns the geometry or null if none found.\n     */\n  }, {\n    key: \"getGeometryById\",\n    value: function getGeometryById(id) {\n      for (var index = 0; index < this.geometries.length; index++) {\n        if (this.geometries[index].id === id) {\n          return this.geometries[index];\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"_getGeometryByUniqueId\",\n    value: function _getGeometryByUniqueId(uniqueId) {\n      if (this._geometriesByUniqueId) {\n        var index = this._geometriesByUniqueId[uniqueId];\n        if (index !== undefined) {\n          return this.geometries[index];\n        }\n      } else {\n        for (var _index3 = 0; _index3 < this.geometries.length; _index3++) {\n          if (this.geometries[_index3].uniqueId === uniqueId) {\n            return this.geometries[_index3];\n          }\n        }\n      }\n      return null;\n    }\n    /**\n     * Add a new geometry to this scene\n     * @param geometry defines the geometry to be added to the scene.\n     * @param force defines if the geometry must be pushed even if a geometry with this id already exists\n     * @returns a boolean defining if the geometry was added or not\n     */\n  }, {\n    key: \"pushGeometry\",\n    value: function pushGeometry(geometry, force) {\n      if (!force && this._getGeometryByUniqueId(geometry.uniqueId)) {\n        return false;\n      }\n      this.addGeometry(geometry);\n      this.onNewGeometryAddedObservable.notifyObservers(geometry);\n      return true;\n    }\n    /**\n     * Removes an existing geometry\n     * @param geometry defines the geometry to be removed from the scene\n     * @returns a boolean defining if the geometry was removed or not\n     */\n  }, {\n    key: \"removeGeometry\",\n    value: function removeGeometry(geometry) {\n      var index;\n      if (this._geometriesByUniqueId) {\n        index = this._geometriesByUniqueId[geometry.uniqueId];\n        if (index === undefined) {\n          return false;\n        }\n      } else {\n        index = this.geometries.indexOf(geometry);\n        if (index < 0) {\n          return false;\n        }\n      }\n      if (index !== this.geometries.length - 1) {\n        var lastGeometry = this.geometries[this.geometries.length - 1];\n        if (lastGeometry) {\n          this.geometries[index] = lastGeometry;\n          if (this._geometriesByUniqueId) {\n            this._geometriesByUniqueId[lastGeometry.uniqueId] = index;\n          }\n        }\n      }\n      if (this._geometriesByUniqueId) {\n        this._geometriesByUniqueId[geometry.uniqueId] = undefined;\n      }\n      this.geometries.pop();\n      this.onGeometryRemovedObservable.notifyObservers(geometry);\n      return true;\n    }\n    /**\n     * Gets the list of geometries attached to the scene\n     * @returns an array of Geometry\n     */\n  }, {\n    key: \"getGeometries\",\n    value: function getGeometries() {\n      return this.geometries;\n    }\n    /**\n     * Gets the first added mesh found of a given Id\n     * @param id defines the Id to search for\n     * @returns the mesh found or null if not found at all\n     */\n  }, {\n    key: \"getMeshById\",\n    value: function getMeshById(id) {\n      for (var index = 0; index < this.meshes.length; index++) {\n        if (this.meshes[index].id === id) {\n          return this.meshes[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a list of meshes using their Id\n     * @param id defines the Id to search for\n     * @returns a list of meshes\n     */\n  }, {\n    key: \"getMeshesById\",\n    value: function getMeshesById(id) {\n      return this.meshes.filter(function (m) {\n        return m.id === id;\n      });\n    }\n    /**\n     * Gets the first added transform node found of a given Id\n     * @param id defines the Id to search for\n     * @returns the found transform node or null if not found at all.\n     */\n  }, {\n    key: \"getTransformNodeById\",\n    value: function getTransformNodeById(id) {\n      for (var index = 0; index < this.transformNodes.length; index++) {\n        if (this.transformNodes[index].id === id) {\n          return this.transformNodes[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a transform node with its auto-generated unique Id\n     * @param uniqueId defines the unique Id to search for\n     * @returns the found transform node or null if not found at all.\n     */\n  }, {\n    key: \"getTransformNodeByUniqueId\",\n    value: function getTransformNodeByUniqueId(uniqueId) {\n      for (var index = 0; index < this.transformNodes.length; index++) {\n        if (this.transformNodes[index].uniqueId === uniqueId) {\n          return this.transformNodes[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a list of transform nodes using their Id\n     * @param id defines the Id to search for\n     * @returns a list of transform nodes\n     */\n  }, {\n    key: \"getTransformNodesById\",\n    value: function getTransformNodesById(id) {\n      return this.transformNodes.filter(function (m) {\n        return m.id === id;\n      });\n    }\n    /**\n     * Gets a mesh with its auto-generated unique Id\n     * @param uniqueId defines the unique Id to search for\n     * @returns the found mesh or null if not found at all.\n     */\n  }, {\n    key: \"getMeshByUniqueId\",\n    value: function getMeshByUniqueId(uniqueId) {\n      for (var index = 0; index < this.meshes.length; index++) {\n        if (this.meshes[index].uniqueId === uniqueId) {\n          return this.meshes[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a the last added mesh using a given Id\n     * @param id defines the Id to search for\n     * @returns the found mesh or null if not found at all.\n     */\n  }, {\n    key: \"getLastMeshById\",\n    value: function getLastMeshById(id) {\n      for (var index = this.meshes.length - 1; index >= 0; index--) {\n        if (this.meshes[index].id === id) {\n          return this.meshes[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a the last added node (Mesh, Camera, Light) using a given Id\n     * @param id defines the Id to search for\n     * @returns the found node or null if not found at all\n     */\n  }, {\n    key: \"getLastEntryById\",\n    value: function getLastEntryById(id) {\n      var index;\n      for (index = this.meshes.length - 1; index >= 0; index--) {\n        if (this.meshes[index].id === id) {\n          return this.meshes[index];\n        }\n      }\n      for (index = this.transformNodes.length - 1; index >= 0; index--) {\n        if (this.transformNodes[index].id === id) {\n          return this.transformNodes[index];\n        }\n      }\n      for (index = this.cameras.length - 1; index >= 0; index--) {\n        if (this.cameras[index].id === id) {\n          return this.cameras[index];\n        }\n      }\n      for (index = this.lights.length - 1; index >= 0; index--) {\n        if (this.lights[index].id === id) {\n          return this.lights[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a node (Mesh, Camera, Light) using a given Id\n     * @param id defines the Id to search for\n     * @returns the found node or null if not found at all\n     */\n  }, {\n    key: \"getNodeById\",\n    value: function getNodeById(id) {\n      var mesh = this.getMeshById(id);\n      if (mesh) {\n        return mesh;\n      }\n      var transformNode = this.getTransformNodeById(id);\n      if (transformNode) {\n        return transformNode;\n      }\n      var light = this.getLightById(id);\n      if (light) {\n        return light;\n      }\n      var camera = this.getCameraById(id);\n      if (camera) {\n        return camera;\n      }\n      var bone = this.getBoneById(id);\n      if (bone) {\n        return bone;\n      }\n      return null;\n    }\n    /**\n     * Gets a node (Mesh, Camera, Light) using a given name\n     * @param name defines the name to search for\n     * @returns the found node or null if not found at all.\n     */\n  }, {\n    key: \"getNodeByName\",\n    value: function getNodeByName(name) {\n      var mesh = this.getMeshByName(name);\n      if (mesh) {\n        return mesh;\n      }\n      var transformNode = this.getTransformNodeByName(name);\n      if (transformNode) {\n        return transformNode;\n      }\n      var light = this.getLightByName(name);\n      if (light) {\n        return light;\n      }\n      var camera = this.getCameraByName(name);\n      if (camera) {\n        return camera;\n      }\n      var bone = this.getBoneByName(name);\n      if (bone) {\n        return bone;\n      }\n      return null;\n    }\n    /**\n     * Gets a mesh using a given name\n     * @param name defines the name to search for\n     * @returns the found mesh or null if not found at all.\n     */\n  }, {\n    key: \"getMeshByName\",\n    value: function getMeshByName(name) {\n      for (var index = 0; index < this.meshes.length; index++) {\n        if (this.meshes[index].name === name) {\n          return this.meshes[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a transform node using a given name\n     * @param name defines the name to search for\n     * @returns the found transform node or null if not found at all.\n     */\n  }, {\n    key: \"getTransformNodeByName\",\n    value: function getTransformNodeByName(name) {\n      for (var index = 0; index < this.transformNodes.length; index++) {\n        if (this.transformNodes[index].name === name) {\n          return this.transformNodes[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a skeleton using a given Id (if many are found, this function will pick the last one)\n     * @param id defines the Id to search for\n     * @returns the found skeleton or null if not found at all.\n     */\n  }, {\n    key: \"getLastSkeletonById\",\n    value: function getLastSkeletonById(id) {\n      for (var index = this.skeletons.length - 1; index >= 0; index--) {\n        if (this.skeletons[index].id === id) {\n          return this.skeletons[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a skeleton using a given auto generated unique id\n     * @param  uniqueId defines the unique id to search for\n     * @returns the found skeleton or null if not found at all.\n     */\n  }, {\n    key: \"getSkeletonByUniqueId\",\n    value: function getSkeletonByUniqueId(uniqueId) {\n      for (var index = 0; index < this.skeletons.length; index++) {\n        if (this.skeletons[index].uniqueId === uniqueId) {\n          return this.skeletons[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a skeleton using a given id (if many are found, this function will pick the first one)\n     * @param id defines the id to search for\n     * @returns the found skeleton or null if not found at all.\n     */\n  }, {\n    key: \"getSkeletonById\",\n    value: function getSkeletonById(id) {\n      for (var index = 0; index < this.skeletons.length; index++) {\n        if (this.skeletons[index].id === id) {\n          return this.skeletons[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a skeleton using a given name\n     * @param name defines the name to search for\n     * @returns the found skeleton or null if not found at all.\n     */\n  }, {\n    key: \"getSkeletonByName\",\n    value: function getSkeletonByName(name) {\n      for (var index = 0; index < this.skeletons.length; index++) {\n        if (this.skeletons[index].name === name) {\n          return this.skeletons[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a morph target manager  using a given id (if many are found, this function will pick the last one)\n     * @param id defines the id to search for\n     * @returns the found morph target manager or null if not found at all.\n     */\n  }, {\n    key: \"getMorphTargetManagerById\",\n    value: function getMorphTargetManagerById(id) {\n      for (var index = 0; index < this.morphTargetManagers.length; index++) {\n        if (this.morphTargetManagers[index].uniqueId === id) {\n          return this.morphTargetManagers[index];\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a morph target using a given id (if many are found, this function will pick the first one)\n     * @param id defines the id to search for\n     * @returns the found morph target or null if not found at all.\n     */\n  }, {\n    key: \"getMorphTargetById\",\n    value: function getMorphTargetById(id) {\n      for (var managerIndex = 0; managerIndex < this.morphTargetManagers.length; ++managerIndex) {\n        var morphTargetManager = this.morphTargetManagers[managerIndex];\n        for (var index = 0; index < morphTargetManager.numTargets; ++index) {\n          var target = morphTargetManager.getTarget(index);\n          if (target.id === id) {\n            return target;\n          }\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a morph target using a given name (if many are found, this function will pick the first one)\n     * @param name defines the name to search for\n     * @returns the found morph target or null if not found at all.\n     */\n  }, {\n    key: \"getMorphTargetByName\",\n    value: function getMorphTargetByName(name) {\n      for (var managerIndex = 0; managerIndex < this.morphTargetManagers.length; ++managerIndex) {\n        var morphTargetManager = this.morphTargetManagers[managerIndex];\n        for (var index = 0; index < morphTargetManager.numTargets; ++index) {\n          var target = morphTargetManager.getTarget(index);\n          if (target.name === name) {\n            return target;\n          }\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a post process using a given name (if many are found, this function will pick the first one)\n     * @param name defines the name to search for\n     * @returns the found post process or null if not found at all.\n     */\n  }, {\n    key: \"getPostProcessByName\",\n    value: function getPostProcessByName(name) {\n      for (var postProcessIndex = 0; postProcessIndex < this.postProcesses.length; ++postProcessIndex) {\n        var postProcess = this.postProcesses[postProcessIndex];\n        if (postProcess.name === name) {\n          return postProcess;\n        }\n      }\n      return null;\n    }\n    /**\n     * Gets a boolean indicating if the given mesh is active\n     * @param mesh defines the mesh to look for\n     * @returns true if the mesh is in the active list\n     */\n  }, {\n    key: \"isActiveMesh\",\n    value: function isActiveMesh(mesh) {\n      return this._activeMeshes.indexOf(mesh) !== -1;\n    }\n    /**\n     * Return a unique id as a string which can serve as an identifier for the scene\n     */\n  }, {\n    key: \"uid\",\n    get: function get() {\n      if (!this._uid) {\n        this._uid = Tools.RandomId();\n      }\n      return this._uid;\n    }\n    /**\n     * Add an externally attached data from its key.\n     * This method call will fail and return false, if such key already exists.\n     * If you don't care and just want to get the data no matter what, use the more convenient getOrAddExternalDataWithFactory() method.\n     * @param key the unique key that identifies the data\n     * @param data the data object to associate to the key for this Engine instance\n     * @returns true if no such key were already present and the data was added successfully, false otherwise\n     */\n  }, {\n    key: \"addExternalData\",\n    value: function addExternalData(key, data) {\n      if (!this._externalData) {\n        this._externalData = new StringDictionary();\n      }\n      return this._externalData.add(key, data);\n    }\n    /**\n     * Get an externally attached data from its key\n     * @param key the unique key that identifies the data\n     * @returns the associated data, if present (can be null), or undefined if not present\n     */\n  }, {\n    key: \"getExternalData\",\n    value: function getExternalData(key) {\n      if (!this._externalData) {\n        return null;\n      }\n      return this._externalData.get(key);\n    }\n    /**\n     * Get an externally attached data from its key, create it using a factory if it's not already present\n     * @param key the unique key that identifies the data\n     * @param factory the factory that will be called to create the instance if and only if it doesn't exists\n     * @returns the associated data, can be null if the factory returned null.\n     */\n  }, {\n    key: \"getOrAddExternalDataWithFactory\",\n    value: function getOrAddExternalDataWithFactory(key, factory) {\n      if (!this._externalData) {\n        this._externalData = new StringDictionary();\n      }\n      return this._externalData.getOrAddWithFactory(key, factory);\n    }\n    /**\n     * Remove an externally attached data from the Engine instance\n     * @param key the unique key that identifies the data\n     * @returns true if the data was successfully removed, false if it doesn't exist\n     */\n  }, {\n    key: \"removeExternalData\",\n    value: function removeExternalData(key) {\n      return this._externalData.remove(key);\n    }\n  }, {\n    key: \"_evaluateSubMesh\",\n    value: function _evaluateSubMesh(subMesh, mesh, initialMesh, forcePush) {\n      if (forcePush || subMesh.isInFrustum(this._frustumPlanes)) {\n        var _iterator9 = _createForOfIteratorHelper(this._evaluateSubMeshStage),\n          _step9;\n        try {\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var step = _step9.value;\n            step.action(mesh, subMesh);\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n        var material = subMesh.getMaterial();\n        if (material !== null && material !== undefined) {\n          // Render targets\n          if (material.hasRenderTargetTextures && material.getRenderTargetTextures != null) {\n            if (this._processedMaterials.indexOf(material) === -1) {\n              this._processedMaterials.push(material);\n              this._materialsRenderTargets.concatWithNoDuplicate(material.getRenderTargetTextures());\n            }\n          }\n          // Dispatch\n          this._renderingManager.dispatch(subMesh, mesh, material);\n        }\n      }\n    }\n    /**\n     * Clear the processed materials smart array preventing retention point in material dispose.\n     */\n  }, {\n    key: \"freeProcessedMaterials\",\n    value: function freeProcessedMaterials() {\n      this._processedMaterials.dispose();\n    }\n    /** Gets or sets a boolean blocking all the calls to freeActiveMeshes and freeRenderingGroups\n     * It can be used in order to prevent going through methods freeRenderingGroups and freeActiveMeshes several times to improve performance\n     * when disposing several meshes in a row or a hierarchy of meshes.\n     * When used, it is the responsibility of the user to blockfreeActiveMeshesAndRenderingGroups back to false.\n     */\n  }, {\n    key: \"blockfreeActiveMeshesAndRenderingGroups\",\n    get: function get() {\n      return this._preventFreeActiveMeshesAndRenderingGroups;\n    },\n    set: function set(value) {\n      if (this._preventFreeActiveMeshesAndRenderingGroups === value) {\n        return;\n      }\n      if (value) {\n        this.freeActiveMeshes();\n        this.freeRenderingGroups();\n      }\n      this._preventFreeActiveMeshesAndRenderingGroups = value;\n    }\n    /**\n     * Clear the active meshes smart array preventing retention point in mesh dispose.\n     */\n  }, {\n    key: \"freeActiveMeshes\",\n    value: function freeActiveMeshes() {\n      if (this.blockfreeActiveMeshesAndRenderingGroups) {\n        return;\n      }\n      this._activeMeshes.dispose();\n      if (this.activeCamera && this.activeCamera._activeMeshes) {\n        this.activeCamera._activeMeshes.dispose();\n      }\n      if (this.activeCameras) {\n        for (var i = 0; i < this.activeCameras.length; i++) {\n          var activeCamera = this.activeCameras[i];\n          if (activeCamera && activeCamera._activeMeshes) {\n            activeCamera._activeMeshes.dispose();\n          }\n        }\n      }\n    }\n    /**\n     * Clear the info related to rendering groups preventing retention points during dispose.\n     */\n  }, {\n    key: \"freeRenderingGroups\",\n    value: function freeRenderingGroups() {\n      if (this.blockfreeActiveMeshesAndRenderingGroups) {\n        return;\n      }\n      if (this._renderingManager) {\n        this._renderingManager.freeRenderingGroups();\n      }\n      if (this.textures) {\n        for (var i = 0; i < this.textures.length; i++) {\n          var texture = this.textures[i];\n          if (texture && texture.renderList) {\n            texture.freeRenderingGroups();\n          }\n        }\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_isInIntermediateRendering\",\n    value: function _isInIntermediateRendering() {\n      return this._intermediateRendering;\n    }\n    /**\n     * Use this function to stop evaluating active meshes. The current list will be keep alive between frames\n     * @param skipEvaluateActiveMeshes defines an optional boolean indicating that the evaluate active meshes step must be completely skipped\n     * @param onSuccess optional success callback\n     * @param onError optional error callback\n     * @param freezeMeshes defines if meshes should be frozen (true by default)\n     * @param keepFrustumCulling defines if you want to keep running the frustum clipping (false by default)\n     * @returns the current scene\n     */\n  }, {\n    key: \"freezeActiveMeshes\",\n    value: function freezeActiveMeshes() {\n      var _this9 = this;\n      var skipEvaluateActiveMeshes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var onSuccess = arguments.length > 1 ? arguments[1] : undefined;\n      var onError = arguments.length > 2 ? arguments[2] : undefined;\n      var freezeMeshes = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      var keepFrustumCulling = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      this.executeWhenReady(function () {\n        if (!_this9.activeCamera) {\n          onError && onError(\"No active camera found\");\n          return;\n        }\n        if (!_this9._frustumPlanes) {\n          _this9.updateTransformMatrix();\n        }\n        _this9._evaluateActiveMeshes();\n        _this9._activeMeshesFrozen = true;\n        _this9._activeMeshesFrozenButKeepClipping = keepFrustumCulling;\n        _this9._skipEvaluateActiveMeshesCompletely = skipEvaluateActiveMeshes;\n        if (freezeMeshes) {\n          for (var index = 0; index < _this9._activeMeshes.length; index++) {\n            _this9._activeMeshes.data[index]._freeze();\n          }\n        }\n        onSuccess && onSuccess();\n      });\n      return this;\n    }\n    /**\n     * Use this function to restart evaluating active meshes on every frame\n     * @returns the current scene\n     */\n  }, {\n    key: \"unfreezeActiveMeshes\",\n    value: function unfreezeActiveMeshes() {\n      for (var index = 0; index < this.meshes.length; index++) {\n        var mesh = this.meshes[index];\n        if (mesh._internalAbstractMeshDataInfo) {\n          mesh._internalAbstractMeshDataInfo._isActive = false;\n        }\n      }\n      for (var _index4 = 0; _index4 < this._activeMeshes.length; _index4++) {\n        this._activeMeshes.data[_index4]._unFreeze();\n      }\n      this._activeMeshesFrozen = false;\n      return this;\n    }\n  }, {\n    key: \"_executeActiveContainerCleanup\",\n    value: function _executeActiveContainerCleanup(container) {\n      var isInFastMode = this._engine.snapshotRendering && this._engine.snapshotRenderingMode === 1;\n      if (!isInFastMode && this._activeMeshesFrozen && this._activeMeshes.length) {\n        return; // Do not execute in frozen mode\n      }\n      // We need to ensure we are not in the rendering loop\n      this.onBeforeRenderObservable.addOnce(function () {\n        return container.dispose();\n      });\n    }\n  }, {\n    key: \"_evaluateActiveMeshes\",\n    value: function _evaluateActiveMeshes() {\n      var _a;\n      if (this._engine.snapshotRendering && this._engine.snapshotRenderingMode === 1) {\n        if (this._activeMeshes.length > 0) {\n          (_a = this.activeCamera) === null || _a === void 0 ? void 0 : _a._activeMeshes.reset();\n          this._activeMeshes.reset();\n          this._renderingManager.reset();\n          this._processedMaterials.reset();\n          this._activeParticleSystems.reset();\n          this._activeSkeletons.reset();\n          this._softwareSkinnedMeshes.reset();\n        }\n        return;\n      }\n      if (this._activeMeshesFrozen && this._activeMeshes.length) {\n        if (!this._skipEvaluateActiveMeshesCompletely) {\n          var _len = this._activeMeshes.length;\n          for (var i = 0; i < _len; i++) {\n            var mesh = this._activeMeshes.data[i];\n            mesh.computeWorldMatrix();\n          }\n        }\n        if (this._activeParticleSystems) {\n          var psLength = this._activeParticleSystems.length;\n          for (var _i = 0; _i < psLength; _i++) {\n            this._activeParticleSystems.data[_i].animate();\n          }\n        }\n        this._renderingManager.resetSprites();\n        return;\n      }\n      if (!this.activeCamera) {\n        return;\n      }\n      this.onBeforeActiveMeshesEvaluationObservable.notifyObservers(this);\n      this.activeCamera._activeMeshes.reset();\n      this._activeMeshes.reset();\n      this._renderingManager.reset();\n      this._processedMaterials.reset();\n      this._activeParticleSystems.reset();\n      this._activeSkeletons.reset();\n      this._softwareSkinnedMeshes.reset();\n      this._materialsRenderTargets.reset();\n      var _iterator10 = _createForOfIteratorHelper(this._beforeEvaluateActiveMeshStage),\n        _step10;\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var _step12 = _step10.value;\n          _step12.action();\n        }\n        // Determine mesh candidates\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n      var meshes = this.getActiveMeshCandidates();\n      // Check each mesh\n      var len = meshes.length;\n      for (var _i2 = 0; _i2 < len; _i2++) {\n        var _mesh = meshes.data[_i2];\n        _mesh._internalAbstractMeshDataInfo._currentLODIsUpToDate = false;\n        if (_mesh.isBlocked) {\n          continue;\n        }\n        this._totalVertices.addCount(_mesh.getTotalVertices(), false);\n        if (!_mesh.isReady() || !_mesh.isEnabled() || _mesh.scaling.hasAZeroComponent) {\n          continue;\n        }\n        _mesh.computeWorldMatrix();\n        // Intersections\n        if (_mesh.actionManager && _mesh.actionManager.hasSpecificTriggers2(12, 13)) {\n          this._meshesForIntersections.pushNoDuplicate(_mesh);\n        }\n        // Switch to current LOD\n        var meshToRender = this.customLODSelector ? this.customLODSelector(_mesh, this.activeCamera) : _mesh.getLOD(this.activeCamera);\n        _mesh._internalAbstractMeshDataInfo._currentLOD = meshToRender;\n        _mesh._internalAbstractMeshDataInfo._currentLODIsUpToDate = true;\n        if (meshToRender === undefined || meshToRender === null) {\n          continue;\n        }\n        // Compute world matrix if LOD is billboard\n        if (meshToRender !== _mesh && meshToRender.billboardMode !== 0) {\n          meshToRender.computeWorldMatrix();\n        }\n        _mesh._preActivate();\n        if (_mesh.isVisible && _mesh.visibility > 0 && (_mesh.layerMask & this.activeCamera.layerMask) !== 0 && (this._skipFrustumClipping || _mesh.alwaysSelectAsActiveMesh || _mesh.isInFrustum(this._frustumPlanes))) {\n          this._activeMeshes.push(_mesh);\n          this.activeCamera._activeMeshes.push(_mesh);\n          if (meshToRender !== _mesh) {\n            meshToRender._activate(this._renderId, false);\n          }\n          var _iterator11 = _createForOfIteratorHelper(this._preActiveMeshStage),\n            _step11;\n          try {\n            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n              var step = _step11.value;\n              step.action(_mesh);\n            }\n          } catch (err) {\n            _iterator11.e(err);\n          } finally {\n            _iterator11.f();\n          }\n          if (_mesh._activate(this._renderId, false)) {\n            if (!_mesh.isAnInstance) {\n              meshToRender._internalAbstractMeshDataInfo._onlyForInstances = false;\n            } else {\n              if (_mesh._internalAbstractMeshDataInfo._actAsRegularMesh) {\n                meshToRender = _mesh;\n              }\n            }\n            meshToRender._internalAbstractMeshDataInfo._isActive = true;\n            this._activeMesh(_mesh, meshToRender);\n          }\n          _mesh._postActivate();\n        }\n      }\n      // Particle systems\n      if (this.particlesEnabled) {\n        this.onBeforeParticlesRenderingObservable.notifyObservers(this);\n        for (var particleIndex = 0; particleIndex < this.particleSystems.length; particleIndex++) {\n          var particleSystem = this.particleSystems[particleIndex];\n          if (!particleSystem.isStarted() || !particleSystem.emitter) {\n            continue;\n          }\n          var emitter = particleSystem.emitter;\n          if (!emitter.position || emitter.isEnabled()) {\n            this._activeParticleSystems.push(particleSystem);\n            particleSystem.animate();\n            this._renderingManager.dispatchParticles(particleSystem);\n          }\n        }\n        this.onAfterParticlesRenderingObservable.notifyObservers(this);\n      }\n    }\n  }, {\n    key: \"_activeMesh\",\n    value: function _activeMesh(sourceMesh, mesh) {\n      if (this._skeletonsEnabled && mesh.skeleton !== null && mesh.skeleton !== undefined) {\n        if (this._activeSkeletons.pushNoDuplicate(mesh.skeleton)) {\n          mesh.skeleton.prepare();\n          this._activeBones.addCount(mesh.skeleton.bones.length, false);\n        }\n        if (!mesh.computeBonesUsingShaders) {\n          this._softwareSkinnedMeshes.pushNoDuplicate(mesh);\n        }\n      }\n      var forcePush = sourceMesh.hasInstances || sourceMesh.isAnInstance || this.dispatchAllSubMeshesOfActiveMeshes || this._skipFrustumClipping || mesh.alwaysSelectAsActiveMesh;\n      if (mesh && mesh.subMeshes && mesh.subMeshes.length > 0) {\n        var subMeshes = this.getActiveSubMeshCandidates(mesh);\n        var len = subMeshes.length;\n        forcePush = forcePush || len === 1;\n        for (var i = 0; i < len; i++) {\n          var subMesh = subMeshes.data[i];\n          this._evaluateSubMesh(subMesh, mesh, sourceMesh, forcePush);\n        }\n      }\n    }\n    /**\n     * Update the transform matrix to update from the current active camera\n     * @param force defines a boolean used to force the update even if cache is up to date\n     */\n  }, {\n    key: \"updateTransformMatrix\",\n    value: function updateTransformMatrix(force) {\n      if (!this.activeCamera) {\n        return;\n      }\n      if (this.activeCamera._renderingMultiview) {\n        var leftCamera = this.activeCamera._rigCameras[0];\n        var rightCamera = this.activeCamera._rigCameras[1];\n        this.setTransformMatrix(leftCamera.getViewMatrix(), leftCamera.getProjectionMatrix(force), rightCamera.getViewMatrix(), rightCamera.getProjectionMatrix(force));\n      } else {\n        this.setTransformMatrix(this.activeCamera.getViewMatrix(), this.activeCamera.getProjectionMatrix(force));\n      }\n    }\n  }, {\n    key: \"_bindFrameBuffer\",\n    value: function _bindFrameBuffer(camera) {\n      var clear = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (camera && camera._multiviewTexture) {\n        camera._multiviewTexture._bindFrameBuffer();\n      } else if (camera && camera.outputRenderTarget) {\n        camera.outputRenderTarget._bindFrameBuffer();\n      } else {\n        if (!this._engine._currentFrameBufferIsDefaultFrameBuffer()) {\n          this._engine.restoreDefaultFramebuffer();\n        }\n      }\n      if (clear) {\n        this._clearFrameBuffer(camera);\n      }\n    }\n  }, {\n    key: \"_clearFrameBuffer\",\n    value: function _clearFrameBuffer(camera) {\n      // we assume the framebuffer currently bound is the right one\n      if (camera && camera._multiviewTexture) {\n        // no clearing?\n      } else if (camera && camera.outputRenderTarget && !camera._renderingMultiview) {\n        var rtt = camera.outputRenderTarget;\n        if (rtt.onClearObservable.hasObservers()) {\n          rtt.onClearObservable.notifyObservers(this._engine);\n        } else if (!rtt.skipInitialClear) {\n          if (this.autoClear) {\n            this._engine.clear(rtt.clearColor || this.clearColor, !rtt._cleared, true, true);\n          }\n          rtt._cleared = true;\n        }\n      } else {\n        if (!this._defaultFrameBufferCleared) {\n          this._defaultFrameBufferCleared = true;\n          this._clear();\n        } else {\n          this._engine.clear(null, false, true, true);\n        }\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_renderForCamera\",\n    value: function _renderForCamera(camera, rigParent) {\n      var bindFrameBuffer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var _a, _b, _c;\n      if (camera && camera._skipRendering) {\n        return;\n      }\n      var engine = this._engine;\n      // Use _activeCamera instead of activeCamera to avoid onActiveCameraChanged\n      this._activeCamera = camera;\n      if (!this.activeCamera) {\n        throw new Error(\"Active camera not set\");\n      }\n      // Viewport\n      engine.setViewport(this.activeCamera.viewport);\n      // Camera\n      this.resetCachedMaterial();\n      this._renderId++;\n      if (!this.prePass && bindFrameBuffer) {\n        var skipInitialClear = true;\n        if (camera._renderingMultiview && camera.outputRenderTarget) {\n          skipInitialClear = camera.outputRenderTarget.skipInitialClear;\n          if (this.autoClear) {\n            camera.outputRenderTarget.skipInitialClear = false;\n          }\n        }\n        this._bindFrameBuffer(this._activeCamera);\n        if (camera._renderingMultiview && camera.outputRenderTarget) {\n          camera.outputRenderTarget.skipInitialClear = skipInitialClear;\n        }\n      }\n      this.updateTransformMatrix();\n      this.onBeforeCameraRenderObservable.notifyObservers(this.activeCamera);\n      // Meshes\n      this._evaluateActiveMeshes();\n      // Software skinning\n      for (var softwareSkinnedMeshIndex = 0; softwareSkinnedMeshIndex < this._softwareSkinnedMeshes.length; softwareSkinnedMeshIndex++) {\n        var mesh = this._softwareSkinnedMeshes.data[softwareSkinnedMeshIndex];\n        mesh.applySkeleton(mesh.skeleton);\n      }\n      // Render targets\n      this.onBeforeRenderTargetsRenderObservable.notifyObservers(this);\n      this._renderTargets.concatWithNoDuplicate(this._materialsRenderTargets);\n      if (camera.customRenderTargets && camera.customRenderTargets.length > 0) {\n        this._renderTargets.concatWithNoDuplicate(camera.customRenderTargets);\n      }\n      if (rigParent && rigParent.customRenderTargets && rigParent.customRenderTargets.length > 0) {\n        this._renderTargets.concatWithNoDuplicate(rigParent.customRenderTargets);\n      }\n      if (this.environmentTexture && this.environmentTexture.isRenderTarget) {\n        this._renderTargets.pushNoDuplicate(this.environmentTexture);\n      }\n      // Collects render targets from external components.\n      var _iterator12 = _createForOfIteratorHelper(this._gatherActiveCameraRenderTargetsStage),\n        _step13;\n      try {\n        for (_iterator12.s(); !(_step13 = _iterator12.n()).done;) {\n          var _step18 = _step13.value;\n          _step18.action(this._renderTargets);\n        }\n      } catch (err) {\n        _iterator12.e(err);\n      } finally {\n        _iterator12.f();\n      }\n      var needRebind = false;\n      if (this.renderTargetsEnabled) {\n        this._intermediateRendering = true;\n        if (this._renderTargets.length > 0) {\n          Tools.StartPerformanceCounter(\"Render targets\", this._renderTargets.length > 0);\n          for (var renderIndex = 0; renderIndex < this._renderTargets.length; renderIndex++) {\n            var renderTarget = this._renderTargets.data[renderIndex];\n            if (renderTarget._shouldRender()) {\n              this._renderId++;\n              var hasSpecialRenderTargetCamera = renderTarget.activeCamera && renderTarget.activeCamera !== this.activeCamera;\n              renderTarget.render(hasSpecialRenderTargetCamera, this.dumpNextRenderTargets);\n              needRebind = true;\n            }\n          }\n          Tools.EndPerformanceCounter(\"Render targets\", this._renderTargets.length > 0);\n          this._renderId++;\n        }\n        var _iterator13 = _createForOfIteratorHelper(this._cameraDrawRenderTargetStage),\n          _step14;\n        try {\n          for (_iterator13.s(); !(_step14 = _iterator13.n()).done;) {\n            var step = _step14.value;\n            needRebind = step.action(this.activeCamera) || needRebind;\n          }\n        } catch (err) {\n          _iterator13.e(err);\n        } finally {\n          _iterator13.f();\n        }\n        this._intermediateRendering = false;\n      }\n      this._engine.currentRenderPassId = (_c = (_b = (_a = camera.outputRenderTarget) === null || _a === void 0 ? void 0 : _a.renderPassId) !== null && _b !== void 0 ? _b : camera.renderPassId) !== null && _c !== void 0 ? _c : 0;\n      // Restore framebuffer after rendering to targets\n      if (needRebind && !this.prePass) {\n        this._bindFrameBuffer(this._activeCamera, false);\n      }\n      this.onAfterRenderTargetsRenderObservable.notifyObservers(this);\n      // Prepare Frame\n      if (this.postProcessManager && !camera._multiviewTexture && !this.prePass) {\n        this.postProcessManager._prepareFrame();\n      }\n      // Before Camera Draw\n      var _iterator14 = _createForOfIteratorHelper(this._beforeCameraDrawStage),\n        _step15;\n      try {\n        for (_iterator14.s(); !(_step15 = _iterator14.n()).done;) {\n          var _step19 = _step15.value;\n          _step19.action(this.activeCamera);\n        }\n        // Render\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n      this.onBeforeDrawPhaseObservable.notifyObservers(this);\n      if (engine.snapshotRendering && engine.snapshotRenderingMode === 1) {\n        this.finalizeSceneUbo();\n      }\n      this._renderingManager.render(null, null, true, true);\n      this.onAfterDrawPhaseObservable.notifyObservers(this);\n      // After Camera Draw\n      var _iterator15 = _createForOfIteratorHelper(this._afterCameraDrawStage),\n        _step16;\n      try {\n        for (_iterator15.s(); !(_step16 = _iterator15.n()).done;) {\n          var _step20 = _step16.value;\n          _step20.action(this.activeCamera);\n        }\n        // Finalize frame\n      } catch (err) {\n        _iterator15.e(err);\n      } finally {\n        _iterator15.f();\n      }\n      if (this.postProcessManager && !camera._multiviewTexture) {\n        // if the camera has an output render target, render the post process to the render target\n        var texture = camera.outputRenderTarget ? camera.outputRenderTarget.renderTarget : undefined;\n        this.postProcessManager._finalizeFrame(camera.isIntermediate, texture);\n      }\n      // After post process\n      var _iterator16 = _createForOfIteratorHelper(this._afterCameraPostProcessStage),\n        _step17;\n      try {\n        for (_iterator16.s(); !(_step17 = _iterator16.n()).done;) {\n          var _step21 = _step17.value;\n          _step21.action(this.activeCamera);\n        }\n        // Reset some special arrays\n      } catch (err) {\n        _iterator16.e(err);\n      } finally {\n        _iterator16.f();\n      }\n      this._renderTargets.reset();\n      this.onAfterCameraRenderObservable.notifyObservers(this.activeCamera);\n    }\n  }, {\n    key: \"_processSubCameras\",\n    value: function _processSubCameras(camera) {\n      var bindFrameBuffer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (camera.cameraRigMode === 0 || camera._renderingMultiview) {\n        if (camera._renderingMultiview && !this._multiviewSceneUbo) {\n          this._createMultiviewUbo();\n        }\n        this._renderForCamera(camera, undefined, bindFrameBuffer);\n        this.onAfterRenderCameraObservable.notifyObservers(camera);\n        return;\n      }\n      if (camera._useMultiviewToSingleView) {\n        this._renderMultiviewToSingleView(camera);\n      } else {\n        // rig cameras\n        this.onBeforeCameraRenderObservable.notifyObservers(camera);\n        for (var index = 0; index < camera._rigCameras.length; index++) {\n          this._renderForCamera(camera._rigCameras[index], camera);\n        }\n      }\n      // Use _activeCamera instead of activeCamera to avoid onActiveCameraChanged\n      this._activeCamera = camera;\n      this.updateTransformMatrix();\n      this.onAfterRenderCameraObservable.notifyObservers(camera);\n    }\n  }, {\n    key: \"_checkIntersections\",\n    value: function _checkIntersections() {\n      for (var index = 0; index < this._meshesForIntersections.length; index++) {\n        var sourceMesh = this._meshesForIntersections.data[index];\n        if (!sourceMesh.actionManager) {\n          continue;\n        }\n        var _loop = function _loop() {\n          var action = sourceMesh.actionManager.actions[actionIndex];\n          if (action.trigger === 12 || action.trigger === 13) {\n            var parameters = action.getTriggerParameter();\n            var otherMesh = parameters.mesh ? parameters.mesh : parameters;\n            var areIntersecting = otherMesh.intersectsMesh(sourceMesh, parameters.usePreciseIntersection);\n            var currentIntersectionInProgress = sourceMesh._intersectionsInProgress.indexOf(otherMesh);\n            if (areIntersecting && currentIntersectionInProgress === -1) {\n              if (action.trigger === 12) {\n                action._executeCurrent(ActionEvent.CreateNew(sourceMesh, undefined, otherMesh));\n                sourceMesh._intersectionsInProgress.push(otherMesh);\n              } else if (action.trigger === 13) {\n                sourceMesh._intersectionsInProgress.push(otherMesh);\n              }\n            } else if (!areIntersecting && currentIntersectionInProgress > -1) {\n              //They intersected, and now they don't.\n              //is this trigger an exit trigger? execute an event.\n              if (action.trigger === 13) {\n                action._executeCurrent(ActionEvent.CreateNew(sourceMesh, undefined, otherMesh));\n              }\n              //if this is an exit trigger, or no exit trigger exists, remove the id from the intersection in progress array.\n              if (!sourceMesh.actionManager.hasSpecificTrigger(13, function (parameter) {\n                var parameterMesh = parameter.mesh ? parameter.mesh : parameter;\n                return otherMesh === parameterMesh;\n              }) || action.trigger === 13) {\n                sourceMesh._intersectionsInProgress.splice(currentIntersectionInProgress, 1);\n              }\n            }\n          }\n        };\n        for (var actionIndex = 0; sourceMesh.actionManager && actionIndex < sourceMesh.actionManager.actions.length; actionIndex++) {\n          _loop();\n        }\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_advancePhysicsEngineStep\",\n    value: function _advancePhysicsEngineStep(step) {\n      // Do nothing. Code will be replaced if physics engine component is referenced\n    }\n    /** @internal */\n  }, {\n    key: \"_animate\",\n    value: function _animate() {\n      // Nothing to do as long as Animatable have not been imported.\n    }\n    /** Execute all animations (for a frame) */\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      if (this._engine.isDeterministicLockStep()) {\n        var deltaTime = Math.max(Scene.MinDeltaTime, Math.min(this._engine.getDeltaTime(), Scene.MaxDeltaTime)) + this._timeAccumulator;\n        var defaultFrameTime = this._engine.getTimeStep();\n        var defaultFPS = 1000.0 / defaultFrameTime / 1000.0;\n        var stepsTaken = 0;\n        var maxSubSteps = this._engine.getLockstepMaxSteps();\n        var internalSteps = Math.floor(deltaTime / defaultFrameTime);\n        internalSteps = Math.min(internalSteps, maxSubSteps);\n        while (deltaTime > 0 && stepsTaken < internalSteps) {\n          this.onBeforeStepObservable.notifyObservers(this);\n          // Animations\n          this._animationRatio = defaultFrameTime * defaultFPS;\n          this._animate();\n          this.onAfterAnimationsObservable.notifyObservers(this);\n          // Physics\n          if (this.physicsEnabled) {\n            this._advancePhysicsEngineStep(defaultFrameTime);\n          }\n          this.onAfterStepObservable.notifyObservers(this);\n          this._currentStepId++;\n          stepsTaken++;\n          deltaTime -= defaultFrameTime;\n        }\n        this._timeAccumulator = deltaTime < 0 ? 0 : deltaTime;\n      } else {\n        // Animations\n        var _deltaTime = this.useConstantAnimationDeltaTime ? 16 : Math.max(Scene.MinDeltaTime, Math.min(this._engine.getDeltaTime(), Scene.MaxDeltaTime));\n        this._animationRatio = _deltaTime * (60.0 / 1000.0);\n        this._animate();\n        this.onAfterAnimationsObservable.notifyObservers(this);\n        // Physics\n        if (this.physicsEnabled) {\n          this._advancePhysicsEngineStep(_deltaTime);\n        }\n      }\n    }\n  }, {\n    key: \"_clear\",\n    value: function _clear() {\n      if (this.autoClearDepthAndStencil || this.autoClear) {\n        this._engine.clear(this.clearColor, this.autoClear || this.forceWireframe || this.forcePointsCloud, this.autoClearDepthAndStencil, this.autoClearDepthAndStencil);\n      }\n    }\n  }, {\n    key: \"_checkCameraRenderTarget\",\n    value: function _checkCameraRenderTarget(camera) {\n      var _a;\n      if ((camera === null || camera === void 0 ? void 0 : camera.outputRenderTarget) && !(camera === null || camera === void 0 ? void 0 : camera.isRigCamera)) {\n        camera.outputRenderTarget._cleared = false;\n      }\n      if ((_a = camera === null || camera === void 0 ? void 0 : camera.rigCameras) === null || _a === void 0 ? void 0 : _a.length) {\n        for (var i = 0; i < camera.rigCameras.length; ++i) {\n          var rtt = camera.rigCameras[i].outputRenderTarget;\n          if (rtt) {\n            rtt._cleared = false;\n          }\n        }\n      }\n    }\n    /**\n     * Resets the draw wrappers cache of all meshes\n     * @param passId If provided, releases only the draw wrapper corresponding to this render pass id\n     */\n  }, {\n    key: \"resetDrawCache\",\n    value: function resetDrawCache(passId) {\n      if (!this.meshes) {\n        return;\n      }\n      var _iterator17 = _createForOfIteratorHelper(this.meshes),\n        _step22;\n      try {\n        for (_iterator17.s(); !(_step22 = _iterator17.n()).done;) {\n          var mesh = _step22.value;\n          mesh.resetDrawCache(passId);\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n    }\n    /**\n     * Render the scene\n     * @param updateCameras defines a boolean indicating if cameras must update according to their inputs (true by default)\n     * @param ignoreAnimations defines a boolean indicating if animations should not be executed (false by default)\n     */\n  }, {\n    key: \"render\",\n    value: function render() {\n      var updateCameras = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var ignoreAnimations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _a, _b, _c;\n      if (this.isDisposed) {\n        return;\n      }\n      if (this.onReadyObservable.hasObservers() && this._executeWhenReadyTimeoutId === null) {\n        this._checkIsReady();\n      }\n      this._frameId++;\n      this._defaultFrameBufferCleared = false;\n      this._checkCameraRenderTarget(this.activeCamera);\n      if ((_a = this.activeCameras) === null || _a === void 0 ? void 0 : _a.length) {\n        this.activeCameras.forEach(this._checkCameraRenderTarget);\n      }\n      // Register components that have been associated lately to the scene.\n      this._registerTransientComponents();\n      this._activeParticles.fetchNewFrame();\n      this._totalVertices.fetchNewFrame();\n      this._activeIndices.fetchNewFrame();\n      this._activeBones.fetchNewFrame();\n      this._meshesForIntersections.reset();\n      this.resetCachedMaterial();\n      this.onBeforeAnimationsObservable.notifyObservers(this);\n      // Actions\n      if (this.actionManager) {\n        this.actionManager.processTrigger(11);\n      }\n      // Animations\n      if (!ignoreAnimations) {\n        this.animate();\n      }\n      // Before camera update steps\n      var _iterator18 = _createForOfIteratorHelper(this._beforeCameraUpdateStage),\n        _step23;\n      try {\n        for (_iterator18.s(); !(_step23 = _iterator18.n()).done;) {\n          var step = _step23.value;\n          step.action();\n        }\n        // Update Cameras\n      } catch (err) {\n        _iterator18.e(err);\n      } finally {\n        _iterator18.f();\n      }\n      if (updateCameras) {\n        if (this.activeCameras && this.activeCameras.length > 0) {\n          for (var cameraIndex = 0; cameraIndex < this.activeCameras.length; cameraIndex++) {\n            var camera = this.activeCameras[cameraIndex];\n            camera.update();\n            if (camera.cameraRigMode !== 0) {\n              // rig cameras\n              for (var index = 0; index < camera._rigCameras.length; index++) {\n                camera._rigCameras[index].update();\n              }\n            }\n          }\n        } else if (this.activeCamera) {\n          this.activeCamera.update();\n          if (this.activeCamera.cameraRigMode !== 0) {\n            // rig cameras\n            for (var _index5 = 0; _index5 < this.activeCamera._rigCameras.length; _index5++) {\n              this.activeCamera._rigCameras[_index5].update();\n            }\n          }\n        }\n      }\n      // Before render\n      this.onBeforeRenderObservable.notifyObservers(this);\n      var engine = this.getEngine();\n      // Customs render targets\n      this.onBeforeRenderTargetsRenderObservable.notifyObservers(this);\n      var currentActiveCamera = ((_b = this.activeCameras) === null || _b === void 0 ? void 0 : _b.length) ? this.activeCameras[0] : this.activeCamera;\n      if (this.renderTargetsEnabled) {\n        Tools.StartPerformanceCounter(\"Custom render targets\", this.customRenderTargets.length > 0);\n        this._intermediateRendering = true;\n        for (var customIndex = 0; customIndex < this.customRenderTargets.length; customIndex++) {\n          var renderTarget = this.customRenderTargets[customIndex];\n          if (renderTarget._shouldRender()) {\n            this._renderId++;\n            this.activeCamera = renderTarget.activeCamera || this.activeCamera;\n            if (!this.activeCamera) {\n              throw new Error(\"Active camera not set\");\n            }\n            // Viewport\n            engine.setViewport(this.activeCamera.viewport);\n            // Camera\n            this.updateTransformMatrix();\n            renderTarget.render(currentActiveCamera !== this.activeCamera, this.dumpNextRenderTargets);\n          }\n        }\n        Tools.EndPerformanceCounter(\"Custom render targets\", this.customRenderTargets.length > 0);\n        this._intermediateRendering = false;\n        this._renderId++;\n      }\n      this._engine.currentRenderPassId = (_c = currentActiveCamera === null || currentActiveCamera === void 0 ? void 0 : currentActiveCamera.renderPassId) !== null && _c !== void 0 ? _c : 0;\n      // Restore back buffer\n      this.activeCamera = currentActiveCamera;\n      if (this._activeCamera && this._activeCamera.cameraRigMode !== 22 && !this.prePass) {\n        this._bindFrameBuffer(this._activeCamera, false);\n      }\n      this.onAfterRenderTargetsRenderObservable.notifyObservers(this);\n      var _iterator19 = _createForOfIteratorHelper(this._beforeClearStage),\n        _step24;\n      try {\n        for (_iterator19.s(); !(_step24 = _iterator19.n()).done;) {\n          var _step27 = _step24.value;\n          _step27.action();\n        }\n        // Clear\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n      this._clearFrameBuffer(this.activeCamera);\n      // Collects render targets from external components.\n      var _iterator20 = _createForOfIteratorHelper(this._gatherRenderTargetsStage),\n        _step25;\n      try {\n        for (_iterator20.s(); !(_step25 = _iterator20.n()).done;) {\n          var _step28 = _step25.value;\n          _step28.action(this._renderTargets);\n        }\n        // Multi-cameras?\n      } catch (err) {\n        _iterator20.e(err);\n      } finally {\n        _iterator20.f();\n      }\n      if (this.activeCameras && this.activeCameras.length > 0) {\n        for (var _cameraIndex = 0; _cameraIndex < this.activeCameras.length; _cameraIndex++) {\n          this._processSubCameras(this.activeCameras[_cameraIndex], _cameraIndex > 0);\n        }\n      } else {\n        if (!this.activeCamera) {\n          throw new Error(\"No camera defined\");\n        }\n        this._processSubCameras(this.activeCamera, !!this.activeCamera.outputRenderTarget);\n      }\n      // Intersection checks\n      this._checkIntersections();\n      // Executes the after render stage actions.\n      var _iterator21 = _createForOfIteratorHelper(this._afterRenderStage),\n        _step26;\n      try {\n        for (_iterator21.s(); !(_step26 = _iterator21.n()).done;) {\n          var _step29 = _step26.value;\n          _step29.action();\n        }\n        // After render\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n      if (this.afterRender) {\n        this.afterRender();\n      }\n      this.onAfterRenderObservable.notifyObservers(this);\n      // Cleaning\n      if (this._toBeDisposed.length) {\n        for (var _index6 = 0; _index6 < this._toBeDisposed.length; _index6++) {\n          var data = this._toBeDisposed[_index6];\n          if (data) {\n            data.dispose();\n          }\n        }\n        this._toBeDisposed.length = 0;\n      }\n      if (this.dumpNextRenderTargets) {\n        this.dumpNextRenderTargets = false;\n      }\n      this._activeBones.addCount(0, true);\n      this._activeIndices.addCount(0, true);\n      this._activeParticles.addCount(0, true);\n      this._engine.restoreDefaultFramebuffer();\n    }\n    /**\n     * Freeze all materials\n     * A frozen material will not be updatable but should be faster to render\n     * Note: multimaterials will not be frozen, but their submaterials will\n     */\n  }, {\n    key: \"freezeMaterials\",\n    value: function freezeMaterials() {\n      for (var i = 0; i < this.materials.length; i++) {\n        this.materials[i].freeze();\n      }\n    }\n    /**\n     * Unfreeze all materials\n     * A frozen material will not be updatable but should be faster to render\n     */\n  }, {\n    key: \"unfreezeMaterials\",\n    value: function unfreezeMaterials() {\n      for (var i = 0; i < this.materials.length; i++) {\n        this.materials[i].unfreeze();\n      }\n    }\n    /**\n     * Releases all held resources\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this.isDisposed) {\n        return;\n      }\n      this.beforeRender = null;\n      this.afterRender = null;\n      this.metadata = null;\n      this.skeletons.length = 0;\n      this.morphTargetManagers.length = 0;\n      this._transientComponents.length = 0;\n      this._isReadyForMeshStage.clear();\n      this._beforeEvaluateActiveMeshStage.clear();\n      this._evaluateSubMeshStage.clear();\n      this._preActiveMeshStage.clear();\n      this._cameraDrawRenderTargetStage.clear();\n      this._beforeCameraDrawStage.clear();\n      this._beforeRenderTargetDrawStage.clear();\n      this._beforeRenderingGroupDrawStage.clear();\n      this._beforeRenderingMeshStage.clear();\n      this._afterRenderingMeshStage.clear();\n      this._afterRenderingGroupDrawStage.clear();\n      this._afterCameraDrawStage.clear();\n      this._afterRenderTargetDrawStage.clear();\n      this._afterRenderStage.clear();\n      this._beforeCameraUpdateStage.clear();\n      this._beforeClearStage.clear();\n      this._gatherRenderTargetsStage.clear();\n      this._gatherActiveCameraRenderTargetsStage.clear();\n      this._pointerMoveStage.clear();\n      this._pointerDownStage.clear();\n      this._pointerUpStage.clear();\n      this.importedMeshesFiles = new Array();\n      if (this.stopAllAnimations) {\n        this.stopAllAnimations();\n      }\n      this.resetCachedMaterial();\n      // Smart arrays\n      if (this.activeCamera) {\n        this.activeCamera._activeMeshes.dispose();\n        this.activeCamera = null;\n      }\n      this.activeCameras = null;\n      this._activeMeshes.dispose();\n      this._renderingManager.dispose();\n      this._processedMaterials.dispose();\n      this._activeParticleSystems.dispose();\n      this._activeSkeletons.dispose();\n      this._softwareSkinnedMeshes.dispose();\n      this._renderTargets.dispose();\n      this._materialsRenderTargets.dispose();\n      this._registeredForLateAnimationBindings.dispose();\n      this._meshesForIntersections.dispose();\n      this._toBeDisposed.length = 0;\n      // Abort active requests\n      var activeRequests = this._activeRequests.slice();\n      var _iterator22 = _createForOfIteratorHelper(activeRequests),\n        _step30;\n      try {\n        for (_iterator22.s(); !(_step30 = _iterator22.n()).done;) {\n          var request = _step30.value;\n          request.abort();\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n      this._activeRequests.length = 0;\n      // Events\n      try {\n        this.onDisposeObservable.notifyObservers(this);\n      } catch (e) {\n        console.error(\"An error occurred while calling onDisposeObservable!\", e);\n      }\n      this.onDisposeObservable.clear();\n      this.onBeforeRenderObservable.clear();\n      this.onAfterRenderObservable.clear();\n      this.onBeforeRenderTargetsRenderObservable.clear();\n      this.onAfterRenderTargetsRenderObservable.clear();\n      this.onAfterStepObservable.clear();\n      this.onBeforeStepObservable.clear();\n      this.onBeforeActiveMeshesEvaluationObservable.clear();\n      this.onAfterActiveMeshesEvaluationObservable.clear();\n      this.onBeforeParticlesRenderingObservable.clear();\n      this.onAfterParticlesRenderingObservable.clear();\n      this.onBeforeDrawPhaseObservable.clear();\n      this.onAfterDrawPhaseObservable.clear();\n      this.onBeforeAnimationsObservable.clear();\n      this.onAfterAnimationsObservable.clear();\n      this.onDataLoadedObservable.clear();\n      this.onBeforeRenderingGroupObservable.clear();\n      this.onAfterRenderingGroupObservable.clear();\n      this.onMeshImportedObservable.clear();\n      this.onBeforeCameraRenderObservable.clear();\n      this.onAfterCameraRenderObservable.clear();\n      this.onReadyObservable.clear();\n      this.onNewCameraAddedObservable.clear();\n      this.onCameraRemovedObservable.clear();\n      this.onNewLightAddedObservable.clear();\n      this.onLightRemovedObservable.clear();\n      this.onNewGeometryAddedObservable.clear();\n      this.onGeometryRemovedObservable.clear();\n      this.onNewTransformNodeAddedObservable.clear();\n      this.onTransformNodeRemovedObservable.clear();\n      this.onNewMeshAddedObservable.clear();\n      this.onMeshRemovedObservable.clear();\n      this.onNewSkeletonAddedObservable.clear();\n      this.onSkeletonRemovedObservable.clear();\n      this.onNewMaterialAddedObservable.clear();\n      this.onNewMultiMaterialAddedObservable.clear();\n      this.onMaterialRemovedObservable.clear();\n      this.onMultiMaterialRemovedObservable.clear();\n      this.onNewTextureAddedObservable.clear();\n      this.onTextureRemovedObservable.clear();\n      this.onPrePointerObservable.clear();\n      this.onPointerObservable.clear();\n      this.onPreKeyboardObservable.clear();\n      this.onKeyboardObservable.clear();\n      this.onActiveCameraChanged.clear();\n      this.detachControl();\n      // Detach cameras\n      var canvas = this._engine.getInputElement();\n      if (canvas) {\n        for (var _index7 = 0; _index7 < this.cameras.length; _index7++) {\n          this.cameras[_index7].detachControl();\n        }\n      }\n      // Release animation groups\n      this._disposeList(this.animationGroups);\n      // Release lights\n      this._disposeList(this.lights);\n      // Release meshes\n      this._disposeList(this.meshes, function (item) {\n        return item.dispose(true);\n      });\n      this._disposeList(this.transformNodes, function (item) {\n        return item.dispose(true);\n      });\n      // Release cameras\n      var cameras = this.cameras;\n      this._disposeList(cameras);\n      // Release materials\n      if (this._defaultMaterial) {\n        this._defaultMaterial.dispose();\n      }\n      this._disposeList(this.multiMaterials);\n      this._disposeList(this.materials);\n      // Release particles\n      this._disposeList(this.particleSystems);\n      // Release postProcesses\n      this._disposeList(this.postProcesses);\n      // Release textures\n      this._disposeList(this.textures);\n      // Release morph targets\n      this._disposeList(this.morphTargetManagers);\n      // Release UBO\n      this._sceneUbo.dispose();\n      if (this._multiviewSceneUbo) {\n        this._multiviewSceneUbo.dispose();\n      }\n      // Post-processes\n      this.postProcessManager.dispose();\n      // Components\n      this._disposeList(this._components);\n      // Remove from engine\n      var index = this._engine.scenes.indexOf(this);\n      if (index > -1) {\n        this._engine.scenes.splice(index, 1);\n      }\n      if (EngineStore._LastCreatedScene === this) {\n        if (this._engine.scenes.length > 0) {\n          EngineStore._LastCreatedScene = this._engine.scenes[this._engine.scenes.length - 1];\n        } else {\n          EngineStore._LastCreatedScene = null;\n        }\n      }\n      index = this._engine._virtualScenes.indexOf(this);\n      if (index > -1) {\n        this._engine._virtualScenes.splice(index, 1);\n      }\n      this._engine.wipeCaches(true);\n      this._isDisposed = true;\n    }\n  }, {\n    key: \"_disposeList\",\n    value: function _disposeList(items, callback) {\n      var itemsCopy = items.slice(0);\n      callback = callback !== null && callback !== void 0 ? callback : function (item) {\n        return item.dispose();\n      };\n      var _iterator23 = _createForOfIteratorHelper(itemsCopy),\n        _step31;\n      try {\n        for (_iterator23.s(); !(_step31 = _iterator23.n()).done;) {\n          var item = _step31.value;\n          callback(item);\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n      items.length = 0;\n    }\n    /**\n     * Gets if the scene is already disposed\n     */\n  }, {\n    key: \"isDisposed\",\n    get: function get() {\n      return this._isDisposed;\n    }\n    /**\n     * Call this function to reduce memory footprint of the scene.\n     * Vertex buffers will not store CPU data anymore (this will prevent picking, collisions or physics to work correctly)\n     */\n  }, {\n    key: \"clearCachedVertexData\",\n    value: function clearCachedVertexData() {\n      for (var meshIndex = 0; meshIndex < this.meshes.length; meshIndex++) {\n        var mesh = this.meshes[meshIndex];\n        var geometry = mesh.geometry;\n        if (geometry) {\n          geometry.clearCachedData();\n        }\n      }\n    }\n    /**\n     * This function will remove the local cached buffer data from texture.\n     * It will save memory but will prevent the texture from being rebuilt\n     */\n  }, {\n    key: \"cleanCachedTextureBuffer\",\n    value: function cleanCachedTextureBuffer() {\n      var _iterator24 = _createForOfIteratorHelper(this.textures),\n        _step32;\n      try {\n        for (_iterator24.s(); !(_step32 = _iterator24.n()).done;) {\n          var baseTexture = _step32.value;\n          var buffer = baseTexture._buffer;\n          if (buffer) {\n            baseTexture._buffer = null;\n          }\n        }\n      } catch (err) {\n        _iterator24.e(err);\n      } finally {\n        _iterator24.f();\n      }\n    }\n    /**\n     * Get the world extend vectors with an optional filter\n     *\n     * @param filterPredicate the predicate - which meshes should be included when calculating the world size\n     * @returns {{ min: Vector3; max: Vector3 }} min and max vectors\n     */\n  }, {\n    key: \"getWorldExtends\",\n    value: function getWorldExtends(filterPredicate) {\n      var min = new Vector3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n      var max = new Vector3(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n      filterPredicate = filterPredicate || function () {\n        return true;\n      };\n      this.meshes.filter(filterPredicate).forEach(function (mesh) {\n        mesh.computeWorldMatrix(true);\n        if (!mesh.subMeshes || mesh.subMeshes.length === 0 || mesh.infiniteDistance) {\n          return;\n        }\n        var boundingInfo = mesh.getBoundingInfo();\n        var minBox = boundingInfo.boundingBox.minimumWorld;\n        var maxBox = boundingInfo.boundingBox.maximumWorld;\n        Vector3.CheckExtends(minBox, min, max);\n        Vector3.CheckExtends(maxBox, min, max);\n      });\n      return {\n        min: min,\n        max: max\n      };\n    }\n    // Picking\n    /**\n     * Creates a ray that can be used to pick in the scene\n     * @param x defines the x coordinate of the origin (on-screen)\n     * @param y defines the y coordinate of the origin (on-screen)\n     * @param world defines the world matrix to use if you want to pick in object space (instead of world space)\n     * @param camera defines the camera to use for the picking\n     * @param cameraViewSpace defines if picking will be done in view space (false by default)\n     * @returns a Ray\n     */\n  }, {\n    key: \"createPickingRay\",\n    value: function createPickingRay(x, y, world, camera) {\n      var cameraViewSpace = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      throw _WarnImport(\"Ray\");\n    }\n    /**\n     * Creates a ray that can be used to pick in the scene\n     * @param x defines the x coordinate of the origin (on-screen)\n     * @param y defines the y coordinate of the origin (on-screen)\n     * @param world defines the world matrix to use if you want to pick in object space (instead of world space)\n     * @param result defines the ray where to store the picking ray\n     * @param camera defines the camera to use for the picking\n     * @param cameraViewSpace defines if picking will be done in view space (false by default)\n     * @param enableDistantPicking defines if picking should handle large values for mesh position/scaling (false by default)\n     * @returns the current scene\n     */\n  }, {\n    key: \"createPickingRayToRef\",\n    value: function createPickingRayToRef(x, y, world, result, camera) {\n      var cameraViewSpace = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n      var enableDistantPicking = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n      throw _WarnImport(\"Ray\");\n    }\n    /**\n     * Creates a ray that can be used to pick in the scene\n     * @param x defines the x coordinate of the origin (on-screen)\n     * @param y defines the y coordinate of the origin (on-screen)\n     * @param camera defines the camera to use for the picking\n     * @returns a Ray\n     */\n  }, {\n    key: \"createPickingRayInCameraSpace\",\n    value: function createPickingRayInCameraSpace(x, y, camera) {\n      throw _WarnImport(\"Ray\");\n    }\n    /**\n     * Creates a ray that can be used to pick in the scene\n     * @param x defines the x coordinate of the origin (on-screen)\n     * @param y defines the y coordinate of the origin (on-screen)\n     * @param result defines the ray where to store the picking ray\n     * @param camera defines the camera to use for the picking\n     * @returns the current scene\n     */\n  }, {\n    key: \"createPickingRayInCameraSpaceToRef\",\n    value: function createPickingRayInCameraSpaceToRef(x, y, result, camera) {\n      throw _WarnImport(\"Ray\");\n    }\n    /** @internal */\n  }, {\n    key: \"_pickingAvailable\",\n    get: function get() {\n      return false;\n    }\n    /** Launch a ray to try to pick a mesh in the scene\n     * @param x position on screen\n     * @param y position on screen\n     * @param predicate Predicate function used to determine eligible meshes. Can be set to null. In this case, a mesh must be enabled, visible and with isPickable set to true\n     * @param fastCheck defines if the first intersection will be used (and not the closest)\n     * @param camera to use for computing the picking ray. Can be set to null. In this case, the scene.activeCamera will be used\n     * @param trianglePredicate defines an optional predicate used to select faces when a mesh intersection is detected\n     * @returns a PickingInfo\n     */\n  }, {\n    key: \"pick\",\n    value: function pick(x, y, predicate, fastCheck, camera, trianglePredicate) {\n      // Dummy info if picking as not been imported\n      return new PickingInfo();\n    }\n    /** Launch a ray to try to pick a mesh in the scene using only bounding information of the main mesh (not using submeshes)\n     * @param x position on screen\n     * @param y position on screen\n     * @param predicate Predicate function used to determine eligible meshes. Can be set to null. In this case, a mesh must be enabled, visible and with isPickable set to true\n     * @param fastCheck defines if the first intersection will be used (and not the closest)\n     * @param camera to use for computing the picking ray. Can be set to null. In this case, the scene.activeCamera will be used\n     * @returns a PickingInfo (Please note that some info will not be set like distance, bv, bu and everything that cannot be capture by only using bounding infos)\n     */\n  }, {\n    key: \"pickWithBoundingInfo\",\n    value: function pickWithBoundingInfo(x, y, predicate, fastCheck, camera) {\n      // Dummy info if picking as not been imported\n      return new PickingInfo();\n    }\n    /** Use the given ray to pick a mesh in the scene\n     * @param ray The ray to use to pick meshes\n     * @param predicate Predicate function used to determine eligible meshes. Can be set to null. In this case, a mesh must have isPickable set to true\n     * @param fastCheck defines if the first intersection will be used (and not the closest)\n     * @param trianglePredicate defines an optional predicate used to select faces when a mesh intersection is detected\n     * @returns a PickingInfo\n     */\n  }, {\n    key: \"pickWithRay\",\n    value: function pickWithRay(ray, predicate, fastCheck, trianglePredicate) {\n      throw _WarnImport(\"Ray\");\n    }\n    /**\n     * Launch a ray to try to pick a mesh in the scene\n     * @param x X position on screen\n     * @param y Y position on screen\n     * @param predicate Predicate function used to determine eligible meshes. Can be set to null. In this case, a mesh must be enabled, visible and with isPickable set to true\n     * @param camera camera to use for computing the picking ray. Can be set to null. In this case, the scene.activeCamera will be used\n     * @param trianglePredicate defines an optional predicate used to select faces when a mesh intersection is detected\n     * @returns an array of PickingInfo\n     */\n  }, {\n    key: \"multiPick\",\n    value: function multiPick(x, y, predicate, camera, trianglePredicate) {\n      throw _WarnImport(\"Ray\");\n    }\n    /**\n     * Launch a ray to try to pick a mesh in the scene\n     * @param ray Ray to use\n     * @param predicate Predicate function used to determine eligible meshes. Can be set to null. In this case, a mesh must be enabled, visible and with isPickable set to true\n     * @param trianglePredicate defines an optional predicate used to select faces when a mesh intersection is detected\n     * @returns an array of PickingInfo\n     */\n  }, {\n    key: \"multiPickWithRay\",\n    value: function multiPickWithRay(ray, predicate, trianglePredicate) {\n      throw _WarnImport(\"Ray\");\n    }\n    /**\n     * Force the value of meshUnderPointer\n     * @param mesh defines the mesh to use\n     * @param pointerId optional pointer id when using more than one pointer\n     * @param pickResult optional pickingInfo data used to find mesh\n     */\n  }, {\n    key: \"setPointerOverMesh\",\n    value: function setPointerOverMesh(mesh, pointerId, pickResult) {\n      this._inputManager.setPointerOverMesh(mesh, pointerId, pickResult);\n    }\n    /**\n     * Gets the mesh under the pointer\n     * @returns a Mesh or null if no mesh is under the pointer\n     */\n  }, {\n    key: \"getPointerOverMesh\",\n    value: function getPointerOverMesh() {\n      return this._inputManager.getPointerOverMesh();\n    }\n    // Misc.\n    /** @internal */\n  }, {\n    key: \"_rebuildGeometries\",\n    value: function _rebuildGeometries() {\n      var _iterator25 = _createForOfIteratorHelper(this.geometries),\n        _step33;\n      try {\n        for (_iterator25.s(); !(_step33 = _iterator25.n()).done;) {\n          var geometry = _step33.value;\n          geometry._rebuild();\n        }\n      } catch (err) {\n        _iterator25.e(err);\n      } finally {\n        _iterator25.f();\n      }\n      var _iterator26 = _createForOfIteratorHelper(this.meshes),\n        _step34;\n      try {\n        for (_iterator26.s(); !(_step34 = _iterator26.n()).done;) {\n          var mesh = _step34.value;\n          mesh._rebuild();\n        }\n      } catch (err) {\n        _iterator26.e(err);\n      } finally {\n        _iterator26.f();\n      }\n      if (this.postProcessManager) {\n        this.postProcessManager._rebuild();\n      }\n      var _iterator27 = _createForOfIteratorHelper(this._components),\n        _step35;\n      try {\n        for (_iterator27.s(); !(_step35 = _iterator27.n()).done;) {\n          var component = _step35.value;\n          component.rebuild();\n        }\n      } catch (err) {\n        _iterator27.e(err);\n      } finally {\n        _iterator27.f();\n      }\n      var _iterator28 = _createForOfIteratorHelper(this.particleSystems),\n        _step36;\n      try {\n        for (_iterator28.s(); !(_step36 = _iterator28.n()).done;) {\n          var system = _step36.value;\n          system.rebuild();\n        }\n      } catch (err) {\n        _iterator28.e(err);\n      } finally {\n        _iterator28.f();\n      }\n      if (this.spriteManagers) {\n        var _iterator29 = _createForOfIteratorHelper(this.spriteManagers),\n          _step37;\n        try {\n          for (_iterator29.s(); !(_step37 = _iterator29.n()).done;) {\n            var spriteMgr = _step37.value;\n            spriteMgr.rebuild();\n          }\n        } catch (err) {\n          _iterator29.e(err);\n        } finally {\n          _iterator29.f();\n        }\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_rebuildTextures\",\n    value: function _rebuildTextures() {\n      var _iterator30 = _createForOfIteratorHelper(this.textures),\n        _step38;\n      try {\n        for (_iterator30.s(); !(_step38 = _iterator30.n()).done;) {\n          var texture = _step38.value;\n          texture._rebuild();\n        }\n      } catch (err) {\n        _iterator30.e(err);\n      } finally {\n        _iterator30.f();\n      }\n      this.markAllMaterialsAsDirty(1);\n    }\n    // Tags\n  }, {\n    key: \"_getByTags\",\n    value: function _getByTags(list, tagsQuery, forEach) {\n      if (tagsQuery === undefined) {\n        // returns the complete list (could be done with Tags.MatchesQuery but no need to have a for-loop here)\n        return list;\n      }\n      var listByTags = [];\n      forEach = forEach || function (item) {\n        return;\n      };\n      for (var i in list) {\n        var item = list[i];\n        if (Tags && Tags.MatchesQuery(item, tagsQuery)) {\n          listByTags.push(item);\n          forEach(item);\n        }\n      }\n      return listByTags;\n    }\n    /**\n     * Get a list of meshes by tags\n     * @param tagsQuery defines the tags query to use\n     * @param forEach defines a predicate used to filter results\n     * @returns an array of Mesh\n     */\n  }, {\n    key: \"getMeshesByTags\",\n    value: function getMeshesByTags(tagsQuery, forEach) {\n      return this._getByTags(this.meshes, tagsQuery, forEach);\n    }\n    /**\n     * Get a list of cameras by tags\n     * @param tagsQuery defines the tags query to use\n     * @param forEach defines a predicate used to filter results\n     * @returns an array of Camera\n     */\n  }, {\n    key: \"getCamerasByTags\",\n    value: function getCamerasByTags(tagsQuery, forEach) {\n      return this._getByTags(this.cameras, tagsQuery, forEach);\n    }\n    /**\n     * Get a list of lights by tags\n     * @param tagsQuery defines the tags query to use\n     * @param forEach defines a predicate used to filter results\n     * @returns an array of Light\n     */\n  }, {\n    key: \"getLightsByTags\",\n    value: function getLightsByTags(tagsQuery, forEach) {\n      return this._getByTags(this.lights, tagsQuery, forEach);\n    }\n    /**\n     * Get a list of materials by tags\n     * @param tagsQuery defines the tags query to use\n     * @param forEach defines a predicate used to filter results\n     * @returns an array of Material\n     */\n  }, {\n    key: \"getMaterialByTags\",\n    value: function getMaterialByTags(tagsQuery, forEach) {\n      return this._getByTags(this.materials, tagsQuery, forEach).concat(this._getByTags(this.multiMaterials, tagsQuery, forEach));\n    }\n    /**\n     * Get a list of transform nodes by tags\n     * @param tagsQuery defines the tags query to use\n     * @param forEach defines a predicate used to filter results\n     * @returns an array of TransformNode\n     */\n  }, {\n    key: \"getTransformNodesByTags\",\n    value: function getTransformNodesByTags(tagsQuery, forEach) {\n      return this._getByTags(this.transformNodes, tagsQuery, forEach);\n    }\n    /**\n     * Overrides the default sort function applied in the rendering group to prepare the meshes.\n     * This allowed control for front to back rendering or reversly depending of the special needs.\n     *\n     * @param renderingGroupId The rendering group id corresponding to its index\n     * @param opaqueSortCompareFn The opaque queue comparison function use to sort.\n     * @param alphaTestSortCompareFn The alpha test queue comparison function use to sort.\n     * @param transparentSortCompareFn The transparent queue comparison function use to sort.\n     */\n  }, {\n    key: \"setRenderingOrder\",\n    value: function setRenderingOrder(renderingGroupId) {\n      var opaqueSortCompareFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var alphaTestSortCompareFn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var transparentSortCompareFn = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      this._renderingManager.setRenderingOrder(renderingGroupId, opaqueSortCompareFn, alphaTestSortCompareFn, transparentSortCompareFn);\n    }\n    /**\n     * Specifies whether or not the stencil and depth buffer are cleared between two rendering groups.\n     *\n     * @param renderingGroupId The rendering group id corresponding to its index\n     * @param autoClearDepthStencil Automatically clears depth and stencil between groups if true.\n     * @param depth Automatically clears depth between groups if true and autoClear is true.\n     * @param stencil Automatically clears stencil between groups if true and autoClear is true.\n     */\n  }, {\n    key: \"setRenderingAutoClearDepthStencil\",\n    value: function setRenderingAutoClearDepthStencil(renderingGroupId, autoClearDepthStencil) {\n      var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var stencil = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      this._renderingManager.setRenderingAutoClearDepthStencil(renderingGroupId, autoClearDepthStencil, depth, stencil);\n    }\n    /**\n     * Gets the current auto clear configuration for one rendering group of the rendering\n     * manager.\n     * @param index the rendering group index to get the information for\n     * @returns The auto clear setup for the requested rendering group\n     */\n  }, {\n    key: \"getAutoClearDepthStencilSetup\",\n    value: function getAutoClearDepthStencilSetup(index) {\n      return this._renderingManager.getAutoClearDepthStencilSetup(index);\n    }\n    /** Gets or sets a boolean blocking all the calls to markAllMaterialsAsDirty (ie. the materials won't be updated if they are out of sync) */\n  }, {\n    key: \"blockMaterialDirtyMechanism\",\n    get: function get() {\n      return this._blockMaterialDirtyMechanism;\n    },\n    set: function set(value) {\n      if (this._blockMaterialDirtyMechanism === value) {\n        return;\n      }\n      this._blockMaterialDirtyMechanism = value;\n      if (!value) {\n        // Do a complete update\n        this.markAllMaterialsAsDirty(63);\n      }\n    }\n    /**\n     * Will flag all materials as dirty to trigger new shader compilation\n     * @param flag defines the flag used to specify which material part must be marked as dirty\n     * @param predicate If not null, it will be used to specify if a material has to be marked as dirty\n     */\n  }, {\n    key: \"markAllMaterialsAsDirty\",\n    value: function markAllMaterialsAsDirty(flag, predicate) {\n      if (this._blockMaterialDirtyMechanism) {\n        return;\n      }\n      var _iterator31 = _createForOfIteratorHelper(this.materials),\n        _step39;\n      try {\n        for (_iterator31.s(); !(_step39 = _iterator31.n()).done;) {\n          var material = _step39.value;\n          if (predicate && !predicate(material)) {\n            continue;\n          }\n          material.markAsDirty(flag);\n        }\n      } catch (err) {\n        _iterator31.e(err);\n      } finally {\n        _iterator31.f();\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_loadFile\",\n    value: function _loadFile(fileOrUrl, onSuccess, onProgress, useOfflineSupport, useArrayBuffer, onError, onOpened) {\n      var _this10 = this;\n      var request = LoadFile(fileOrUrl, onSuccess, onProgress, useOfflineSupport ? this.offlineProvider : undefined, useArrayBuffer, onError, onOpened);\n      this._activeRequests.push(request);\n      request.onCompleteObservable.add(function (request) {\n        _this10._activeRequests.splice(_this10._activeRequests.indexOf(request), 1);\n      });\n      return request;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_loadFileAsync\",\n    value: function _loadFileAsync(fileOrUrl, onProgress, useOfflineSupport, useArrayBuffer, onOpened) {\n      var _this11 = this;\n      return new Promise(function (resolve, reject) {\n        _this11._loadFile(fileOrUrl, function (data) {\n          resolve(data);\n        }, onProgress, useOfflineSupport, useArrayBuffer, function (request, exception) {\n          reject(exception);\n        }, onOpened);\n      });\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_requestFile\",\n    value: function _requestFile(url, onSuccess, onProgress, useOfflineSupport, useArrayBuffer, onError, onOpened) {\n      var _this12 = this;\n      var request = RequestFile(url, onSuccess, onProgress, useOfflineSupport ? this.offlineProvider : undefined, useArrayBuffer, onError, onOpened);\n      this._activeRequests.push(request);\n      request.onCompleteObservable.add(function (request) {\n        _this12._activeRequests.splice(_this12._activeRequests.indexOf(request), 1);\n      });\n      return request;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_requestFileAsync\",\n    value: function _requestFileAsync(url, onProgress, useOfflineSupport, useArrayBuffer, onOpened) {\n      var _this13 = this;\n      return new Promise(function (resolve, reject) {\n        _this13._requestFile(url, function (data) {\n          resolve(data);\n        }, onProgress, useOfflineSupport, useArrayBuffer, function (error) {\n          reject(error);\n        }, onOpened);\n      });\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_readFile\",\n    value: function _readFile(file, onSuccess, onProgress, useArrayBuffer, onError) {\n      var _this14 = this;\n      var request = ReadFile(file, onSuccess, onProgress, useArrayBuffer, onError);\n      this._activeRequests.push(request);\n      request.onCompleteObservable.add(function (request) {\n        _this14._activeRequests.splice(_this14._activeRequests.indexOf(request), 1);\n      });\n      return request;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_readFileAsync\",\n    value: function _readFileAsync(file, onProgress, useArrayBuffer) {\n      var _this15 = this;\n      return new Promise(function (resolve, reject) {\n        _this15._readFile(file, function (data) {\n          resolve(data);\n        }, onProgress, useArrayBuffer, function (error) {\n          reject(error);\n        });\n      });\n    }\n    /**\n     * This method gets the performance collector belonging to the scene, which is generally shared with the inspector.\n     * @returns the perf collector belonging to the scene.\n     */\n  }, {\n    key: \"getPerfCollector\",\n    value: function getPerfCollector() {\n      throw _WarnImport(\"performanceViewerSceneExtension\");\n    }\n  }], [{\n    key: \"DefaultMaterialFactory\",\n    value: function DefaultMaterialFactory(scene) {\n      throw _WarnImport(\"StandardMaterial\");\n    }\n    /**\n     * Factory used to create the a collision coordinator.\n     * @returns The collision coordinator\n     */\n  }, {\n    key: \"CollisionCoordinatorFactory\",\n    value: function CollisionCoordinatorFactory() {\n      throw _WarnImport(\"DefaultCollisionCoordinator\");\n    }\n  }, {\n    key: \"DragMovementThreshold\",\n    get: function get() {\n      return InputManager.DragMovementThreshold;\n    },\n    set: function set(value) {\n      InputManager.DragMovementThreshold = value;\n    }\n    /**\n     * Time in milliseconds to wait to raise long press events if button is still pressed. Default is 500 ms\n     */\n  }, {\n    key: \"LongPressDelay\",\n    get: function get() {\n      return InputManager.LongPressDelay;\n    },\n    set: function set(value) {\n      InputManager.LongPressDelay = value;\n    }\n    /**\n     * Time in milliseconds to wait to raise long press events if button is still pressed. Default is 300 ms\n     */\n  }, {\n    key: \"DoubleClickDelay\",\n    get: function get() {\n      return InputManager.DoubleClickDelay;\n    },\n    set: function set(value) {\n      InputManager.DoubleClickDelay = value;\n    }\n    /** If you need to check double click without raising a single click at first click, enable this flag */\n  }, {\n    key: \"ExclusiveDoubleClickMode\",\n    get: function get() {\n      return InputManager.ExclusiveDoubleClickMode;\n    },\n    set: function set(value) {\n      InputManager.ExclusiveDoubleClickMode = value;\n    }\n  }]);\n  return Scene;\n}(AbstractScene);\n/** The fog is deactivated */\nScene.FOGMODE_NONE = 0;\n/** The fog density is following an exponential function */\nScene.FOGMODE_EXP = 1;\n/** The fog density is following an exponential function faster than FOGMODE_EXP */\nScene.FOGMODE_EXP2 = 2;\n/** The fog density is following a linear function. */\nScene.FOGMODE_LINEAR = 3;\n/**\n * Gets or sets the minimum deltatime when deterministic lock step is enabled\n * @see https://doc.babylonjs.com/features/featuresDeepDive/animation/advanced_animations#deterministic-lockstep\n */\nScene.MinDeltaTime = 1.0;\n/**\n * Gets or sets the maximum deltatime when deterministic lock step is enabled\n * @see https://doc.babylonjs.com/features/featuresDeepDive/animation/advanced_animations#deterministic-lockstep\n */\nScene.MaxDeltaTime = 1000.0;\n/**\n * @internal\n */\nScene.prototype.setActiveCameraByID = function (id) {\n  return this.setActiveCameraById(id);\n};\nScene.prototype.getLastMaterialByID = function (id) {\n  return this.getLastMaterialById(id);\n};\nScene.prototype.getMaterialByID = function (id) {\n  return this.getMaterialById(id);\n};\nScene.prototype.getTextureByUniqueID = function (uniqueId) {\n  return this.getTextureByUniqueId(uniqueId);\n};\nScene.prototype.getCameraByID = function (id) {\n  return this.getCameraById(id);\n};\nScene.prototype.getCameraByUniqueID = function (uniqueId) {\n  return this.getCameraByUniqueId(uniqueId);\n};\nScene.prototype.getBoneByID = function (id) {\n  return this.getBoneById(id);\n};\nScene.prototype.getLightByID = function (id) {\n  return this.getLightById(id);\n};\nScene.prototype.getLightByUniqueID = function (uniqueId) {\n  return this.getLightByUniqueId(uniqueId);\n};\nScene.prototype.getParticleSystemByID = function (id) {\n  return this.getParticleSystemById(id);\n};\nScene.prototype.getGeometryByID = function (id) {\n  return this.getGeometryById(id);\n};\nScene.prototype.getMeshByID = function (id) {\n  return this.getMeshById(id);\n};\nScene.prototype.getMeshesByID = function (id) {\n  return this.getMeshesById(id);\n};\nScene.prototype.getTransformNodeByID = function (id) {\n  return this.getTransformNodeById(id);\n};\nScene.prototype.getTransformNodeByUniqueID = function (uniqueId) {\n  return this.getTransformNodeByUniqueId(uniqueId);\n};\nScene.prototype.getTransformNodesByID = function (id) {\n  return this.getTransformNodesById(id);\n};\nScene.prototype.getMeshByUniqueID = function (uniqueId) {\n  return this.getMeshByUniqueId(uniqueId);\n};\nScene.prototype.getLastMeshByID = function (id) {\n  return this.getLastMeshById(id);\n};\nScene.prototype.getLastEntryByID = function (id) {\n  return this.getLastEntryById(id);\n};\nScene.prototype.getNodeByID = function (id) {\n  return this.getNodeById(id);\n};\nScene.prototype.getLastSkeletonByID = function (id) {\n  return this.getLastSkeletonById(id);\n};"],"names":["ScenePerformancePriority","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","this","arguments","Scene","_AbstractScene","_super","engine","options","_this","_inputManager","cameraToUseForPointers","_isScene","_blockEntityCollection","autoClear","autoClearDepthAndStencil","clearColor","ambientColor","environmentIntensity","_performancePriority","BackwardCompatible","_forceWireframe","_skipFrustumClipping","_forcePointsCloud","animationsEnabled","_animationPropertiesOverride","useConstantAnimationDeltaTime","constantlyUpdateMeshUnderPointer","hoverCursor","defaultCursor","doNotHandleCursors","preventDefaultOnPointerDown","preventDefaultOnPointerUp","metadata","reservedDataStore","disableOfflineSupportExceptionRules","onDisposeObservable","_onDisposeObserver","onBeforeRenderObservable","_onBeforeRenderObserver","onAfterRenderObservable","onAfterRenderCameraObservable","_onAfterRenderObserver","onBeforeAnimationsObservable","onAfterAnimationsObservable","onBeforeDrawPhaseObservable","onAfterDrawPhaseObservable","onReadyObservable","onBeforeCameraRenderObservable","_onBeforeCameraRenderObserver","onAfterCameraRenderObservable","_onAfterCameraRenderObserver","onBeforeActiveMeshesEvaluationObservable","onAfterActiveMeshesEvaluationObservable","onBeforeParticlesRenderingObservable","onAfterParticlesRenderingObservable","onDataLoadedObservable","onNewCameraAddedObservable","onCameraRemovedObservable","onNewLightAddedObservable","onLightRemovedObservable","onNewGeometryAddedObservable","onGeometryRemovedObservable","onNewTransformNodeAddedObservable","onTransformNodeRemovedObservable","onNewMeshAddedObservable","onMeshRemovedObservable","onNewSkeletonAddedObservable","onSkeletonRemovedObservable","onNewMaterialAddedObservable","onNewMultiMaterialAddedObservable","onMaterialRemovedObservable","onMultiMaterialRemovedObservable","onNewTextureAddedObservable","onTextureRemovedObservable","onBeforeRenderTargetsRenderObservable","onAfterRenderTargetsRenderObservable","onBeforeStepObservable","onAfterStepObservable","onActiveCameraChanged","onActiveCamerasChanged","onBeforeRenderingGroupObservable","onAfterRenderingGroupObservable","onMeshImportedObservable","onAnimationFileImportedObservable","_registeredForLateAnimationBindings","skipPointerMovePicking","skipPointerDownPicking","skipPointerUpPicking","onPrePointerObservable","onPointerObservable","onPreKeyboardObservable","onKeyboardObservable","_useRightHandedSystem","_timeAccumulator","_currentStepId","_currentInternalStep","_fogEnabled","_fogMode","FOGMODE_NONE","fogColor","fogDensity","fogStart","fogEnd","needsPreviousWorldMatrices","_shadowsEnabled","_lightsEnabled","_unObserveActiveCameras","_texturesEnabled","physicsEnabled","particlesEnabled","spritesEnabled","_skeletonsEnabled","lensFlaresEnabled","collisionsEnabled","gravity","postProcessesEnabled","renderTargetsEnabled","dumpNextRenderTargets","customRenderTargets","importedMeshesFiles","probesEnabled","_meshesForIntersections","proceduralTexturesEnabled","_totalVertices","_activeIndices","_activeParticles","_activeBones","_animationTime","animationTimeScale","_renderId","_frameId","_executeWhenReadyTimeoutId","_intermediateRendering","_defaultFrameBufferCleared","_viewUpdateFlag","_projectionUpdateFlag","_toBeDisposed","_activeRequests","_pendingData","_isDisposed","dispatchAllSubMeshesOfActiveMeshes","_activeMeshes","_processedMaterials","_renderTargets","_materialsRenderTargets","_activeParticleSystems","_activeSkeletons","_softwareSkinnedMeshes","_activeAnimatables","_transformMatrix","requireLightSorting","_components","_serializableComponents","_transientComponents","_beforeCameraUpdateStage","_beforeClearStage","_beforeRenderTargetClearStage","_gatherRenderTargetsStage","_gatherActiveCameraRenderTargetsStage","_isReadyForMeshStage","_beforeEvaluateActiveMeshStage","_evaluateSubMeshStage","_preActiveMeshStage","_cameraDrawRenderTargetStage","_beforeCameraDrawStage","_beforeRenderTargetDrawStage","_beforeRenderingGroupDrawStage","_beforeRenderingMeshStage","_afterRenderingMeshStage","_afterRenderingGroupDrawStage","_afterCameraDrawStage","_afterCameraPostProcessStage","_afterRenderTargetDrawStage","_afterRenderTargetPostProcessStage","_afterRenderStage","_pointerMoveStage","_pointerDownStage","_pointerUpStage","_geometriesByUniqueId","_defaultMeshCandidates","data","_defaultSubMeshCandidates","_preventFreeActiveMeshesAndRenderingGroups","_activeMeshesFrozen","_activeMeshesFrozenButKeepClipping","_skipEvaluateActiveMeshesCompletely","_allowPostProcessClearColor","getDeterministicFrameTime","_engine","getTimeStep","_registeredActions","_blockMaterialDirtyMechanism","_perfCollector","activeCameras","fullOptions","target","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectSpread","useGeometryUniqueIdsMap","useMaterialMeshMap","useClonedMeshMap","virtual","_virtualScenes","scenes","_uid","_renderingManager","postProcessManager","attachControl","_createUbo","_imageProcessingConfiguration","setDefaultCandidateProviders","onNewSceneAddedObservable","notifyObservers","get","_environmentTexture","set","markAllMaterialsAsDirty","skipFrustumClipping","maintainStateBetweenFrames","Intermediate","Aggressive","callback","remove","add","unTranslatedPointer","effect","_a","variableName","undefined","isVector3","eyePosition","_forcedViewPosition","_mirroredCameraPosition","activeCamera","globalPosition","devicePosition","invertNormal","useRightHandedSystem","x","y","z","setFloat3","setVector4","ubo","getSceneUniformBuffer","bindEyePosition","updateFloat4","w","update","newStepId","prePassRenderer","defaultRT","enabled","_activeCameras","cameras","_this2","_activeCamera","_defaultMaterial","DefaultMaterialFactory","_collisionCoordinator","CollisionCoordinatorFactory","init","_frustumPlanes","_step","_iterator","register","component","serializableComponent","addFromContainer","serialize","_step2","_iterator2","meshes","mesh","subMeshes","getActiveMeshCandidates","_getDefaultMeshCandidates","bind","getActiveSubMeshCandidates","_getDefaultSubMeshCandidates","getIntersectingSubMeshCandidates","getCollidingSubMeshCandidates","meshUnderPointer","pointerX","pointerY","_cachedMaterial","_cachedEffect","_cachedVisibility","material","visibility","current","_animationRatio","setSceneUniformBuffer","createSceneUniformBuffer","pickResult","pointerEventInit","simulatePointerMove","simulatePointerDown","doubleTap","simulatePointerUp","pointerId","isPointerCaptured","attachUp","attachDown","attachMove","detachControl","index","checkRenderTargets","getEngine","isReady","reset","_step3","hardwareInstancedRendering","hasThinInstances","getClassName","getCaps","instancedArrays","instances","_iterator3","action","mat","defaultMaterial","_storeEffectOnSubMeshes","_step4","_iterator4","subMesh","getMaterial","hasRenderTargetTextures","getRenderTargetTextures","indexOf","concatWithNoDuplicate","areAllEffectsReady","rtt","isReadyForRendering","geometries","geometry","delayLoadState","_step5","_iterator5","camera","_step6","_iterator6","particleSystems","particleSystem","func","removeCallback","_this3","registerBeforeRender","execFunc","setTimeout","unregisterBeforeRender","timeout","_this4","_executeOnceBeforeRender","wasLoading","isLoading","splice","addOnce","_checkIsReady","_this5","Promise","resolve","executeWhenReady","_this6","_registerTransientComponents","clear","incrementRenderId","_animationTimeLast","_viewMatrix","_projectionMatrix","viewL","projectionL","viewR","projectionR","_multiviewSceneUbo","dispose","updateFlag","multiplyToRef","useUbo","_updateMultiviewUbo","_sceneUbo","updateMatrix","sceneUbo","addUniform","UniqueId","newMesh","_this7","recursive","_resyncLightSources","parent","_addToSceneRootNodes","getChildMeshes","m","addMesh","toRemove","_this8","pop","_removeFromSceneRootNodes","_invalidateMesh","removeMesh","newTransformNode","getScene","_indexInSceneTransformNodesArray","transformNodes","lastNode","skeletons","_executeActiveContainerCleanup","morphTargetManagers","lights","_step7","_iterator7","_removeLightSource","sortLightsByPriority","index2","animations","animationName","targetMask","animationGroups","multiMaterials","_indexInSceneMaterialArray","materials","lastMaterial","actionManagers","textures","newLight","_step8","_iterator8","lightSources","sort","newCamera","newSkeleton","newParticleSystem","newAnimation","newAnimationGroup","newMultiMaterial","newMaterial","newMorphTargetManager","newGeometry","uniqueId","newActionManager","newTexture","canvas","getInputElement","id","getCameraById","getCameraByName","allowMultiMaterials","predicate","_index","_material","_getMaterial","_index2","skeletonIndex","skeleton","boneIndex","bones","_index3","force","_getGeometryByUniqueId","addGeometry","lastGeometry","getMeshById","transformNode","getTransformNodeById","light","getLightById","bone","getBoneById","getMeshByName","getTransformNodeByName","getLightByName","getBoneByName","managerIndex","morphTargetManager","numTargets","getTarget","postProcessIndex","postProcesses","postProcess","_externalData","factory","getOrAddWithFactory","initialMesh","forcePush","isInFrustum","_step9","_iterator9","dispatch","freeActiveMeshes","freeRenderingGroups","blockfreeActiveMeshesAndRenderingGroups","texture","renderList","_this9","skipEvaluateActiveMeshes","onSuccess","onError","freezeMeshes","keepFrustumCulling","updateTransformMatrix","_evaluateActiveMeshes","_freeze","_internalAbstractMeshDataInfo","_isActive","_index4","_unFreeze","container","snapshotRendering","snapshotRenderingMode","_len","computeWorldMatrix","psLength","_i","animate","resetSprites","_step10","_iterator10","_i2","_mesh","_currentLODIsUpToDate","isBlocked","addCount","getTotalVertices","isEnabled","scaling","hasAZeroComponent","actionManager","hasSpecificTriggers2","pushNoDuplicate","meshToRender","customLODSelector","getLOD","_currentLOD","billboardMode","_preActivate","isVisible","layerMask","alwaysSelectAsActiveMesh","_activate","_step11","_iterator11","isAnInstance","_actAsRegularMesh","_onlyForInstances","_activeMesh","_postActivate","particleIndex","isStarted","emitter","position","dispatchParticles","sourceMesh","prepare","computeBonesUsingShaders","hasInstances","_evaluateSubMesh","_renderingMultiview","leftCamera","_rigCameras","rightCamera","setTransformMatrix","getViewMatrix","getProjectionMatrix","_multiviewTexture","_bindFrameBuffer","outputRenderTarget","_currentFrameBufferIsDefaultFrameBuffer","restoreDefaultFramebuffer","_clearFrameBuffer","onClearObservable","hasObservers","skipInitialClear","_cleared","_clear","rigParent","_b","_c","bindFrameBuffer","_skipRendering","Error","setViewport","viewport","resetCachedMaterial","prePass","softwareSkinnedMeshIndex","applySkeleton","environmentTexture","isRenderTarget","_step13","_iterator12","_step18","needRebind","renderIndex","renderTarget","_shouldRender","hasSpecialRenderTargetCamera","render","_step14","_iterator13","currentRenderPassId","renderPassId","_prepareFrame","_step15","_iterator14","_step19","finalizeSceneUbo","_step16","_iterator15","_step20","_finalizeFrame","isIntermediate","_step17","_iterator16","_step21","cameraRigMode","_createMultiviewUbo","_renderForCamera","_useMultiviewToSingleView","_renderMultiviewToSingleView","_loop","actions","actionIndex","trigger","parameters","getTriggerParameter","otherMesh","areIntersecting","intersectsMesh","usePreciseIntersection","currentIntersectionInProgress","_intersectionsInProgress","_executeCurrent","hasSpecificTrigger","parameter","parameterMesh","isDeterministicLockStep","deltaTime","Math","max","MinDeltaTime","min","getDeltaTime","MaxDeltaTime","defaultFrameTime","defaultFPS","stepsTaken","maxSubSteps","getLockstepMaxSteps","internalSteps","floor","_animate","_advancePhysicsEngineStep","_deltaTime","forceWireframe","forcePointsCloud","isRigCamera","rigCameras","passId","_step22","_iterator17","resetDrawCache","updateCameras","ignoreAnimations","isDisposed","_checkCameraRenderTarget","fetchNewFrame","processTrigger","_step23","_iterator18","cameraIndex","_index5","currentActiveCamera","customIndex","_step24","_iterator19","_step27","_step25","_iterator20","_step28","_cameraIndex","_processSubCameras","_checkIntersections","_step26","_iterator21","_step29","afterRender","_index6","freeze","unfreeze","beforeRender","stopAllAnimations","_step30","_iterator22","abort","console","error","_index7","_disposeList","item","wipeCaches","items","_step31","_iterator23","meshIndex","clearCachedData","_step32","_iterator24","baseTexture","_buffer","filterPredicate","Number","MAX_VALUE","infiniteDistance","boundingInfo","getBoundingInfo","minBox","boundingBox","minimumWorld","maxBox","maximumWorld","world","fastCheck","trianglePredicate","ray","setPointerOverMesh","getPointerOverMesh","_step33","_iterator25","_rebuild","_step34","_iterator26","_step35","_iterator27","rebuild","_step36","_iterator28","spriteManagers","_step37","_iterator29","_step38","_iterator30","list","tagsQuery","listByTags","_getByTags","concat","renderingGroupId","opaqueSortCompareFn","alphaTestSortCompareFn","transparentSortCompareFn","setRenderingOrder","autoClearDepthStencil","depth","stencil","setRenderingAutoClearDepthStencil","getAutoClearDepthStencilSetup","flag","_step39","_iterator31","markAsDirty","fileOrUrl","onProgress","useOfflineSupport","useArrayBuffer","onOpened","_this10","request","offlineProvider","onCompleteObservable","_this11","reject","_loadFile","exception","url","_this12","_this13","_requestFile","file","_this14","_this15","_readFile","scene","FOGMODE_EXP","FOGMODE_EXP2","FOGMODE_LINEAR","setActiveCameraByID","setActiveCameraById","getLastMaterialByID","getLastMaterialById","getMaterialByID","getMaterialById","getTextureByUniqueID","getTextureByUniqueId","getCameraByID","getCameraByUniqueID","getCameraByUniqueId","getBoneByID","getLightByID","getLightByUniqueID","getLightByUniqueId","getParticleSystemByID","getParticleSystemById","getGeometryByID","getGeometryById","getMeshByID","getMeshesByID","getMeshesById","getTransformNodeByID","getTransformNodeByUniqueID","getTransformNodeByUniqueId","getTransformNodesByID","getTransformNodesById","getMeshByUniqueID","getMeshByUniqueId","getLastMeshByID","getLastMeshById","getLastEntryByID","getLastEntryById","getNodeByID","getNodeById","getLastSkeletonByID","getLastSkeletonById"],"sourceRoot":""}